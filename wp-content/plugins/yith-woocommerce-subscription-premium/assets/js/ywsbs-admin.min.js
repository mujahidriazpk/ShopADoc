jQuery(document).ready(function(a){"use strict";a("#ywsbs_safe_submit_field").val("");"undefined"!=typeof yith_ywsbs_admin&&yith_ywsbs_admin.block_loader;a(document).on("click",".load_customer_info",function(e){e.preventDefault();var t=a(this);!function(e,t,i,s){var o=t==i?"load_"+t:"copy_billing";if(!0===s||window.confirm(yith_ywsbs_admin[o])){var n=a("#user_id").val();if(0==n)return window.alert(yith_ywsbs_admin.no_customer_selected);var c={user_id:n,action:"woocommerce_get_customer_details",security:yith_ywsbs_admin.get_customer_details_nonce};a.ajax({url:yith_ywsbs_admin.ajaxurl,data:c,type:"POST",success:function(e){e&&e[t]&&a.each(e[t],function(e,t){a("#_"+i+"_"+e).val(t).change()})}})}}(0,t.data("from"),t.data("to"))}),a(document).on("click","a.edit_address",function(e){e.preventDefault();var t=a(this),i=t.closest(".subscription_data_column").find("div.edit_address"),s=t.closest(".subscription_data_column").find("a");t.closest(".subscription_data_column").find("div.address").toggle(),s.toggle(),i.toggle()}),void 0!==a.fn.datetimepicker&&a(document).find(".ywsbs-timepicker").each(function(){a(this).datetimepicker({timeFormat:"HH:mm:00",defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0})}),a("#ywsbs_schedule_subscription_button").on("click",function(e){e.preventDefault(),a("#ywsbs_safe_submit_field").val("schedule_subscription"),a(this).closest("form").submit()});var t={init:function(){var e=a(document).find("#woocommerce-order-items");e.on("click","a.edit-order-item",this.edit_item),e.on("click",".save-action",this.save_items),e.on("click",".recalculate-action",this.recalculate)},edit_item:function(){return a(this).closest("tr").find(".view").hide(),a(this).closest("tr").find(".edit").show(),a(this).hide(),a(".wc-order-add-item").show(),a(".wc-order-recalculate").hide(),a("button.cancel-action").attr("data-reload",!0),!1},save_items:function(){var e={subscription_id:a("#post_ID").val(),items:a("table.woocommerce_order_items :input[name], .wc-order-totals-items :input[name]").serialize(),action:"ywsbs_save_items",security:yith_ywsbs_admin.save_item_nonce};return a.ajax({url:yith_ywsbs_admin.ajaxurl,data:e,type:"POST",beforeSend:function(){a("#woocommerce-order-items").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){a("#ywsbs-product-subscription").find(".inside").empty().append(e),a("#woocommerce-order-items").unblock(),t.init()}}),!1},recalculate:function(){var e={subscription_id:a("#post_ID").val(),action:"ywsbs_recalculate",security:yith_ywsbs_admin.recalculate_nonce};a.ajax({url:yith_ywsbs_admin.ajaxurl,data:e,type:"POST",beforeSend:function(){a("#woocommerce-order-items").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){a("#ywsbs-product-subscription").find(".inside").empty().append(e),a("#woocommerce-order-items").unblock(),t.init()}})}};t.init()});