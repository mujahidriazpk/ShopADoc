{"version":3,"file":"mapsvg-front.umd.js","sources":["../js/mapsvg/Core/globals.js","../js/mapsvg/Map/default-options.ts","../js/mapsvg/Vendor/tinycolor.js","../js/mapsvg/Infrastructure/Server/Server.ts","../js/mapsvg/Core/Events.ts","../js/mapsvg/Core/ArrayIndexed.ts","../js/mapsvg/Infrastructure/Server/SchemaField.ts","../js/mapsvg/Infrastructure/Server/Schema.ts","../js/mapsvg/Infrastructure/Server/Query.ts","../js/mapsvg/Location/LocationAddress.ts","../js/mapsvg/Location/Location.ts","../js/mapsvg/Object/CustomObject.ts","../js/mapsvg/Core/Repository.ts","../js/mapsvg/Map/MapsRepository.ts","../js/mapsvg/Map/MapsV2Repository.ts","../js/mapsvg/Core/ResizeSensor.ts","../js/mapsvg/Map/MapOptionsInterface.ts","../js/mapsvg/MapObject/MapObject.ts","../js/mapsvg/Marker/Marker.ts","../js/mapsvg/MarkerCluster/MarkerCluster.ts","../js/mapsvg/Region/Region.ts","../js/mapsvg/Infrastructure/Server/SchemaRepository.ts","../js/mapsvg/Core/Controller.ts","../js/mapsvg/Directory/Directory.ts","../js/mapsvg/Details/Details.ts","../js/mapsvg/FormBuilder/FormElements/FormElement.ts","../js/mapsvg/FormBuilder/FormElements/CheckboxFormElement.ts","../js/mapsvg/FormBuilder/FormElements/CheckboxesFormElement.ts","../js/mapsvg/FormBuilder/FormElements/DateFormElement.ts","../js/mapsvg/FormBuilder/FormElements/DistanceFormElement.ts","../js/mapsvg/FormBuilder/FormElements/EmptyFormElement.ts","../js/mapsvg/FormBuilder/FormElements/IdFormElement.ts","../js/vendor/sortable/sortable.min.js","../js/mapsvg/FormBuilder/FormElements/ImagesFormElement.ts","../js/mapsvg/FormBuilder/FormElements/LocationFormElement.ts","../js/mapsvg/FormBuilder/FormElements/ModalFormElement.ts","../js/mapsvg/FormBuilder/FormElements/PostFormElement.ts","../js/mapsvg/FormBuilder/FormElements/RadioFormElement.ts","../js/mapsvg/FormBuilder/FormElements/RegionsFormElement.ts","../js/mapsvg/FormBuilder/FormElements/SaveFormElement.ts","../js/mapsvg/FormBuilder/FormElements/SearchFormElement.ts","../js/mapsvg/FormBuilder/FormElements/SelectFormElement.ts","../js/mapsvg/FormBuilder/FormElements/StatusFormElement.ts","../js/mapsvg/FormBuilder/FormElements/TextareaFormElement.ts","../js/mapsvg/FormBuilder/FormElements/TextFormElement.ts","../js/mapsvg/FormBuilder/FormElements/FormElementFactory.ts","../js/mapsvg/FormBuilder/FormBuilder.ts","../js/mapsvg/Filters/Filters.ts","../js/mapsvg/Popover/Popover.ts","../js/mapsvg/Map/Map.ts"],"sourcesContent":["/**\n * Global MapSVG class. It contains all other MapSVG classes and some static methods.\n * @constructor\n * @example\n * var mapsvg = MapSVG.get(0); // get first map instance\n * var mapsvg2 = MapSVG.get(1); // get second map instance\n * var mapsvg3 = MapSVG.getById(123); // get map by ID\n *\n * var mapsvg = new MapSVG.Map(\"my-container\",{\n *   source: \"/path/to/map.svg\"\n * });\n *\n * var marker = new MapSVG.Marker({\n *   location: location,\n *   mapsvg: mapsvg\n * });\n *\n * if(MapSVG.isPhone){\n *  // do something special for mobile devices\n * }\n *\n *\n */\nvar MapSVG = function() {\n\n};\nconst $ = jQuery;\n\nMapSVG.formBuilder = {};\nMapSVG.mediaUploader = {};\n\nif(typeof wp !== 'undefined' && typeof wp.media !== 'undefined'){\n    MapSVG.mediaUploader = wp.media({\n        title: 'Choose images',\n        button: {\n            text: 'Choose images'\n        },\n        multiple: true\n    });\n}\n\n\n/**\n * Keeps loaded HBS templates\n * @type {Array}\n * @private\n * @static\n * @property\n */\nMapSVG.templatesLoaded = {};\n\n/**\n * Keeps URLs\n * @type {Array}\n * @private\n * @static\n * @property\n */\nif(typeof mapsvg_paths !== \"undefined\"){\n    MapSVG.urls = mapsvg_paths;\n} else {\n    MapSVG.urls = {};\n}\nif(typeof ajaxurl !== \"undefined\"){\n    MapSVG.urls.ajaxurl = ajaxurl;\n}\n\n/**\n * Keeps map instances\n * @type {Array}\n * @private\n * @static\n * @property\n */\nMapSVG.instances = [];\n\nMapSVG.userAgent = navigator.userAgent.toLowerCase();\n\n/**\n * Determines if current device is touch-device\n * @type {boolean}\n * @static\n * @property\n */\nMapSVG.touchDevice =\n    (('ontouchstart' in window)\n        || (navigator.MaxTouchPoints > 0)\n        || (navigator.msMaxTouchPoints > 0));\n    // (MapSVG.userAgent.indexOf(\"ipad\") > -1) ||\n    // (MapSVG.userAgent.indexOf(\"iphone\") > -1) ||\n    // (MapSVG.userAgent.indexOf(\"ipod\") > -1) ||\n    // (MapSVG.userAgent.indexOf(\"android\") > -1);\n\n/**\n * Determines if current device is iOS-device\n * @type {boolean}\n * @static\n * @property\n */\nMapSVG.ios =\n    (MapSVG.userAgent.indexOf(\"ipad\") > -1) ||\n    (MapSVG.userAgent.indexOf(\"iphone\") > -1) ||\n    (MapSVG.userAgent.indexOf(\"ipod\") > -1);\n\n/**\n * Determines if current device is Android-device\n * @type {boolean}\n * @static\n * @property\n */\nMapSVG.android = MapSVG.userAgent.indexOf(\"android\");\n\n/**\n * Determines if current device is mobile-device\n * @type {boolean}\n * @static\n * @property\n */\nMapSVG.isPhone = window.matchMedia(\"only screen and (max-width: 812px)\").matches;\n\n/**\n * Keeps browser information\n * @type {object}\n * @static\n * @property\n */\nMapSVG.browser = {};\nMapSVG.browser.ie = MapSVG.userAgent.indexOf(\"msie\") > -1 || MapSVG.userAgent.indexOf(\"trident\") > -1 || MapSVG.userAgent.indexOf(\"edge\") > -1 ? {} : false;\nMapSVG.browser.firefox = MapSVG.userAgent.indexOf(\"firefox\") > -1;\n\n/**\n * Contains device information\n * @type {object}\n * @static\n * @property\n */\nvar ua = window.navigator.userAgent;\nMapSVG.device = {};\nMapSVG.device.ios = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i);\nMapSVG.device.android = !!ua.match(/Android/i);\n\nif (!String.prototype.trim) {\n    String.prototype.trim=function(){return this.replace(/^\\s+|\\s+$/g, '');};\n}\n\n/**\n * Converts mouse event object to x/y coordinates\n * @param e\n * @returns {{x: *, y: *}}\n */\nMapSVG.mouseCoords = function(e){\n    if(e.clientX){\n        return {'x':e.clientX + $(document).scrollLeft(), 'y':e.clientY + $(document).scrollTop()};\n    }if(e.pageX){\n        return {'x':e.pageX, 'y':e.pageY};\n    }else if(MapSVG.touchDevice){\n        e = e.originalEvent || e;\n        return e.touches && e.touches[0] ?\n            {'x':e.touches[0].pageX, 'y':e.touches[0].pageY} :\n            {'x':e.changedTouches[0].pageX, 'y':e.changedTouches[0].pageY};\n    }\n};\n\n/**\n * Adds new instance of the map\n * @param {MapSVG.Map} mapsvg\n */\nMapSVG.addInstance = function(mapsvg){\n    MapSVG.instances.push(mapsvg);\n};\n\nMapSVG.get = function(index){\n    return MapSVG.instances[index];\n};\n\nMapSVG.getById = function(id){\n    var instance = MapSVG.instances.filter(function(i){ return i.id == id });\n    if(instance.length > 0){\n        return instance[0];\n    }\n};\n\nMapSVG.getByContainerId = function(id){\n    var instance = MapSVG.instances.filter(function(i){ return i.$map.attr('id') == id });\n    if(instance.length > 0){\n        return instance[0];\n    }\n};\n\nMapSVG.extend = function(sub, base) {\n    sub.prototype = Object.create(base.prototype);\n    sub.prototype.constructor = sub;\n};\n\nMapSVG.ucfirst = function(string){\n    return string.charAt(0).toUpperCase()+string.slice(1);\n};\nMapSVG.parseBoolean = function (string) {\n    switch (String(string).toLowerCase()) {\n        case \"on\":\n        case \"true\":\n        case \"1\":\n        case \"yes\":\n        case \"y\":\n            return true;\n        case \"off\":\n        case \"false\":\n        case \"0\":\n        case \"no\":\n        case \"n\":\n            return false;\n        default:\n            return undefined;\n    }\n};\nMapSVG.isNumber = function(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\nMapSVG.safeURL = function(url){\n    if(url.indexOf('http://') == 0 || url.indexOf('https://') == 0)\n        url = \"//\"+url.split(\"://\").pop();\n    return url.replace(/^.*\\/\\/[^\\/]+/, '');\n};\n\nMapSVG.convertToText = function(obj) {\n    //create an array that will later be joined into a string.\n    var string = [];\n\n    //is object\n    //    Both arrays and objects seem to return \"object\"\n    //    when typeof(obj) is applied to them. So instead\n    //    I am checking to see if they have the property\n    //    join, which normal objects don't have but\n    //    arrays do.\n    if (obj === null) {\n        return null;\n    } if (obj === undefined) {\n        return '\"\"';\n    } else if (typeof(obj) == \"object\" && (obj.join == undefined)) {\n        var prop;\n        for (prop in obj) {\n            if (obj.hasOwnProperty(prop)){\n                var key = '\"'+prop.replace(/\\\"/g,'\\\\\"')+'\"'; //prop.search(/[^a-zA-Z]+/) === -1 ?  prop : ...\n                string.push( key + ': ' + MapSVG.convertToText(obj[prop]));\n            }\n        }\n        return \"{\" + string.join(\",\") + \"}\";\n\n        //is array\n    } else if (typeof(obj) == \"object\" && !(obj.join == undefined)) {\n        var prop;\n        for(prop in obj) {\n            string.push(MapSVG.convertToText(obj[prop]));\n        }\n        return \"[\" + string.join(\",\") + \"]\";\n\n        //is function\n    } else if (typeof(obj) == \"function\") {\n        return obj.toString().replace('function anonymous','function');\n        // string.push(obj.toString().replace('function anonymous','function'));\n\n        //all other values can be done with JSON.stringify\n    } else {\n        return JSON.stringify(obj);\n        // var s = JSON.stringify(obj);\n        // string.push(s);\n    }\n\n    return string.join(\",\");\n};\n\n// Create Element.remove() function if not exists\nif (!('remove' in Element.prototype)) {\n    Element.prototype.remove = function() {\n        if (this.parentNode) {\n            this.parentNode.removeChild(this);\n        }\n    };\n}\n\nMath.hypot = Math.hypot || function() {\n    var y = 0;\n    var length = arguments.length;\n\n    for (var i = 0; i < length; i++) {\n        if (arguments[i] === Infinity || arguments[i] === -Infinity) {\n            return Infinity;\n        }\n        y += arguments[i] * arguments[i];\n    }\n    return Math.sqrt(y);\n};\nSVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function(toElement) {\n    return toElement.getScreenCTM().inverse().multiply(this.getScreenCTM());\n};\n\nMap.prototype.toArray = function(){\n    return Array.from(this, ([name, value]) => value );\n}\n\n\n\nMapSVG.ResizeSensor = class ResizeSensor {\n    constructor(element, callback) {\n        var _this = this;\n        _this.element = element;\n        _this.callback = callback;\n        var style = getComputedStyle(element);\n        var zIndex = parseInt(style.zIndex);\n        if (isNaN(zIndex)) {\n            zIndex = 0;\n        }\n        ;\n        zIndex--;\n        _this.expand = document.createElement('div');\n        _this.expand.style.position = \"absolute\";\n        _this.expand.style.left = \"0px\";\n        _this.expand.style.top = \"0px\";\n        _this.expand.style.right = \"0px\";\n        _this.expand.style.bottom = \"0px\";\n        _this.expand.style.overflow = \"hidden\";\n        _this.expand.style.zIndex = zIndex.toString();\n        _this.expand.style.visibility = \"hidden\";\n        var expandChild = document.createElement('div');\n        expandChild.style.position = \"absolute\";\n        expandChild.style.left = \"0px\";\n        expandChild.style.top = \"0px\";\n        expandChild.style.width = \"10000000px\";\n        expandChild.style.height = \"10000000px\";\n        _this.expand.appendChild(expandChild);\n        _this.shrink = document.createElement('div');\n        _this.shrink.style.position = \"absolute\";\n        _this.shrink.style.left = \"0px\";\n        _this.shrink.style.top = \"0px\";\n        _this.shrink.style.right = \"0px\";\n        _this.shrink.style.bottom = \"0px\";\n        _this.shrink.style.overflow = \"hidden\";\n        _this.shrink.style.zIndex = zIndex.toString();\n        _this.shrink.style.visibility = \"hidden\";\n        var shrinkChild = document.createElement('div');\n        shrinkChild.style.position = \"absolute\";\n        shrinkChild.style.left = \"0px\";\n        shrinkChild.style.top = \"0px\";\n        shrinkChild.style.width = \"200%\";\n        shrinkChild.style.height = \"200%\";\n        _this.shrink.appendChild(shrinkChild);\n        _this.element.appendChild(_this.expand);\n        _this.element.appendChild(_this.shrink);\n        var size = element.getBoundingClientRect();\n        _this.currentWidth = size.width;\n        _this.currentHeight = size.height;\n        _this.setScroll();\n        _this.expand.addEventListener('scroll', function () {\n            _this.onScroll();\n        });\n        _this.shrink.addEventListener('scroll', function () {\n            _this.onScroll();\n        });\n    }\n    ;\n    onScroll() {\n        var _this = this;\n        var size = _this.element.getBoundingClientRect();\n        var newWidth = size.width;\n        var newHeight = size.height;\n        if (newWidth != _this.currentWidth || newHeight != _this.currentHeight) {\n            _this.currentWidth = newWidth;\n            _this.currentHeight = newHeight;\n            _this.callback();\n        }\n        this.setScroll();\n    }\n    ;\n    setScroll() {\n        this.expand.scrollLeft = 10000000;\n        this.expand.scrollTop = 10000000;\n        this.shrink.scrollLeft = 10000000;\n        this.shrink.scrollTop = 10000000;\n    }\n    ;\n    destroy() {\n        this.expand.remove();\n        this.shrink.remove();\n    };\n}\n\nMapSVG.nonce = function(){\n    return wpApiSettings.nonce;\n}\n\nif (!Object.values) {\n    Object.values = function(object){\n        return Object.keys(object).map(function(k){\n            return object[k]\n        });\n    }\n}\n\nwindow.MapSVG = MapSVG;\n\n\n\n\nexport {MapSVG};","let defRegionTemplate =\n    '<!-- Region fields are available in this template -->\\n' +\n    '<h5>{{#if title}} {{title}} {{else}} {{id}} {{/if}}</h5>\\n' +\n    '<p>Status: {{status_text}}</p>\\n\\n' +\n    '<!-- Show all linked Database Objects: -->\\n' +\n    '{{#each objects}}\\n\\n' +\n    '  <!-- DB Object are available inside of this block -->\\n\\n' +\n    '  <h5>{{title}}</h5>\\n' +\n    '  <!-- When you need to render a field as HTML, use 3 curly braces instead of 2:-->\\n' +\n    '  <p>{{{description}}}</p>\\n' +\n    '  <p><em>{{location.address.formatted}}</em></p>\\n\\n' +\n    '  <!-- Show all images: -->\\n' +\n    '  {{#each images}}\\n' +\n    '    <!-- Image fields \"thumbnail\", \"medium\", \"full\" -->\\n' +\n    '    <!-- are available in this block                -->\\n' +\n    '    <img src=\"{{thumbnail}}\" />\\n' +\n    '  {{/each}}\\n\\n' +\n    '{{/each}}';\n\nlet defDBTemplate =\n    '<!-- DB Object fields are available in this template. -->\\n' +\n    '<h5>{{title}}</h5>\\n' +\n    '<!-- When you need to render a fields as HTML, use 3 curly braces instead of 2:-->\\n' +\n    '<p>{{{description}}}</p>\\n' +\n    '<p><em>{{location.address.formatted}}</em></p>\\n\\n' +\n    '<!-- Show all images: -->\\n' +\n    '{{#each images}}\\n' +\n    '  <!-- Image fields \"thumbnail\", \"medium\", \"full\" -->\\n' +\n    '  <!-- are available in this block                -->\\n' +\n    '  <img src=\"{{thumbnail}}\" />\\n' +\n    '{{/each}}\\n\\n' +\n    '<!-- Show all linked Regions, comma-separated: -->\\n' +\n    '<p> Regions: \\n' +\n    '  {{#each regions}}\\n' +\n    '    <!-- Region fields are available in this block -->\\n' +\n    '    {{#if title}}\\n'+\n    '      {{title}}\\n'+\n    '    {{else}}\\n'+\n    '      {{id}}\\n'+\n    '    {{/if}}{{#unless @last}}, {{/unless}}\\n'+\n    '  {{/each}}\\n' +\n    '</p>';\n\nlet dirItemItemTemplate =\n    '<!-- If Directory Source = Database: DB Object fields are available in this template -->\\n' +\n    '<!-- If Directory Source = Regions: Region fields are available in this template -->\\n' +\n    '{{title}}';\n\nlet DefaultOptions = {\n    source              : '',\n    markerLastID        : 0,\n    regionLastID        : 0,\n    dataLastID          : 1,\n    disableAll          : false,\n    width               : null,\n    height              : null,\n    lockAspectRatio     : false,\n    padding             : {top: 0, left: 0, right: 0, bottom: 0},\n    maxWidth            : null,\n    maxHeight           : null,\n    minWidth            : null,\n    minHeight           : null,\n    loadingText         : 'Loading map...',\n    //colors              : {base: \"#E1F1F1\", background: \"#eeeeee\", hover: \"#548eac\", selected: \"#065A85\", stroke: \"#7eadc0\"},\n    colorsIgnore              : false,\n    colors              : {baseDefault: \"#000000\",\n        background: \"#eeeeee\",\n        selected: 40,\n        hover: 20,\n        directory: '#fafafa',\n        detailsView: '',\n        status: {},\n        clusters: \"\",\n        clustersBorders: \"\",\n        clustersText: \"\",\n        clustersHover: \"\",\n        clustersHoverBorders: \"\",\n        clustersHoverText: \"\",\n        markers: {\n            base:      {opacity:100, saturation: 100},\n            hovered:   {opacity:100, saturation: 100},\n            unhovered: {opacity:40, saturation: 100},\n            active:    {opacity:100, saturation: 100},\n            inactive:  {opacity:40, saturation: 100},\n        }\n    },\n    regions             : {},\n    clustering          : {on: false},\n    viewBox             : [],\n    cursor              : 'default',\n    manualRegions       : false,\n    onClick             : null,\n    mouseOver           : null,\n    mouseOut            : null,\n    menuOnClick         : null,\n    beforeLoad          : null,\n    afterLoad           : null,\n    zoom                : {on: true, limit: [0,10], delta: 2, buttons: {on: true, location: 'right'}, mousewheel: true, fingers: true},\n    scroll              : {on: true, limit: false, background: false, spacebar: false},\n    responsive          : true,\n    tooltips            : {on: false, position: 'bottom-right', template: '', maxWidth: '', minWidth: 100},\n    popovers            : {on: false, position: 'top', template: '', centerOn: true, width: 300, maxWidth: 50, maxHeight: 50},\n    multiSelect         : false,\n    regionStatuses      : {\n        '1': {\"label\": \"Enabled\", \"value\": '1', \"color\": \"\", \"disabled\": false},\n        '0': {\"label\": \"Disabled\", \"value\": '0', \"color\": \"\", \"disabled\": true}\n    },\n    events              : {\n        'afterLoad' : 'function(){\\n' +\n            '  // var mapsvg = this;\\n'+\n            '  // var regions = mapsvg.regions;\\n'+\n            '  // var dbObjects = mapsvg.database.getLoaded();\\n'+\n            '}',\n        'beforeLoad' : 'function(){\\n' +\n            '  // var mapsvg = this;\\n'+\n            '  // var settings = mapsvg.options;\\n' +\n            '  // console.log(settings);\\n' +\n            '}',\n        'databaseLoaded' : 'function (){\\n' +\n            '  // var mapsvg = this;\\n'+\n            '  // var dbObjects = mapsvg.database.getLoaded();\\n'+\n            '}',\n        'click.region' : 'function (e, mapsvg){\\n' +\n            '  // var region = this;\\n'+\n            '  // console.log(region);\\n'+\n            '}',\n        'mouseover.region' : 'function (e, mapsvg){\\n' +\n            '  // var region = this;\\n'+\n            '  // console.log(region);\\n'+\n            '}',\n        'mouseout.region' : 'function (e, mapsvg){\\n' +\n            '  // var region = this;\\n'+\n            '  // console.log(region);\\n'+\n            '}',\n        'click.marker' : 'function (e, mapsvg){\\n' +\n            '  // var marker = this;\\n'+\n            '  // console.log(marker);\\n'+\n            '}',\n        'mouseover.marker' : 'function (e, mapsvg){\\n' +\n            '  // var marker = this;\\n'+\n            '  // console.log(marker);\\n'+\n            '}',\n        'mouseout.marker' : 'function (e, mapsvg){\\n' +\n            '  // var marker = this;\\n'+\n            '  // console.log(marker);\\n'+\n            '}',\n        'click.directoryItem' : 'function (e, regionOrObject, mapsvg){\\n' +\n            '  // var itemjQueryObject = this;\\n'+\n            '}',\n        'mouseover.directoryItem' : 'function (e, regionOrObject, mapsvg){\\n' +\n            '  // var itemjQueryObject = this;\\n'+\n            '}',\n        'mouseout.directoryItem' : 'function (e, regionOrObject, mapsvg){\\n' +\n            '  // var itemjQueryObject = this;\\n'+\n            '}',\n        'shown.popover' : 'function (mapsvg){\\n' +\n            '  // var popoverjQueryObject = this;\\n'+\n            '}',\n        'closed.popover' : 'function (mapsvg){\\n' +\n            '  // var popoverjQueryObject = this;\\n'+\n            '}',\n        'closed.detailsView' : 'function (mapsvg){\\n' +\n            '  // var detailsjQueryObject = this;\\n'+\n            '}',\n        'shown.detailsView' : 'function (mapsvg){\\n' +\n            '  // var detailsjQueryObject = this;\\n'+\n            '}'\n    },\n    css: \"#mapsvg-map-%id% .mapsvg-tooltip {\\n\\n}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-popover {\\n\\n}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-details-container {\\n\\n}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-directory-item {\\n\\n}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-region-label {\\n\" +\n        \"  /* background-color: rgba(255,255,255,.6); */\\n\" +\n        \"  font-size: 11px;\\n\" +\n        \"  padding: 3px 5px;\\n\" +\n        \"  border-radius: 4px;\\n\" +\n        \"}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-marker-label {\\n\" +\n        \"  padding: 3px 5px;\\n\" +\n        \"  /*\\n\" +\n        \"  border-radius: 4px;\\n\" +\n        \"  background-color: white;\\n\" +\n        \"  margin-top: -4px;\\n\" +\n        \"  */\\n}\\n\" +\n        \"#mapsvg-map-%id% .mapsvg-filters-wrap {\\n\\n}\\n\" +\n        \"\\n\\n\\n\\n\\n\\n\"\n    ,\n    templates           : {\n        popoverRegion: defRegionTemplate,\n        popoverMarker: defDBTemplate,\n        tooltipRegion: '<!-- Region fields are available in this template -->\\n{{id}} - {{title}}',\n        tooltipMarker: '<!-- DB Object fields are available in this template -->\\n{{title}}',\n        directoryItem: dirItemItemTemplate,\n        directoryCategoryItem: '<!-- Available fields: \"label\", \"value\", \"counter\" -->\\n<span class=\"mapsvg-category-label\">{{label}}</span>\\n<span class=\"mapsvg-category-counter\">{{counter}}</span>\\n<span class=\"mapsvg-chevron\"></span>',\n        detailsView: defDBTemplate,\n        detailsViewRegion: defRegionTemplate,\n        labelMarker: '<!-- DB Object fields are available in this template -->\\n{{title}}',\n        labelRegion: '<!-- Region fields are available in this template -->\\n{{title}}',\n        labelLocation: 'You are here!',\n\n    },\n    choropleth: {\n        on: false,\n        source: 'regions',\n        sourceFieldSelect: {\n            on: false,\n            variants: []\n        },\n        bubbleMode: false,\n        bubbleSize: {\n            min: '20',\n            max: '40',\n        },\n        segments: [\n            {\n                description: '',\n                colors: {lowRGB: null, highRGB: null, low: \"#550000\", high: \"#ee0000\"},\n                labels: {low: \"low\", high: \"high\"},\n                min: 0,\n                max: 0,\n                valuePart: 100\n            }\n        ]\n    },\n    filters: {\n        on: false,\n        source: 'database',\n        location: 'leftSidebar',\n        modalLocation: 'map',\n        width: '100%',\n        hide: false,\n        showButtonText: 'Filters',\n        clearButtonText: 'Clear all',\n        clearButton: false,\n        padding: ''\n    },\n    menu                : {\n        on: false,\n        hideOnMobile: true,\n        location: 'leftSidebar',\n        locationMobile: 'leftSidebar',\n        search: false,\n        containerId: '',\n        searchPlaceholder: \"Search...\",\n        searchFallback: false,\n        source: 'database',\n        showFirst: 'map',\n        showMapOnClick: true,\n        minHeight: '400',\n        sortBy: 'id',\n        sortDirection: 'desc',\n        categories: {\n            on: false,\n            groupBy: '',\n            hideEmpty: true,\n            collapse: true,\n            collapseOther: true\n        },\n        clickActions: {\n            region: 'default',\n            marker: 'default',\n            directoryItem: {\n                triggerClick: true,\n                showPopover: false,\n                showDetails: true\n            }\n        },\n        detailsViewLocation: 'overDirectory',\n        noResultsText: 'No results found',\n        filterout: {field:'',cond:'=',val:''}\n    },\n    database: {\n        pagination: {\n            on: true,\n            perpage: 30,\n            next: \"Next\",\n            prev: \"Prev.\",\n            showIn: 'directory'\n        },\n        loadOnStart: true,\n        table: ''\n    },\n    actions: {\n        map: {\n            afterLoad: {\n                selectRegion: false\n            }\n        },\n        region: {\n            click: {\n                addIdToUrl: false,\n                showDetails: true,\n                showDetailsFor: 'region',\n                filterDirectory: false,\n                loadObjects: false,\n                showPopover: false,\n                showPopoverFor: 'region',\n                goToLink: false,\n                linkField: 'Region.link'\n            },\n            touch: {\n                showPopover: false\n            }\n        },\n        marker: {\n            click: {\n                showDetails: true,\n                showPopover: false,\n                goToLink: false,\n                linkField: 'Object.link'\n            },\n            touch: {\n                showPopover: false\n            }\n        },\n        directoryItem: {\n            click: {\n                showDetails: true,\n                showPopover: false,\n                goToLink: false,\n                selectRegion: true,\n                fireRegionOnClick: true,\n                linkField: 'Object.link'\n            },\n            hover: {\n                centerOnMarker: false\n            }\n        }\n    },\n    detailsView : {\n        location: 'map',\n        containerId: '',\n        width: '100%',\n        mobileFullscreen: true\n    },\n    mobileView: {\n        labelMap: 'Map',\n        labelList: 'List',\n        labelClose: 'Close'\n    },\n    googleMaps: {\n        on: false,\n        apiKey: '',\n        loaded: false,\n        center: 'auto', // or {lat: 12, lon: 13}\n        type: 'roadmap',\n        minZoom: 1,\n        style: 'default',\n        styleJSON: []\n    },\n    groups: [],\n    floors: [],\n    layersControl: {\n        on: false,\n        position: 'top-left',\n        label: 'Show on map',\n        expanded: true,\n        maxHeight: '100%'\n    },\n    floorsControl: {\n        on: false,\n        position: 'top-left',\n        label: 'Floors',\n        expanded: false,\n        maxHeight: '100%'\n    },\n    containers: {\n        leftSidebar: {on: false, width: '250px'},\n        rightSidebar: {on: false, width: '250px'},\n        header: {on: false, height: 'auto'},\n        footer: {on: false, height: 'auto'},\n    },\n    labelsMarkers: {on:false},\n    labelsRegions: {on:false},\n    svgFileVersion: 1,\n    fitMarkers: false,\n    fitMarkersOnStart: false,\n    controls: {\n        location: 'right',\n        zoom: true,\n        zoomReset: false,\n        userLocation: false\n    }\n};\n\nexport {DefaultOptions};\n","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n//(function(Math) {\n\n    var trimLeft = /^\\s+/,\n        trimRight = /\\s+$/,\n        tinyCounter = 0,\n        mathRound = Math.round,\n        mathMin = Math.min,\n        mathMax = Math.max,\n        mathRandom = Math.random;\n\n    function tinycolor (color, opts) {\n\n        color = (color) ? color : '';\n        opts = opts || { };\n\n        // If input is already a tinycolor, return itself\n        if (color instanceof tinycolor) {\n            return color;\n        }\n        // If we are called as a function, call using new instead\n        if (!(this instanceof tinycolor)) {\n            return new tinycolor(color, opts);\n        }\n\n        var rgb = inputToRGB(color);\n        this._originalInput = color,\n            this._r = rgb.r,\n            this._g = rgb.g,\n            this._b = rgb.b,\n            this._a = rgb.a,\n            this._roundA = mathRound(100*this._a) / 100,\n            this._format = opts.format || rgb.format;\n        this._gradientType = opts.gradientType;\n\n        // Don't let the range of [0,255] come back in [0,1].\n        // Potentially lose a little bit of precision here, but will fix issues where\n        // .5 gets interpreted as half of the total, instead of half of 1\n        // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n        if (this._r < 1) { this._r = mathRound(this._r); }\n        if (this._g < 1) { this._g = mathRound(this._g); }\n        if (this._b < 1) { this._b = mathRound(this._b); }\n\n        this._ok = rgb.ok;\n        this._tc_id = tinyCounter++;\n    }\n\n    tinycolor.prototype = {\n        isDark: function() {\n            return this.getBrightness() < 128;\n        },\n        isLight: function() {\n            return !this.isDark();\n        },\n        isValid: function() {\n            return this._ok;\n        },\n        getOriginalInput: function() {\n            return this._originalInput;\n        },\n        getFormat: function() {\n            return this._format;\n        },\n        getAlpha: function() {\n            return this._a;\n        },\n        getBrightness: function() {\n            //http://www.w3.org/TR/AERT#color-contrast\n            var rgb = this.toRgb();\n            return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n        },\n        getLuminance: function() {\n            //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n            var rgb = this.toRgb();\n            var RsRGB, GsRGB, BsRGB, R, G, B;\n            RsRGB = rgb.r/255;\n            GsRGB = rgb.g/255;\n            BsRGB = rgb.b/255;\n\n            if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n            if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n            if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n            return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n        },\n        setAlpha: function(value) {\n            this._a = boundAlpha(value);\n            this._roundA = mathRound(100*this._a) / 100;\n            return this;\n        },\n        toHsv: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n        },\n        toHsvString: function() {\n            var hsv = rgbToHsv(this._r, this._g, this._b);\n            var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n            return (this._a == 1) ?\n                \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n                \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n        },\n        toHsl: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n        },\n        toHslString: function() {\n            var hsl = rgbToHsl(this._r, this._g, this._b);\n            var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n            return (this._a == 1) ?\n                \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n                \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n        },\n        toHex: function(allow3Char) {\n            return rgbToHex(this._r, this._g, this._b, allow3Char);\n        },\n        toHexString: function(allow3Char) {\n            return '#' + this.toHex(allow3Char);\n        },\n        toHex8: function(allow4Char) {\n            return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n        },\n        toHex8String: function(allow4Char) {\n            return '#' + this.toHex8(allow4Char);\n        },\n        toRgb: function() {\n            return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n        },\n        toRgbString: function() {\n            return (this._a == 1) ?\n                \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n                \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n        },\n        toPercentageRgb: function() {\n            return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n        },\n        toPercentageRgbString: function() {\n            return (this._a == 1) ?\n                \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n                \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n        },\n        toName: function() {\n            if (this._a === 0) {\n                return \"transparent\";\n            }\n\n            if (this._a < 1) {\n                return false;\n            }\n\n            return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n        },\n        toFilter: function(secondColor) {\n            var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n            var secondHex8String = hex8String;\n            var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n            if (secondColor) {\n                var s = tinycolor(secondColor);\n                secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n            }\n\n            return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n        },\n        toString: function(format) {\n            var formatSet = !!format;\n            format = format || this._format;\n\n            var formattedString = false;\n            var hasAlpha = this._a < 1 && this._a >= 0;\n            var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n            if (needsAlphaFormat) {\n                // Special case for \"transparent\", all other non-alpha formats\n                // will return rgba when there is transparency.\n                if (format === \"name\" && this._a === 0) {\n                    return this.toName();\n                }\n                return this.toRgbString();\n            }\n            if (format === \"rgb\") {\n                formattedString = this.toRgbString();\n            }\n            if (format === \"prgb\") {\n                formattedString = this.toPercentageRgbString();\n            }\n            if (format === \"hex\" || format === \"hex6\") {\n                formattedString = this.toHexString();\n            }\n            if (format === \"hex3\") {\n                formattedString = this.toHexString(true);\n            }\n            if (format === \"hex4\") {\n                formattedString = this.toHex8String(true);\n            }\n            if (format === \"hex8\") {\n                formattedString = this.toHex8String();\n            }\n            if (format === \"name\") {\n                formattedString = this.toName();\n            }\n            if (format === \"hsl\") {\n                formattedString = this.toHslString();\n            }\n            if (format === \"hsv\") {\n                formattedString = this.toHsvString();\n            }\n\n            return formattedString || this.toHexString();\n        },\n        clone: function() {\n            return tinycolor(this.toString());\n        },\n\n        _applyModification: function(fn, args) {\n            var color = fn.apply(null, [this].concat([].slice.call(args)));\n            this._r = color._r;\n            this._g = color._g;\n            this._b = color._b;\n            this.setAlpha(color._a);\n            return this;\n        },\n        lighten: function() {\n            return this._applyModification(lighten, arguments);\n        },\n        brighten: function() {\n            return this._applyModification(brighten, arguments);\n        },\n        darken: function() {\n            return this._applyModification(darken, arguments);\n        },\n        desaturate: function() {\n            return this._applyModification(desaturate, arguments);\n        },\n        saturate: function() {\n            return this._applyModification(saturate, arguments);\n        },\n        greyscale: function() {\n            return this._applyModification(greyscale, arguments);\n        },\n        spin: function() {\n            return this._applyModification(spin, arguments);\n        },\n\n        _applyCombination: function(fn, args) {\n            return fn.apply(null, [this].concat([].slice.call(args)));\n        },\n        analogous: function() {\n            return this._applyCombination(analogous, arguments);\n        },\n        complement: function() {\n            return this._applyCombination(complement, arguments);\n        },\n        monochromatic: function() {\n            return this._applyCombination(monochromatic, arguments);\n        },\n        splitcomplement: function() {\n            return this._applyCombination(splitcomplement, arguments);\n        },\n        triad: function() {\n            return this._applyCombination(triad, arguments);\n        },\n        tetrad: function() {\n            return this._applyCombination(tetrad, arguments);\n        }\n    };\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\n    tinycolor.fromRatio = function(color, opts) {\n        if (typeof color == \"object\") {\n            var newColor = {};\n            for (var i in color) {\n                if (color.hasOwnProperty(i)) {\n                    if (i === \"a\") {\n                        newColor[i] = color[i];\n                    }\n                    else {\n                        newColor[i] = convertToPercentage(color[i]);\n                    }\n                }\n            }\n            color = newColor;\n        }\n\n        return tinycolor(color, opts);\n    };\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\n    function inputToRGB(color) {\n\n        var rgb = { r: 0, g: 0, b: 0 };\n        var a = 1;\n        var s = null;\n        var v = null;\n        var l = null;\n        var ok = false;\n        var format = false;\n\n        if (typeof color == \"string\") {\n            color = stringInputToObject(color);\n        }\n\n        if (typeof color == \"object\") {\n            if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n                rgb = rgbToRgb(color.r, color.g, color.b);\n                ok = true;\n                format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n            }\n            else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n                s = convertToPercentage(color.s);\n                v = convertToPercentage(color.v);\n                rgb = hsvToRgb(color.h, s, v);\n                ok = true;\n                format = \"hsv\";\n            }\n            else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n                s = convertToPercentage(color.s);\n                l = convertToPercentage(color.l);\n                rgb = hslToRgb(color.h, s, l);\n                ok = true;\n                format = \"hsl\";\n            }\n\n            if (color.hasOwnProperty(\"a\")) {\n                a = color.a;\n            }\n        }\n\n        a = boundAlpha(a);\n\n        return {\n            ok: ok,\n            format: color.format || format,\n            r: mathMin(255, mathMax(rgb.r, 0)),\n            g: mathMin(255, mathMax(rgb.g, 0)),\n            b: mathMin(255, mathMax(rgb.b, 0)),\n            a: a\n        };\n    }\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\n    function rgbToRgb(r, g, b){\n        return {\n            r: bound01(r, 255) * 255,\n            g: bound01(g, 255) * 255,\n            b: bound01(b, 255) * 255\n        };\n    }\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\n    function rgbToHsl(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, l = (max + min) / 2;\n\n        if(max == min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            var d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n\n            h /= 6;\n        }\n\n        return { h: h, s: s, l: l };\n    }\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n    function hslToRgb(h, s, l) {\n        var r, g, b;\n\n        h = bound01(h, 360);\n        s = bound01(s, 100);\n        l = bound01(l, 100);\n\n        function hue2rgb(p, q, t) {\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        if(s === 0) {\n            r = g = b = l; // achromatic\n        }\n        else {\n            var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n            var p = 2 * l - q;\n            r = hue2rgb(p, q, h + 1/3);\n            g = hue2rgb(p, q, h);\n            b = hue2rgb(p, q, h - 1/3);\n        }\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\n    function rgbToHsv(r, g, b) {\n\n        r = bound01(r, 255);\n        g = bound01(g, 255);\n        b = bound01(b, 255);\n\n        var max = mathMax(r, g, b), min = mathMin(r, g, b);\n        var h, s, v = max;\n\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n\n        if(max == min) {\n            h = 0; // achromatic\n        }\n        else {\n            switch(max) {\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n                case g: h = (b - r) / d + 2; break;\n                case b: h = (r - g) / d + 4; break;\n            }\n            h /= 6;\n        }\n        return { h: h, s: s, v: v };\n    }\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n    function hsvToRgb(h, s, v) {\n\n        h = bound01(h, 360) * 6;\n        s = bound01(s, 100);\n        v = bound01(v, 100);\n\n        var i = Math.floor(h),\n            f = h - i,\n            p = v * (1 - s),\n            q = v * (1 - f * s),\n            t = v * (1 - (1 - f) * s),\n            mod = i % 6,\n            r = [v, q, p, p, t, v][mod],\n            g = [t, v, v, q, p, p][mod],\n            b = [p, p, t, v, v, q][mod];\n\n        return { r: r * 255, g: g * 255, b: b * 255 };\n    }\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\n    function rgbToHex(r, g, b, allow3Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        // Return a 3 character hex if possible\n        if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n        }\n\n        return hex.join(\"\");\n    }\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\n    function rgbaToHex(r, g, b, a, allow4Char) {\n\n        var hex = [\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16)),\n            pad2(convertDecimalToHex(a))\n        ];\n\n        // Return a 4 character hex if possible\n        if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n            return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n        }\n\n        return hex.join(\"\");\n    }\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\n    function rgbaToArgbHex(r, g, b, a) {\n\n        var hex = [\n            pad2(convertDecimalToHex(a)),\n            pad2(mathRound(r).toString(16)),\n            pad2(mathRound(g).toString(16)),\n            pad2(mathRound(b).toString(16))\n        ];\n\n        return hex.join(\"\");\n    }\n\n// `equals`\n// Can be called with any tinycolor input\n    tinycolor.equals = function (color1, color2) {\n        if (!color1 || !color2) { return false; }\n        return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n    };\n\n    tinycolor.random = function() {\n        return tinycolor.fromRatio({\n            r: mathRandom(),\n            g: mathRandom(),\n            b: mathRandom()\n        });\n    };\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\n    function desaturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s -= amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function saturate(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.s += amount / 100;\n        hsl.s = clamp01(hsl.s);\n        return tinycolor(hsl);\n    }\n\n    function greyscale(color) {\n        return tinycolor(color).desaturate(100);\n    }\n\n    function lighten (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l += amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n    function brighten(color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var rgb = tinycolor(color).toRgb();\n        rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n        rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n        rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n        return tinycolor(rgb);\n    }\n\n    function darken (color, amount) {\n        amount = (amount === 0) ? 0 : (amount || 10);\n        var hsl = tinycolor(color).toHsl();\n        hsl.l -= amount / 100;\n        hsl.l = clamp01(hsl.l);\n        return tinycolor(hsl);\n    }\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\n    function spin(color, amount) {\n        var hsl = tinycolor(color).toHsl();\n        var hue = (hsl.h + amount) % 360;\n        hsl.h = hue < 0 ? 360 + hue : hue;\n        return tinycolor(hsl);\n    }\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\n    function complement(color) {\n        var hsl = tinycolor(color).toHsl();\n        hsl.h = (hsl.h + 180) % 360;\n        return tinycolor(hsl);\n    }\n\n    function triad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function tetrad(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n            tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n        ];\n    }\n\n    function splitcomplement(color) {\n        var hsl = tinycolor(color).toHsl();\n        var h = hsl.h;\n        return [\n            tinycolor(color),\n            tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n            tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n        ];\n    }\n\n    function analogous(color, results, slices) {\n        results = results || 6;\n        slices = slices || 30;\n\n        var hsl = tinycolor(color).toHsl();\n        var part = 360 / slices;\n        var ret = [tinycolor(color)];\n\n        for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n            hsl.h = (hsl.h + part) % 360;\n            ret.push(tinycolor(hsl));\n        }\n        return ret;\n    }\n\n    function monochromatic(color, results) {\n        results = results || 6;\n        var hsv = tinycolor(color).toHsv();\n        var h = hsv.h, s = hsv.s, v = hsv.v;\n        var ret = [];\n        var modification = 1 / results;\n\n        while (results--) {\n            ret.push(tinycolor({ h: h, s: s, v: v}));\n            v = (v + modification) % 1;\n        }\n\n        return ret;\n    }\n\n// Utility Functions\n// ---------------------\n\n    tinycolor.mix = function(color1, color2, amount) {\n        amount = (amount === 0) ? 0 : (amount || 50);\n\n        var rgb1 = tinycolor(color1).toRgb();\n        var rgb2 = tinycolor(color2).toRgb();\n\n        var p = amount / 100;\n\n        var rgba = {\n            r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n            g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n            b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n            a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n        };\n\n        return tinycolor(rgba);\n    };\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\n    tinycolor.readability = function(color1, color2) {\n        var c1 = tinycolor(color1);\n        var c2 = tinycolor(color2);\n        return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n    };\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\n    tinycolor.isReadable = function(color1, color2, wcag2) {\n        var readability = tinycolor.readability(color1, color2);\n        var wcag2Parms, out;\n\n        out = false;\n\n        wcag2Parms = validateWCAG2Parms(wcag2);\n        switch (wcag2Parms.level + wcag2Parms.size) {\n            case \"AAsmall\":\n            case \"AAAlarge\":\n                out = readability >= 4.5;\n                break;\n            case \"AAlarge\":\n                out = readability >= 3;\n                break;\n            case \"AAAsmall\":\n                out = readability >= 7;\n                break;\n        }\n        return out;\n\n    };\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\n    tinycolor.mostReadable = function(baseColor, colorList, args) {\n        var bestColor = null;\n        var bestScore = 0;\n        var readability;\n        var includeFallbackColors, level, size ;\n        args = args || {};\n        includeFallbackColors = args.includeFallbackColors ;\n        level = args.level;\n        size = args.size;\n\n        for (var i= 0; i < colorList.length ; i++) {\n            readability = tinycolor.readability(baseColor, colorList[i]);\n            if (readability > bestScore) {\n                bestScore = readability;\n                bestColor = tinycolor(colorList[i]);\n            }\n        }\n\n        if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n            return bestColor;\n        }\n        else {\n            args.includeFallbackColors=false;\n            return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n        }\n    };\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\n    var names = tinycolor.names = {\n        aliceblue: \"f0f8ff\",\n        antiquewhite: \"faebd7\",\n        aqua: \"0ff\",\n        aquamarine: \"7fffd4\",\n        azure: \"f0ffff\",\n        beige: \"f5f5dc\",\n        bisque: \"ffe4c4\",\n        black: \"000\",\n        blanchedalmond: \"ffebcd\",\n        blue: \"00f\",\n        blueviolet: \"8a2be2\",\n        brown: \"a52a2a\",\n        burlywood: \"deb887\",\n        burntsienna: \"ea7e5d\",\n        cadetblue: \"5f9ea0\",\n        chartreuse: \"7fff00\",\n        chocolate: \"d2691e\",\n        coral: \"ff7f50\",\n        cornflowerblue: \"6495ed\",\n        cornsilk: \"fff8dc\",\n        crimson: \"dc143c\",\n        cyan: \"0ff\",\n        darkblue: \"00008b\",\n        darkcyan: \"008b8b\",\n        darkgoldenrod: \"b8860b\",\n        darkgray: \"a9a9a9\",\n        darkgreen: \"006400\",\n        darkgrey: \"a9a9a9\",\n        darkkhaki: \"bdb76b\",\n        darkmagenta: \"8b008b\",\n        darkolivegreen: \"556b2f\",\n        darkorange: \"ff8c00\",\n        darkorchid: \"9932cc\",\n        darkred: \"8b0000\",\n        darksalmon: \"e9967a\",\n        darkseagreen: \"8fbc8f\",\n        darkslateblue: \"483d8b\",\n        darkslategray: \"2f4f4f\",\n        darkslategrey: \"2f4f4f\",\n        darkturquoise: \"00ced1\",\n        darkviolet: \"9400d3\",\n        deeppink: \"ff1493\",\n        deepskyblue: \"00bfff\",\n        dimgray: \"696969\",\n        dimgrey: \"696969\",\n        dodgerblue: \"1e90ff\",\n        firebrick: \"b22222\",\n        floralwhite: \"fffaf0\",\n        forestgreen: \"228b22\",\n        fuchsia: \"f0f\",\n        gainsboro: \"dcdcdc\",\n        ghostwhite: \"f8f8ff\",\n        gold: \"ffd700\",\n        goldenrod: \"daa520\",\n        gray: \"808080\",\n        green: \"008000\",\n        greenyellow: \"adff2f\",\n        grey: \"808080\",\n        honeydew: \"f0fff0\",\n        hotpink: \"ff69b4\",\n        indianred: \"cd5c5c\",\n        indigo: \"4b0082\",\n        ivory: \"fffff0\",\n        khaki: \"f0e68c\",\n        lavender: \"e6e6fa\",\n        lavenderblush: \"fff0f5\",\n        lawngreen: \"7cfc00\",\n        lemonchiffon: \"fffacd\",\n        lightblue: \"add8e6\",\n        lightcoral: \"f08080\",\n        lightcyan: \"e0ffff\",\n        lightgoldenrodyellow: \"fafad2\",\n        lightgray: \"d3d3d3\",\n        lightgreen: \"90ee90\",\n        lightgrey: \"d3d3d3\",\n        lightpink: \"ffb6c1\",\n        lightsalmon: \"ffa07a\",\n        lightseagreen: \"20b2aa\",\n        lightskyblue: \"87cefa\",\n        lightslategray: \"789\",\n        lightslategrey: \"789\",\n        lightsteelblue: \"b0c4de\",\n        lightyellow: \"ffffe0\",\n        lime: \"0f0\",\n        limegreen: \"32cd32\",\n        linen: \"faf0e6\",\n        magenta: \"f0f\",\n        maroon: \"800000\",\n        mediumaquamarine: \"66cdaa\",\n        mediumblue: \"0000cd\",\n        mediumorchid: \"ba55d3\",\n        mediumpurple: \"9370db\",\n        mediumseagreen: \"3cb371\",\n        mediumslateblue: \"7b68ee\",\n        mediumspringgreen: \"00fa9a\",\n        mediumturquoise: \"48d1cc\",\n        mediumvioletred: \"c71585\",\n        midnightblue: \"191970\",\n        mintcream: \"f5fffa\",\n        mistyrose: \"ffe4e1\",\n        moccasin: \"ffe4b5\",\n        navajowhite: \"ffdead\",\n        navy: \"000080\",\n        oldlace: \"fdf5e6\",\n        olive: \"808000\",\n        olivedrab: \"6b8e23\",\n        orange: \"ffa500\",\n        orangered: \"ff4500\",\n        orchid: \"da70d6\",\n        palegoldenrod: \"eee8aa\",\n        palegreen: \"98fb98\",\n        paleturquoise: \"afeeee\",\n        palevioletred: \"db7093\",\n        papayawhip: \"ffefd5\",\n        peachpuff: \"ffdab9\",\n        peru: \"cd853f\",\n        pink: \"ffc0cb\",\n        plum: \"dda0dd\",\n        powderblue: \"b0e0e6\",\n        purple: \"800080\",\n        rebeccapurple: \"663399\",\n        red: \"f00\",\n        rosybrown: \"bc8f8f\",\n        royalblue: \"4169e1\",\n        saddlebrown: \"8b4513\",\n        salmon: \"fa8072\",\n        sandybrown: \"f4a460\",\n        seagreen: \"2e8b57\",\n        seashell: \"fff5ee\",\n        sienna: \"a0522d\",\n        silver: \"c0c0c0\",\n        skyblue: \"87ceeb\",\n        slateblue: \"6a5acd\",\n        slategray: \"708090\",\n        slategrey: \"708090\",\n        snow: \"fffafa\",\n        springgreen: \"00ff7f\",\n        steelblue: \"4682b4\",\n        tan: \"d2b48c\",\n        teal: \"008080\",\n        thistle: \"d8bfd8\",\n        tomato: \"ff6347\",\n        turquoise: \"40e0d0\",\n        violet: \"ee82ee\",\n        wheat: \"f5deb3\",\n        white: \"fff\",\n        whitesmoke: \"f5f5f5\",\n        yellow: \"ff0\",\n        yellowgreen: \"9acd32\"\n    };\n\n// Make it easy to access colors via `hexNames[hex]`\n    var hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\n    function flip(o) {\n        var flipped = { };\n        for (var i in o) {\n            if (o.hasOwnProperty(i)) {\n                flipped[o[i]] = i;\n            }\n        }\n        return flipped;\n    }\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\n    function boundAlpha(a) {\n        a = parseFloat(a);\n\n        if (isNaN(a) || a < 0 || a > 1) {\n            a = 1;\n        }\n\n        return a;\n    }\n\n// Take input from [0, n] and return it as [0, 1]\n    function bound01(n, max) {\n        if (isOnePointZero(n)) { n = \"100%\"; }\n\n        var processPercent = isPercentage(n);\n        n = mathMin(max, mathMax(0, parseFloat(n)));\n\n        // Automatically convert percentage into number\n        if (processPercent) {\n            n = parseInt(n * max, 10) / 100;\n        }\n\n        // Handle floating point rounding errors\n        if ((Math.abs(n - max) < 0.000001)) {\n            return 1;\n        }\n\n        // Convert into [0, 1] range if it isn't already\n        return (n % max) / parseFloat(max);\n    }\n\n// Force a number between 0 and 1\n    function clamp01(val) {\n        return mathMin(1, mathMax(0, val));\n    }\n\n// Parse a base-16 hex value into a base-10 integer\n    function parseIntFromHex(val) {\n        return parseInt(val, 16);\n    }\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\n    function isOnePointZero(n) {\n        return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n    }\n\n// Check to see if string passed in is a percentage\n    function isPercentage(n) {\n        return typeof n === \"string\" && n.indexOf('%') != -1;\n    }\n\n// Force a hex value to have 2 characters\n    function pad2(c) {\n        return c.length == 1 ? '0' + c : '' + c;\n    }\n\n// Replace a decimal with it's percentage value\n    function convertToPercentage(n) {\n        if (n <= 1) {\n            n = (n * 100) + \"%\";\n        }\n\n        return n;\n    }\n\n// Converts a decimal to a hex value\n    function convertDecimalToHex(d) {\n        return Math.round(parseFloat(d) * 255).toString(16);\n    }\n// Converts a hex value to a decimal\n    function convertHexToDecimal(h) {\n        return (parseIntFromHex(h) / 255);\n    }\n\n    var matchers = (function() {\n\n        // <http://www.w3.org/TR/css3-values/#integers>\n        var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n        // <http://www.w3.org/TR/css3-values/#number-value>\n        var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n        // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n        var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n        // Actual matching.\n        // Parentheses and commas are optional, but not required.\n        // Whitespace can take the place of commas or opening paren\n        var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n        var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n        return {\n            CSS_UNIT: new RegExp(CSS_UNIT),\n            rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n            rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n            hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n            hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n            hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n            hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n            hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n            hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n            hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n        };\n    })();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\n    function isValidCSSUnit(color) {\n        return !!matchers.CSS_UNIT.exec(color);\n    }\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\n    function stringInputToObject(color) {\n\n        color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n        var named = false;\n        if (names[color]) {\n            color = names[color];\n            named = true;\n        }\n        else if (color == 'transparent') {\n            return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n        }\n\n        // Try to match string input using regular expressions.\n        // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n        // Just return an object and let the conversion functions handle that.\n        // This way the result will be the same whether the tinycolor is initialized with string or object.\n        var match;\n        if ((match = matchers.rgb.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3] };\n        }\n        if ((match = matchers.rgba.exec(color))) {\n            return { r: match[1], g: match[2], b: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsl.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3] };\n        }\n        if ((match = matchers.hsla.exec(color))) {\n            return { h: match[1], s: match[2], l: match[3], a: match[4] };\n        }\n        if ((match = matchers.hsv.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3] };\n        }\n        if ((match = matchers.hsva.exec(color))) {\n            return { h: match[1], s: match[2], v: match[3], a: match[4] };\n        }\n        if ((match = matchers.hex8.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                a: convertHexToDecimal(match[4]),\n                format: named ? \"name\" : \"hex8\"\n            };\n        }\n        if ((match = matchers.hex6.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1]),\n                g: parseIntFromHex(match[2]),\n                b: parseIntFromHex(match[3]),\n                format: named ? \"name\" : \"hex\"\n            };\n        }\n        if ((match = matchers.hex4.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + '' + match[1]),\n                g: parseIntFromHex(match[2] + '' + match[2]),\n                b: parseIntFromHex(match[3] + '' + match[3]),\n                a: convertHexToDecimal(match[4] + '' + match[4]),\n                format: named ? \"name\" : \"hex8\"\n            };\n        }\n        if ((match = matchers.hex3.exec(color))) {\n            return {\n                r: parseIntFromHex(match[1] + '' + match[1]),\n                g: parseIntFromHex(match[2] + '' + match[2]),\n                b: parseIntFromHex(match[3] + '' + match[3]),\n                format: named ? \"name\" : \"hex\"\n            };\n        }\n\n        return false;\n    }\n\n    function validateWCAG2Parms(parms) {\n        // return valid WCAG2 parms for isReadable.\n        // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n        var level, size;\n        parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n        level = (parms.level || \"AA\").toUpperCase();\n        size = (parms.size || \"small\").toLowerCase();\n        if (level !== \"AA\" && level !== \"AAA\") {\n            level = \"AA\";\n        }\n        if (size !== \"small\" && size !== \"large\") {\n            size = \"small\";\n        }\n        return {\"level\":level, \"size\":size};\n    }\n/*\n// Node: Export function\n    if (typeof module !== \"undefined\" && module.exports) {\n        module.exports = tinycolor;\n    }\n// AMD/requirejs: Define the module\n    else if (typeof define === 'function' && define.amd) {\n        define(function () {return tinycolor;});\n    }\n// Browser: Expose to window\n    else {\n        window.tinycolor = tinycolor;\n    }\n\n */\n\n//})(Math);\n\nexport {tinycolor};","const $ = jQuery;\nimport {MapSVG} from \"../../Core/globals.js\"\n\nexport class Server {\n\n    apiUrl: string;\n    completeChunks: number;\n\n    constructor() {\n        this.apiUrl = '/wp-json/mapsvg/v1/'\n    }\n    getUrl(path){\n        return this.apiUrl + path;\n    }\n    get(path: string, data?: any): JQueryPromise<any> {\n        return $.ajax({\n            url: this.apiUrl+path,\n            type: 'GET',\n            data: data,\n            beforeSend: function ( xhr ) {\n                xhr.setRequestHeader( 'X-WP-Nonce', MapSVG.nonce() );\n            }\n        });\n    }\n    post(path: string, data?: any): JQueryPromise<any> {\n        return $.ajax({\n            url: this.apiUrl+path,\n            type: 'POST',\n            data: data,\n            beforeSend: function ( xhr ) {\n                xhr.setRequestHeader( 'X-WP-Nonce', MapSVG.nonce() );\n            }\n        });\n    }\n    put(path: string, data?: any): JQueryPromise<any> {\n        return $.ajax({\n            url: this.apiUrl+path,\n            type: 'PUT',\n            data: data,\n            beforeSend: function ( xhr ) {\n                xhr.setRequestHeader( 'X-WP-Nonce', MapSVG.nonce() );\n            },\n        });\n    }\n    delete(path: string, data?: any): JQueryPromise<any> {\n        return $.ajax({\n            url: this.apiUrl+path,\n            type: 'DELETE',\n            data: data,\n            beforeSend: function ( xhr ) {\n                xhr.setRequestHeader( 'X-WP-Nonce', MapSVG.nonce() );\n            }\n        });\n    }\n    ajax(path: string, data: {type: string, data: any, processData?: boolean, contentType?: boolean}): JQueryPromise<any> {\n        // @ts-ignore\n        data.url = this.getUrl(path);\n        // @ts-ignore\n        data.beforeSend = function ( xhr ) {\n            xhr.setRequestHeader( 'X-WP-Nonce', MapSVG.nonce() );\n        };\n        // @ts-ignore\n        return $.ajax(data);\n    }\n}","export class Events {\n\n    context: any;\n    events: {[key: string]: Function[]};\n\n    constructor(context?: any) {\n        this.events = {};\n        this.context = context;\n    }\n\n    on(event: string, callback: Function) {\n        if (!this.events[event])\n            this.events[event] = [];\n\n        let duplicatedEvent = false;\n        this.events[event].forEach(function (existingCallback) {\n            if (existingCallback.toString() === callback.toString()){\n                duplicatedEvent = true;\n            }\n        });\n\n        if (duplicatedEvent === false){\n            this.events[event].push(callback);\n        }\n\n        return this;\n    }\n\n    off(event: string, callback?: Function) {\n        var _this = this;\n        if (this.events[event] && this.events[event].length) {\n            this.events[event].forEach(function (_callback, index) {\n                if (typeof callback === 'undefined') {\n                    _this.events[event].splice(index, 1);\n                } else if (_callback === callback) {\n                    _this.events[event].splice(index, 1);\n                }\n            });\n        }\n        return this;\n    }\n\n    trigger(event: string, thisArg?: any, args?: Array<any>) {\n        if (this.events[event] && this.events[event].length)\n            this.events[event].forEach((callback) => {\n                try{\n                    callback && callback.apply(thisArg||this.context, args||[this.context]);\n                }catch (err){\n                    console.error(err);\n                }\n            });\n        return this;\n    };\n}","class ArrayIndexed<T> extends Array {\n\n    dict: {[key: string]: any};\n    key: string;\n    options: {autoId: boolean, unique: boolean};\n    nextId: number;\n\n    constructor(indexKey: string, items?: any[], options?: {autoId: boolean, unique: boolean}) {\n        if(items){\n            super(...items);\n        } else {\n            super();\n        }\n        this.key = indexKey;\n        this.dict = {};\n        this.nextId = 1;\n        if(options){\n            this.options = options;\n        } else {\n            this.options = {autoId: false, unique: false};\n        }\n        if(this.length > 0){\n            var i = 0;\n            var _this = this;\n\n            if(this.options.autoId){\n                var maxId = 0;\n                var missingIds = false;\n                this.forEach(function(item){\n                   if(item[_this.key] != null){\n                       if(item[_this.key] > maxId){\n                           maxId = item[_this.key];\n                       }\n                   } else {\n                       missingIds = true;\n                   }\n                });\n                this.nextId = maxId++;\n                if(missingIds){\n                    this.forEach(function(item){\n                        if(item[_this.key] == null){\n                            item[_this.key] = _this.nextId;\n                            _this.nextId++;\n                        }\n                    });\n                }\n            }\n\n            this.forEach(function (item) {\n                _this.dict[item[_this.key]] = i;\n                i++;\n            });\n        }\n    }\n\n    push(item: any): number {\n        var length = super.push(item);\n        if(this.options.autoId === true){\n            item[this.key] = this.nextId;\n            this.nextId++;\n        }\n        this.dict[item[this.key]] = length - 1;\n        return length;\n    }\n\n    pop(): T | undefined {\n        var item = this[this.length-1];\n        var id = item[this.key];\n        var length = super.pop();\n        delete this.dict[id];\n        this.reindex();\n        return super.pop();\n    }\n\n    update(data: {[key: string]: any}): T|boolean {\n        if(data[this.key] != null) {\n            var obj = this.get(data[this.key]);\n            for(var i in data){\n                obj[i] = data[i];\n            }\n            return obj;\n        }\n        return false;\n    }\n\n    get(id: number|string): any {\n        return this.findById(id);\n    }\n    findById(id: number|string): any {\n        return this[this.dict[id]];\n    }\n\n    deleteById(id: number|string): void {\n        var index = this.dict[id];\n        if (typeof  index !== 'undefined'){\n            delete this.dict[id];\n            this.splice(index, 1);\n        }\n    }\n\n    delete(id: number|string): void {\n        this.deleteById(id);\n    }\n\n    clear(): void {\n        this.length = 0;\n        this.reindex();\n    }\n\n    reindex(): void {\n        var _this = this;\n        this.dict = {};\n        this.forEach(function(item, index){\n            _this.dict[item[_this.key]] = index;\n        });\n    }\n\n    sort(compareFn?: (a: T, b: T) => number): this {\n        super.sort(compareFn);\n        this.reindex();\n        return this;\n    }\n\n    splice(start: number, deleteCount?: number): T[] {\n        let res = super.splice(start, deleteCount);\n        this.reindex();\n        return res;\n    }\n\n}\n\nexport {ArrayIndexed};","import {MapSVG} from \"../../Core/globals.js\";\nimport {ArrayIndexed} from \"../../Core/ArrayIndexed\";\n\nexport class SchemaField {\n    type: string;\n    label?: string;\n    name?: string;\n    help?: string;\n    options?: ArrayIndexed<{[key: string]: any}>;\n    visible?: boolean;\n    readonly?: boolean;\n    protected?: boolean;\n    searchable?: boolean;\n    value?: any;\n    placeholder?: string;\n    parameterName?: string;\n    parameterNameShort?: string;\n    db_type?: string;\n    db_default?: number|boolean|string;\n    [key: string]: any;\n\n    constructor(field: {[key: string]: any}) {\n\n        let booleans =  ['visible','searchable','readonly','protected'];\n\n        for(var key in field){\n            this[key] = field[key];\n        }\n\n        booleans.forEach((paramName)=>{\n            if(typeof this[paramName] !== 'undefined'){\n                this[paramName] = MapSVG.parseBoolean(this[paramName]);\n            } else {\n                this[paramName] = false;\n            }\n        });\n\n        if(typeof this.options !== 'undefined'){\n            if(!(this.options instanceof ArrayIndexed)){\n                this.options = new ArrayIndexed('value', this.options );\n            }\n        }\n\n        // TODO move this outside of the Schema class:\n        // if(field.type == 'region'){\n        //     field.options = new Map();\n        //     _this.mapsvg.regions.forEach(function(region){\n        //         field.options.set(region.id, {id: region.id, title: region.title});\n        //     });\n        // }\n    }\n\n}","import {MapSVG} from \"../../Core/globals.js\";\nimport {Events} from \"../../Core/Events\";\nimport {SchemaField} from \"./SchemaField\";\nimport {ArrayIndexed} from \"../../Core/ArrayIndexed\";\n\nexport class Schema {\n\n    id: number;\n    type: string;\n    name: string;\n    title?: string;\n    fields?: ArrayIndexed<SchemaField>;\n    lastChangeTime: number;\n    events: Events;\n\n    constructor(options: {\n        id?: number,\n        type?: string,\n        name?: string,\n        title?: string,\n        fields?: Array<{[key: string]: any}>\n    }){\n        this.fields         = new ArrayIndexed('name');\n\n        this.build(options);\n\n        this.lastChangeTime = Date.now();\n        this.events         = new Events(this);\n    };\n\n    build(options){\n        let allowedParams   = ['id','title','type','name','fields'];\n        allowedParams.forEach((paramName)=>{\n            var setter = 'set'+MapSVG.ucfirst(paramName);\n            if (typeof options[paramName] !== 'undefined' && typeof this[setter] == 'function'){\n                this[setter](options[paramName]);\n            }\n        });\n    }\n\n    update(options){\n        this.build(options);\n    }\n\n    setId(id: number){\n        this.id = id;\n    }\n    setTitle(title: string){\n        this.title = title;\n    }\n    setName(name: string){\n        this.name = name;\n    }\n\n    loaded(){\n        return this.fields.length !== 0;\n    }\n\n    setFields(fields: any[]){\n\n        if(fields){\n\n            this.fields.clear();\n\n            fields.forEach((fieldParams) => {\n                this.fields.push(new SchemaField(fieldParams));\n\n                // TODO move this outside of the Schema class:\n                // if(field.type == 'region'){\n                //     field.options = new Map();\n                //     _this.mapsvg.regions.forEach(function(region){\n                //         field.options.set(region.id, {id: region.id, title: region.title});\n                //     });\n                // }\n            });\n        }\n    };\n\n    getFields(): ArrayIndexed<SchemaField> {\n        return this.fields;\n    }\n    getFieldsAsArray(): Array<SchemaField> {\n        // let res: Array<SchemaFieldInterface>;\n        // res = [];\n        // this.fields.forEach((field) => {\n        //     res.push(field);\n        // })\n        // return res;\n        return this.fields;\n    }\n    getFieldNames(): Array<string> {\n        return this.fields.map((f)=>f.name);\n    }\n    getField(field){\n        // if(field === 'id'){\n        //     return {name: 'id', visible: true, type: 'id'};\n        // }\n        return this.fields.findById(field);\n    }\n    getFieldByType(type){\n        var f = null;\n        this.fields.forEach(function(field){\n            if(field.type === type)\n                f = field;\n        });\n        return f;\n    }\n    getColumns(filters){\n\n        filters = filters || {};\n\n        var columns = this.fields;\n\n        var needfilters = Object.keys(filters).length !== 0;\n        var results = [];\n\n        if(needfilters){\n            var filterpass;\n            columns.forEach(function(obj){\n                filterpass = true;\n                for(var param in filters) {\n                    filterpass = (obj[param] == filters[param]);\n                }\n                filterpass && results.push(obj);\n            });\n        } else {\n            results = columns;\n        }\n\n        return results;\n    };\n\n    getData(){\n        let data = {\n            id: this.id,\n            title: this.title,\n            name: this.name,\n            fields: this.fields,\n            type: this.type\n        };\n        return data;\n\n    }\n}\n\n\n","interface QueryInterface {\n    sort?: Array<{field: string, order: string}>;\n    sortBy?: string;\n    sortDir?: string;\n    page?: number;\n    lastpage?: boolean;\n    perpage?: number;\n    search?: string;\n    searchField?: string;\n    searchFallback?: boolean;\n    filters?: {regions?: {table_name: string, region_ids: string[]}, [key: string]: any}\n    filterout?:  {[key: string]: string|number};\n}\n\nexport class Query implements QueryInterface {\n    sort?: Array<{field: string, order: string}>;\n    sortBy?: string\n    sortDir?: string;\n    page?: number;\n    lastpage?: boolean;\n    perpage?: number;\n    search?: string;\n    searchField?: string;\n    searchFallback?: boolean;\n    filters?: {regions?: {table_name: string, region_ids: string[]}, [key: string]: any}\n    filterout?:  {[key: string]: string|number};\n\n    constructor(options?: QueryInterface){\n        this.filters = {};\n        this.filterout = {};\n        this.page = 1;\n        if(options){\n            for(var i in options){\n                if(typeof options[i] !== \"undefined\"){\n                    this[i] = options[i];\n                }\n            }\n        }\n    }\n\n    setFields(fields){\n        var _this = this;\n        for(var key in fields){\n            if(key == 'filters'){\n                _this.setFilters(fields[key]);\n            }else{\n                _this[key] = fields[key];\n            }\n        }\n    };\n\n    update(query: QueryInterface){\n        for(var i in query){\n            if(typeof query[i] !== 'undefined'){\n                if(i === 'filters'){\n                    this.setFilters(query[i]);\n                }else{\n                    this[i] = query[i];\n                }\n\n            }\n        }\n    }\n\n    get(){\n        return {\n            search: this.search,\n            searchField: this.searchField,\n            searchFallback: this.searchFallback,\n            filters: this.filters,\n            filterout: this.filterout,\n            page: this.page,\n            sort: this.sort,\n            perpage: this.perpage,\n            lastpage: this.lastpage\n        };\n    };\n\n    clearFilters(){\n        this.filters = {};\n        this.setSearch('');\n    }\n    setFilters(fields: {[key: string]: string|number}){\n        var _this = this;\n        for(var key in fields){\n            if(fields[key] === null || fields[key] === \"\" || fields[key] === undefined){\n                if(_this.filters[key]){\n                    delete _this.filters[key];\n                }\n            } else {\n                _this.filters[key] = fields[key];\n            }\n        }\n    };\n    setSearch(search: string){\n        this.search = search;\n    };\n    setFilterOut(fields: {[key: string]: string|number}){\n        var _this = this;\n        for(var key in fields){\n            _this.filterout[key] = fields[key];\n        }\n    };\n    resetFilters(fields?: {[key: string]: string|number}){\n        this.filters = {};\n    };\n    setFilterField(field: string, value: string|number){\n        this.filters[field] = value;\n    };\n    hasFilters(): boolean {\n        return Object.keys(this.filters).length > 0;\n    }\n    removeFilter(fieldName: string): void {\n        this.filters[fieldName] = null;\n        delete this.filters[fieldName];\n    }\n}\n","/**\n * LocationAddress class stores address field from Google Geocoding service\n * @param {object} fields\n * @constructor\n */\nexport class LocationAddress {\n\n    route?: string;\n    address_formatted?: string;\n    administrative_area_level_1?: string;\n    administrative_area_level_1_short?: string;\n    administrative_area_level_2?: string;\n    administrative_area_level_2_short?: string;\n    country?: string;\n    country_short?: string;\n    postal_code?: string;\n\n    constructor(fields: object){\n        for(var i in fields){\n            this[i] = fields[i];\n        }\n    }\n\n    get state(){\n        return this.country_short === 'US' ? this.administrative_area_level_1 : null;\n    }\n\n    get state_short(){\n        return this.country_short === 'US' ? this.administrative_area_level_1_short : null;\n    }\n\n    get county(){\n        return this.country_short === 'US' ? this.administrative_area_level_2 : null;\n    }\n\n    get zip(){\n        return this.postal_code;\n    }\n}\n\n","import {LocationAddress} from \"./LocationAddress\";\nimport {MapSVG} from \"../Core/globals.js\";\nimport {Marker} from \"../Marker/Marker\";\n\nexport class ScreenPoint {\n    x: number;\n    y: number;\n    constructor(x: number, y:number){\n        this.x = x;\n        this.y = y;\n    }\n}\n\nexport class SVGPoint {\n    x: number;\n    y: number;\n    constructor(x: number|string|{x: number|string, y: number|string}, y?: number|string){\n        var _x, _y;\n        if(typeof x === 'object'){\n            if(x.x && x.y){\n                _x = parseFloat(x.x+'');\n                _y = parseFloat(x.y+'');\n            } else {\n                console.error(\"MapSVG: incorrect format of {x, y} object for SVGPoint.\");\n                _x = 0;\n                _y = 0;\n            }\n        } else {\n            _x = parseFloat(x+'');\n            _y = parseFloat(y+'');\n        }\n        this.x = _x;\n        this.y = _y;\n    }\n}\n\nexport class GeoPoint {\n    lat: number;\n    lng: number;\n    constructor(lat: number|string|{lat: number|string, lng: number|string}, lng?: number|string) {\n        var _lat, _lng;\n        if(typeof lat === 'object'){\n            if(lat.lat && lat.lng){\n                _lat = parseFloat(lat.lat+'');\n                _lng = parseFloat(lat.lng+'');\n           } else {\n                console.error(\"MapSVG: incorrect format of {lat, lng} object for GeoPoint.\");\n                _lat = 0;\n                _lng = 0;\n            }\n        } else {\n            _lat = parseFloat(lat+'');\n            _lng = parseFloat(lng+'');\n        }\n        this.lat = _lat;\n        this.lng = _lng;\n    }\n}\n\nexport interface LocationOptionsInterface {\n    img?: string;\n    svgPoint?: SVGPoint;\n    geoPoint?: GeoPoint;\n    address?: LocationAddress;\n}\n\n/**\n * Location class. Contains lat/lon, x/y coordinates, image, address and marker.\n * @param {object} options\n * @param {MapSVG.Map} mapsvg\n * @constructor\n *\n * @example\n * var location = new MapSVG.Location({\n *   lat: 55.22,\n *   lng: 64.12,\n *   img: \"/path/to/image.png\"\n *  });\n *\n * var marker = new MapSVG.Marker({\n *   location: location,\n *   mapsvg: mapsvgInstance\n * });\n *\n */\nexport class Location {\n\n    img: string;\n    imagePath: string;\n    address?: LocationAddress;\n    marker?: Marker;\n    geoPoint?: GeoPoint;\n    svgPoint?: SVGPoint;\n\n    constructor (options: LocationOptionsInterface) {\n        this.build(options);\n    }\n\n    build(options: LocationOptionsInterface): void {\n        if(options.img){\n            this.setImage(options.img);\n        }\n        if(options.address){\n            this.address = new LocationAddress(options.address);\n        }\n        if(typeof options.geoPoint !== undefined){\n            this.geoPoint = options.geoPoint;\n        }\n        if(typeof options.svgPoint !== undefined){\n            this.svgPoint = options.svgPoint;\n        }\n    }\n\n    update(options: LocationOptionsInterface): void {\n        this.build(options);\n    }\n\n\n\n    /**\n     * Sets image of the location\n     * @param {string} imgUrl - URL of the image\n     * @private\n     */\n    setImage(imgUrl: string): void {\n        if(typeof imgUrl !== 'string'){\n            return;\n        }\n        var src = imgUrl.split('/').pop();\n        if(imgUrl.indexOf('uploads')!==-1){\n            src = 'uploads/'+src;\n        }\n        this.img = src;\n        this.imagePath = this.getImageUrl();\n    }\n\n    /**\n     * Returns full image path\n     * @return string URL path\n     */\n    getImageUrl(): string {\n        if ((this.img && this.img.indexOf('uploads/') === 0)){\n            return MapSVG.urls.uploads+'markers/'+(this.img.replace('uploads/',''));\n        } else {\n            return MapSVG.urls.root+'markers/'+(this.img || '_pin_default.png');\n        }\n    }\n\n    /**\n     * Sets SvgPoint of the location (x/y coordinates)\n     * @returns void\n     */\n    setSvgPoint(svgPoint: SVGPoint): void {\n        this.svgPoint = svgPoint;\n    }\n\n    /**\n     * Sets GeoPoint of the location (lat/lng coordinates)\n     * @returns void\n     */\n    setGeoPoint(geoPoint: GeoPoint): void {\n        this.geoPoint = geoPoint;\n    }\n\n    /**\n     * Returns full marker image URL\n     * @returns {string} image URL\n     */\n    getMarkerImageUrl(): string {\n        if ((this.img && this.img.indexOf('uploads/') === 0)){\n            return MapSVG.urls.uploads+'markers/'+(this.img.replace('uploads/',''));\n        } else {\n            return MapSVG.urls.root+'markers/'+(this.img || '_pin_default.png');\n        }\n    }\n\n    /**\n     * Returns only essential data of the location\n     * @returns {img: string, geoPoint?: {lat: number, lng: number}, svgPoint?: {x: number, y: number}, address: LocationAddress}\n     */\n    getData(): {img: string, imagePath: string, geoPoint?: {lat: number, lng: number}, svgPoint?: {x: number, y: number}, address: LocationAddress} {\n        let data: {img: string, imagePath: string, geoPoint?: {lat: number, lng: number}, svgPoint?: {x: number, y: number}, address: LocationAddress} =\n            {\n                img: this.img,\n                imagePath: this.imagePath,\n                address: this.address\n            };\n        if(this.geoPoint){\n            data.geoPoint = {lat: this.geoPoint.lat, lng: this.geoPoint.lng}\n        }\n        if(this.svgPoint){\n            data.svgPoint = {x: this.svgPoint.x, y: this.svgPoint.y}\n        }\n        return data;\n    }\n}","import {Schema} from \"../Infrastructure/Server/Schema.js\";\nimport {GeoPoint, Location, LocationOptionsInterface, SVGPoint} from \"../Location/Location.js\";\nimport {LocationAddress} from \"../Location/LocationAddress.js\";\nimport {Region} from \"../Region/Region.js\";\n\nexport class CustomObject {\n    id: number;\n    fields: Array<string>;\n    schema: Schema;\n    location?: Location;\n    regions?: Array<{id: string, title: string}>;\n    private _regions?: {[key: string]: Array<{id: string, title: string}>};\n    dirtyFields: string[];\n    [key: string]: any;\n    initialLoad: boolean = true;\n\n    constructor(params: any, schema: Schema) {\n        this.schema = schema;\n        this.fields = schema.getFieldNames();\n        this.dirtyFields = [];\n        this.regions = [];\n        this._regions = {};\n        if(params.id !== undefined){\n            this.id = params.id;\n        }\n        this.initialLoad = true;\n        this.build(params);\n        this.initialLoad = false;\n        if(this.id) {\n            this.clearDirtyFields();\n        }\n    }\n\n    build(params: any){\n        for(let fieldName in params){\n            let field = this.schema.getField(fieldName);\n            if(field){\n                if(!this.initialLoad){\n                    this.dirtyFields.push(fieldName);\n                }\n                switch (field.type) {\n                    case 'region':\n                        if(params[fieldName].hasOwnProperty('length')){\n                            // If got regions just for current regions table\n                            this.regions = params[fieldName];\n                            this._regions[this.schema.name] = this.regions;\n                        } else {\n                            // If got regions for multiple tables\n                            this._regions = params[fieldName];\n                            this.regions = typeof this._regions[this.schema.name] != null ? this._regions[this.schema.name] : [];\n                        }\n                        break;\n                    case 'location':\n                        if(params[fieldName] != null && params[fieldName] != '' && Object.keys(params[fieldName]).length !== 0){\n                            let data: LocationOptionsInterface = {\n                                img: params[fieldName].img, // TODO getMarkerImage()\n                                address: new LocationAddress(params[fieldName].address)\n                            };\n                            if(params[fieldName].geoPoint && params[fieldName].geoPoint.lat && params[fieldName].geoPoint.lng){\n                                data.geoPoint = new GeoPoint(params[fieldName].geoPoint);\n                            } else if(params[fieldName].svgPoint && params[fieldName].svgPoint.x && params[fieldName].svgPoint.y){\n                                data.svgPoint = new SVGPoint(params[fieldName].svgPoint);\n                            }\n                            if(this.location != null){\n                                this.location.update(data);\n                            } else {\n                                this.location = new Location(data);\n                            }\n                        } else {\n                            params[fieldName] = null;\n                        }\n                        break;\n                    case 'post':\n                        if(params.post_id && params.post) {\n                            this.post = params.post;\n                            this.post_id = params.post.id;\n                        }\n                        break;\n                    case 'select':\n                        this[fieldName] = params[fieldName];\n                        if(!field.multiselect){\n                            this[fieldName+'_text'] = field.options.get(params[fieldName]);\n                        }\n                        break;\n                    case 'radio':\n                        this[fieldName] = params[fieldName];\n                        this[fieldName+'_text'] = field.options.get(params[fieldName]);\n                        break;\n                    default:\n                        this[fieldName] = params[fieldName];\n                        break;\n                }\n            }\n        }\n    }\n\n    update(params: {[key: string]: any}): void {\n        this.build(params);\n    }\n\n    getDirtyFields(): {[key: string]: any} {\n        let data: any = {};\n        this.dirtyFields.forEach((field) => { data[field] = this[field] });\n        data.id = this.id;\n        if(data.location != null){\n            data.location = data.location.getData();\n        }\n        if(this.schema.getFieldByType('region')){\n            data.regions = this._regions;\n        }\n        return data;\n    }\n    clearDirtyFields(): void {\n        this.dirtyFields = [];\n    }\n\n    getData(regionsTableName: string): {[key: string]: any} {\n\n        var data: {[key: string]: any} = {}\n\n        let fields = this.schema.getFields();\n        fields.forEach((field) => {\n            switch(field.type){\n                case 'region':\n                    data.regions = this._regions[regionsTableName];\n                    break;\n                case 'select':\n                    data[field.name] = this[field.name];\n                    if(!field.multiselect){\n                        data[field.name+'_text'] = this[field.name+'_text'];\n                    }\n                    break;\n                case 'radio':\n                    data[field.name] = this[field.name];\n                    data[field.name+'_text'] = this[field.name+'_text'];\n                    break;\n                default:\n                    data[field.name] = this[field.name];\n                    break;\n            }\n        })\n        return data;\n    }\n\n    getRegions(regionsTableName: string): Array<{id: string, title: string}> {\n        return this._regions[regionsTableName];\n    }\n}","import {Server} from '../Infrastructure/Server/Server';\nimport {Schema} from \"../Infrastructure/Server/Schema\";\nimport {Query} from \"../Infrastructure/Server/Query\";\nimport {CustomObject} from \"../Object/CustomObject\";\nimport {Events} from \"./Events\";\nimport {ArrayIndexed} from \"./ArrayIndexed\";\nimport {MapSVGMap} from \"../Map/Map\";\nconst $ = jQuery;\n\nexport interface RepositoryInterface {\n\n    server: Server;\n    query: Query;\n    hasMoreRecords: boolean;\n    className: string;\n\n    path: string;\n    loaded: boolean;\n    schema: Schema;\n    objects: ArrayIndexed<CustomObject>;\n    completeChunks: number;\n\n    objectNameSingle: string;\n    objectNameMany: string;\n\n    events: Events;\n\n    setSchema(schema: Schema): void;\n    getSchema(): Schema;\n\n    getLoaded(): ArrayIndexed<CustomObject>;\n    getLoadedAsArray(): ArrayIndexed<CustomObject>;\n    create(object: any): JQueryDeferred<any>;\n    find(params?: Query): JQueryDeferred<any>;\n    findById(id: number|string): JQueryDeferred<any>;\n    getLoadedObject(id: number|string): CustomObject;\n    update(object: any): JQueryDeferred<any>;\n    delete(id: string|number): JQueryDeferred<any>;\n\n    loadDataFromResponse(data: {[key: string]: any}|string): void;\n    reload(): void;\n\n    encodeData(params: any): {[key: string]: any};\n    decodeData(dataJSON: string): {[key: string]: any};\n\n    onFirstPage(): boolean;\n    onLastPage(): boolean;\n}\n\nexport class Repository implements RepositoryInterface {\n\n    server: Server;\n    query: Query;\n    hasMoreRecords: boolean;\n    className: string;\n\n    objectNameSingle: string;\n    objectNameMany: string;\n\n    path: string;\n    loaded: boolean;\n    schema: Schema;\n    objects: ArrayIndexed<CustomObject>;\n    completeChunks: number;\n\n    events: Events;\n\n    constructor(objectName: string, path: string) {\n        this.server = new Server();\n        this.query = new Query();\n        this.events = new Events(this);\n        this.className = '';\n        this.objectNameSingle = objectName;\n        this.objectNameMany = objectName+'s';\n        this.path = path + '/'; //this.objectNameMany + '/';\n        this.objects = new ArrayIndexed('id');\n        this.completeChunks = 0;\n    }\n\n    setSchema(schema: Schema): void {\n        this.schema = schema;\n    }\n    getSchema(): Schema {\n        return this.schema;\n    }\n\n    loadDataFromResponse(response: {[key: string]: any}|string): void {\n\n        let data: any;\n\n        data = this.decodeData(response);\n\n        this.objects.clear();\n\n        if(data[this.objectNameMany] && data[this.objectNameMany].length){\n            this.hasMoreRecords = this.query.perpage && (data[this.objectNameMany].length > this.query.perpage);\n            if(this.hasMoreRecords){\n                data[this.objectNameMany].pop();\n            }\n            data[this.objectNameMany].forEach(obj => { this.objects.push(obj); });\n        }else{\n            this.hasMoreRecords = false;\n        }\n\n        this.loaded = true;\n        this.events.trigger('loaded');\n    };\n    reload(): JQueryDeferred<any> {\n        return this.find();\n    };\n\n    create(object: object): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {};\n        data[this.objectNameSingle] = this.encodeData(object);\n\n        this.server.post(this.path, data).done((response: any) => {\n            let data = this.decodeData(response);\n            let object = data[this.objectNameSingle];\n            this.objects.push(object);\n            defer.resolve(object);\n            this.events.trigger('created', this, [object]);\n        }).fail(()=>{\n            defer.reject();\n        });\n\n        return defer;\n    }\n\n    findById(id: number|string, nocache: boolean = false): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let object;\n\n        if(!nocache){\n            object = this.objects.findById(id.toString());\n        }\n        if(!nocache && object){\n            defer.resolve(object);\n        } else {\n            this.server.get(this.path + id).done((response: string) => {\n                let data = this.decodeData(response);\n                defer.resolve(data[this.objectNameSingle]);\n            }).fail(()=>{ defer.reject(); });\n        }\n\n        return defer;\n    }\n\n    find(query?: Query|{[key: string]: any}): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        if(typeof query !== \"undefined\"){\n            this.query.update(query);\n        }\n\n        this.server.get(this.path, this.query).done((response: string) => {\n            this.loadDataFromResponse(response);\n            defer.resolve(this.getLoaded());\n        }).fail(()=>{ defer.reject(); });\n\n        return defer;\n    }\n\n    getLoaded(): ArrayIndexed<CustomObject> {\n        return this.objects;\n    }\n    getLoadedObject(id: number|string): CustomObject {\n        return this.objects.findById(id.toString());\n    }\n    getLoadedAsArray(): ArrayIndexed<CustomObject> {\n        return this.objects;\n    }\n\n    update(object: any): JQueryDeferred<any> {\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {};\n        // let objectUpdatedFields = object instanceof CustomObject ? object.getDirtyFields(): object;\n        let objectUpdatedFields = object.getDirtyFields();\n        data[this.objectNameSingle] = this.encodeData(objectUpdatedFields);\n\n        this.server.put(this.path + objectUpdatedFields.id, data).done((response: string) => {\n            object.clearDirtyFields();\n            defer.resolve(object);\n            this.events.trigger('updated', this, object);\n        }).fail(()=>{ defer.reject(); });\n        return defer;\n    }\n\n    delete(id: number): JQueryDeferred<any> {\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        this.server.delete(this.path + id).done((response: string) => {\n            this.objects.delete(id.toString());\n            this.events.trigger('deleted');\n            defer.resolve();\n        }).fail(()=>{ defer.reject(); });\n\n        return defer;\n    }\n\n    clear(): JQueryDeferred<any> {\n        let defer = jQuery.Deferred();\n        defer.promise();\n        this.server.delete(this.path).done((response: string) => {\n            this.objects.clear();\n            this.events.trigger('loaded');\n            this.events.trigger('cleared');\n            defer.resolve();\n        }).fail(()=>{ defer.reject(); });\n\n        return defer;\n    }\n\n    onFirstPage(): boolean {\n        return this.query.page === 1;\n    }\n\n    onLastPage(): boolean {\n        return this.hasMoreRecords === false;\n    }\n\n    encodeData(params: any): {[key: string]: any} {\n        return params;\n    }\n\n    decodeData(dataJSON: string|{[key: string]: any}): {[key: string]: any} {\n\n        let data;\n\n        if(typeof dataJSON === 'string'){\n            data = JSON.parse(dataJSON);\n        } else {\n            data = dataJSON;\n        }\n\n        if((data.object || data.region || data.regions || data.objects) && data.schema){\n            this.setSchema( new Schema(data.schema) );\n        }\n\n        let dataFormatted: any = {};\n        for(let key in data){\n            switch (key) {\n                case 'object':\n                case 'region':\n                    dataFormatted[key] = new CustomObject(data[key], this.schema);\n                    break;\n                case 'objects':\n                case 'regions':\n                    dataFormatted[key] = data[key].map( (obj) => new CustomObject(obj, this.schema) );\n                    break;\n                case 'schema':\n                    dataFormatted[key] = this.schema || new Schema(data[key]);\n                    break;\n                case 'schemas':\n                    dataFormatted[key] = data[key].map( (obj) => new Schema(obj) );\n                    break;\n                default: break;\n            }\n        }\n        return dataFormatted;\n    }\n\n    /**\n     * Imports data from a CSV file.\n     *\n     * @param data\n     * @param convertLatlngToAddress\n     * @param mapsvg\n     */\n    import(data: {[key: string]: any}, convertLatlngToAddress: boolean, mapsvg: MapSVGMap) {\n        var _this = this;\n\n        var locationField = _this.schema.getFieldByType('location');\n        var language = 'en';\n        if(locationField && locationField.language){\n            language = locationField.language;\n        }\n\n        data = this.formatCSV(data, mapsvg);\n\n\n        return this.importByChunks(data, language, convertLatlngToAddress).done(function(){\n            _this.find();\n        });\n    }\n\n    /**\n     * Splits data to small chunks and sends every chunk separately to the server\n     *\n     * @param data - Data to import\n     * @param language - Language for Geocoding conversions\n     * @param convertLatlngToAddress - Whether lat/lng coordinates should be converted to addresses via Geocoding service\n     */\n    importByChunks(data: {[key: string]: any}, language: string, convertLatlngToAddress: boolean){\n\n        var _this = this;\n\n        var i,j,temparray,chunk = 50;\n        var chunks = [];\n\n        for (i=0,j=data.length; i<j; i+=chunk) {\n            temparray = data.slice(i,i+chunk);\n            chunks.push(temparray);\n        }\n\n        if(chunks.length > 0){\n\n            var delay = 0;\n            var delayPlus = chunks[0][0] && chunks[0][0].location ? 1000 : 0;\n\n            var defer = $.Deferred();\n            defer.promise();\n\n            _this.completeChunks = 0;\n\n            chunks.forEach(function(chunk){\n                delay += delayPlus;\n                setTimeout(function(){\n                    var data = {\n                        language: language,\n                        convertLatlngToAddress: convertLatlngToAddress\n                    };\n\n                    data[_this.objectNameMany] = JSON.stringify(chunk);\n\n                    _this.server.post(_this.path + 'import', data).done(function(_data){\n                        _this.completeChunk(chunks, defer);\n                    });\n                }, delay);\n            });\n        }\n        return defer;\n    }\n\n    completeChunk(chunks, defer){\n        var _this = this;\n        _this.completeChunks++;\n        if(_this.completeChunks === chunks.length){\n            defer.resolve();\n        }\n    };\n\n    formatCSV(data: {[key: string]: any}, mapsvg: MapSVGMap){\n\n        var _this = this;\n        var newdata = [];\n\n        var regionsTable = mapsvg.regionsRepository.getSchema().name;\n\n        data.forEach(function(object, index){\n            var newObject = {};\n            for(var key in object){\n                var field = _this.schema.getField(key);\n                if(field !== undefined ){\n                    switch (field.type){\n                        case \"region\":\n                            newObject[key] = {};\n                            newObject[key][regionsTable] = object[key].split(',')\n                                .map(function(regionId){\n                                    return regionId.trim();\n                                }).filter(function(rId) {\n                                    return  mapsvg.getRegion(rId) !== undefined || mapsvg.regions.find(function(item){ return item.title === rId }) !== undefined;\n                                }).map(function(rId){\n                                    var r = mapsvg.getRegion(rId);\n                                    if(typeof r === 'undefined'){\n                                        r = mapsvg.regions.find(function(item){ return item.title === rId });\n                                    }\n                                    return {id: r.id, title: r.title};\n                                });\n                            break;\n                        case \"location\":\n                            var latLngRegex = /^(\\-?\\d+(\\.\\d+)?),\\s*(\\-?\\d+(\\.\\d+)?)$/g;\n                            if(object[key].match(latLngRegex)){\n                                var coords = object[key].split(',').map(function(n){ return parseFloat(n); });\n                                if(coords.length == 2 && (coords[0] > -90 && coords[0] < 90) && (coords[1] > -180 && coords[1] < 180)){\n                                    newObject[key] = {geoPoint: {lat: coords[0], lng: coords[1]}};\n                                } else {\n                                    newObject[key] = '';\n                                }\n                            } else if(object[key]){\n                                newObject[key] = {address: object[key]};\n                            }\n\n                            if(typeof newObject[key] == 'object'){\n                                newObject[key].img = mapsvg.options.defaultMarkerImage;\n                            }\n\n                            break;\n                        case \"select\":\n                            var field = _this.schema.getField(key);\n                            if(field.multiselect){\n                                var labels = _this.schema.getField(key).options.map(function(f){\n                                    return f.label;\n                                });\n                                newObject[key] = object[key].split(',')\n                                    .map(function(label){\n                                        return label.trim();\n                                    }).filter(function(label) {\n                                        return  labels.indexOf(label) !== -1;\n                                    }).map(function(label){\n                                        return _this.schema.getField(key).options.filter(function(option){\n                                            return option.label == label;\n                                        })[0];\n                                    });\n                            } else {\n                                newObject[key] = object[key];\n                            }\n                            break;\n                        case \"radio\":\n                        case \"text\":\n                        case \"textarea\":\n                        case \"status\":\n                        default:\n                            newObject[key] = object[key];\n                            break;\n                    }\n                }\n            }\n            data[index] = newObject;\n        });\n\n        return data;\n    }\n}\n","import {Repository} from \"../Core/Repository.js\";\nimport {Schema} from \"../Infrastructure/Server/Schema\";\nimport {CustomObject} from \"../Object/CustomObject\";\nimport {MapSVGMap} from \"./Map\";\n\nexport class MapsRepository extends Repository {\n\n    path = 'maps/';\n\n    constructor() {\n        super('map', 'maps');\n    }\n\n    encodeData(params: any): {[key: string]: any} {\n\n        let data: {[key: string]: any} = {};\n        data.options = JSON.stringify(params.options);\n\n        // Apache mod_sec blocks requests with the following words:\n        // table, select, database. Encode those words to decode them later in PHP to prevent blocking:\n        data.options = data.options.replace(/select/g,\"!mapsvg-encoded-slct\");\n        data.options = data.options.replace(/table/g,\"!mapsvg-encoded-tbl\");\n        data.options = data.options.replace(/database/g,\"!mapsvg-encoded-db\");\n        data.options = data.options.replace(/varchar/g,\"!mapsvg-encoded-vc\");\n\n        data.id = params.id;\n        data.title = params.title;\n\n        return data;\n    }\n\n    decodeData(dataJSON: string|{[key: string]: any}): {[key: string]: any} {\n\n        let data;\n\n        if(typeof dataJSON === 'string'){\n            data = JSON.parse(dataJSON);\n        } else {\n            data = dataJSON;\n        }\n\n\n        return data;\n    }\n\n    copy(id: number, title: string): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {options: {title: title}};\n\n        this.server.post(this.path + id + '/copy', this.encodeData(data)).done((response: string) => {\n            var data = this.decodeData(response);\n            this.objects.clear();\n            this.events.trigger('loaded');\n            this.events.trigger('cleared');\n            defer.resolve(data.map);\n        }).fail(()=>{ defer.reject(); });\n\n        return defer;\n    }\n\n    createFromV2(object: any){\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {};\n        data[this.objectNameSingle] = this.encodeData(object);\n\n        this.server.post(this.path+'/createFromV2', data).done((response: any) => {\n            let data = this.decodeData(response);\n            let object = data[this.objectNameSingle];\n            this.objects.push(object);\n            defer.resolve(object);\n            this.events.trigger('created', this, [object]);\n        }).fail(()=>{\n            defer.reject();\n        });\n\n        return defer;\n    }\n\n}","import {Repository} from \"../Core/Repository.js\";\nimport {Schema} from \"../Infrastructure/Server/Schema\";\nimport {CustomObject} from \"../Object/CustomObject\";\nimport {MapSVGMap} from \"./Map\";\n\nexport class MapsV2Repository extends Repository {\n\n    path = 'maps-v2/';\n\n    constructor() {\n        super('map', 'maps');\n    }\n\n    encodeData(params: any): {[key: string]: any} {\n\n        let data: {[key: string]: any} = {};\n        data.options = JSON.stringify(params.options);\n\n        // Apache mod_sec blocks requests with the following words:\n        // table, select, database. Encode those words to decode them later in PHP to prevent blocking:\n        data.options = data.options.replace(/select/g,\"!mapsvg-encoded-slct\");\n        data.options = data.options.replace(/table/g,\"!mapsvg-encoded-tbl\");\n        data.options = data.options.replace(/database/g,\"!mapsvg-encoded-db\");\n        data.options = data.options.replace(/varchar/g,\"!mapsvg-encoded-vc\");\n\n        data.id = params.id;\n        data.title = params.title;\n\n        return data;\n    }\n\n    decodeData(dataJSON: string|{[key: string]: any}): {[key: string]: any} {\n\n        let data;\n\n        if(typeof dataJSON === 'string'){\n            data = JSON.parse(dataJSON);\n        } else {\n            data = dataJSON;\n        }\n\n\n        return data;\n    }\n}","/**\n * Resize sensor.\n * @private\n * @param element\n * @param callback\n * @constructor\n */\n\nconst $ = jQuery;\n\nexport class ResizeSensor {\n\n    element: HTMLElement;\n    callback: Function;\n    expand: HTMLElement;\n    shrink: HTMLElement;\n    currentWidth: number;\n    currentHeight: number;\n\n\n    constructor(element, callback) {\n\n        var _this = this;\n\n        _this.element = element;\n        _this.callback = callback;\n\n        var style = getComputedStyle(element);\n        var zIndex = parseInt(style.zIndex);\n        if (isNaN(zIndex)) {\n            zIndex = 0;\n        }\n        ;\n        zIndex--;\n\n        _this.expand = document.createElement('div');\n        _this.expand.style.position = \"absolute\";\n        _this.expand.style.left = \"0px\";\n        _this.expand.style.top = \"0px\";\n        _this.expand.style.right = \"0px\";\n        _this.expand.style.bottom = \"0px\";\n        _this.expand.style.overflow = \"hidden\";\n        _this.expand.style.zIndex = zIndex.toString();\n        _this.expand.style.visibility = \"hidden\";\n\n        var expandChild = document.createElement('div');\n        expandChild.style.position = \"absolute\";\n        expandChild.style.left = \"0px\";\n        expandChild.style.top = \"0px\";\n        expandChild.style.width = \"10000000px\";\n        expandChild.style.height = \"10000000px\";\n        _this.expand.appendChild(expandChild);\n\n        _this.shrink = document.createElement('div');\n        _this.shrink.style.position = \"absolute\";\n        _this.shrink.style.left = \"0px\";\n        _this.shrink.style.top = \"0px\";\n        _this.shrink.style.right = \"0px\";\n        _this.shrink.style.bottom = \"0px\";\n        _this.shrink.style.overflow = \"hidden\";\n        _this.shrink.style.zIndex = zIndex.toString();\n        _this.shrink.style.visibility = \"hidden\";\n\n        var shrinkChild = document.createElement('div');\n        shrinkChild.style.position = \"absolute\";\n        shrinkChild.style.left = \"0px\";\n        shrinkChild.style.top = \"0px\";\n        shrinkChild.style.width = \"200%\";\n        shrinkChild.style.height = \"200%\";\n        _this.shrink.appendChild(shrinkChild);\n\n        _this.element.appendChild(_this.expand);\n        _this.element.appendChild(_this.shrink);\n\n        var size = element.getBoundingClientRect();\n\n        _this.currentWidth = size.width;\n        _this.currentHeight = size.height;\n\n        _this.setScroll();\n\n        _this.expand.addEventListener('scroll', function () {\n            _this.onScroll()\n        });\n        _this.shrink.addEventListener('scroll', function () {\n            _this.onScroll()\n        });\n    };\n\n    onScroll() {\n        var _this = this;\n        var size = _this.element.getBoundingClientRect();\n\n        var newWidth = size.width;\n        var newHeight = size.height;\n\n        if (newWidth != _this.currentWidth || newHeight != _this.currentHeight) {\n            _this.currentWidth = newWidth;\n            _this.currentHeight = newHeight;\n            _this.callback();\n        }\n\n        this.setScroll();\n    };\n\n    setScroll() {\n        this.expand.scrollLeft = 10000000;\n        this.expand.scrollTop = 10000000;\n        this.shrink.scrollLeft = 10000000;\n        this.shrink.scrollTop = 10000000;\n    };\n\n    destroy() {\n        this.expand.remove();\n        this.shrink.remove();\n    };\n}","/**\n * MapOptions object used to define the properties that can be set on a Map.\n * @typedef {Object} MapSVG.MapOptions\n * @property {string} source - SVG file URL\n * @property {boolean} disableAll - Disables all regions\n * @property {boolean} responsive - Map responsiveness. Default: true\n * @property {string} loadingText - Loading text message. Default is \"Loading map...\"\n * @property {number} width - Width of the map\n * @property {number} height - Height of the map\n * @property (array) viewBox - Map viewBox: [x,y,width,height]\n * @property {boolean} lockAspectRatio - Keep aspect ratio when changing width or height\n * @property {object} padding - Map padding, default: {top: 0, left: 0, right: 0, bottom: 0}\n * @property {string} cursor - Mouse pointer style: \"default' or \"pointer\"\n * @property {boolean} multiSelect - Allows to select multiple Regions. Default: false\n * @property {object} colors - Color settings. Example: {base: \"#E1F1F1\", background: \"#eeeeee\", hover: \"#548eac\", selected: \"#065A85\", stroke: \"#7eadc0\"},\n * @property {object} clustering - Clustering settings. Default: {on: false},\n * @property {object} zoom - Zoom options. Default: {on: false, limit: [0,10], delta: 2, buttons: {on: true, location: 'right'}, mousewheel: true, fingers: true},\n * @property {object} scroll - Scroll options. Default: {on: false, limit: false, background: false, spacebar: false},\n * @property {object} tooltips - Tooltip options. Default: {on: false, position: 'bottom-right', template: '', maxWidth: '', minWidth: 100},\n * @property {object} popovers - Popover options. Default: {on: false, position: 'top', template: '', centerOn: true, width: 300, maxWidth: 50, maxHeight: 50},\n * @property {object} regionStatuses - List of Region statuses\n * @property {object} events - List of callbacks\n * @property {object} choropleth - Choropleth map settings.\n * @property {object} labelsMarkers - Marker labels settings. Default: {on:false}\n * @property {object} labelsMarkers - Region labels settings. Default: {on:false}\n */\nimport {GeoPoint} from \"../Location/Location\";\nimport {SchemaField} from \"../Infrastructure/Server/SchemaField\";\nimport {ArrayIndexed} from \"../Core/ArrayIndexed\";\n\nexport interface MapOptionsInterface {\n    id: number;\n    title: string;\n    backend: boolean; // passed from admin\n    /** @deprecated */\n    afterLoad: Function;\n    /** @deprecated */\n    beforeLoad: Function;\n    /** @deprecated */\n    dataLoaded: Function;\n    db_map_id: number|string;\n    source: string;\n    regionPrefix: string;\n    groups: Array<GroupOptionsInterface>;\n    layersControl: LayersControlOptionsInterface;\n    disableAll: boolean;\n    responsive: boolean;\n    loadingText: string;\n    width: number;\n    height: number;\n    viewBox: number[];\n    lockAspectRatio: boolean;\n    padding: {top: number, left: number, right: number, bottom: number};\n    cursor: string;\n    multiSelect: boolean;\n    colorsIgnore: boolean;\n    editMode: boolean;\n    defaultMarkerImage: string;\n    fitMarkers: boolean;\n    fitMarkersOnStart: boolean;\n    menu: {\n        showFirst: string;\n        showMapOnClick: boolean;\n        noResultsText: string;\n        on: boolean,\n        customContainer: boolean,\n        width: string,\n        source: string,\n        hideOnMobile: boolean,\n        location: string,\n        containerId: string,\n        position: string,\n        filterout: {field: string, val: number|string},\n        categories: {\n            on: boolean,\n            groupBy: string,\n            collapse: boolean,\n            collapseOther: boolean,\n            hideEmpty: boolean\n        },\n        sortBy: string,\n        sortDirection: string,\n        minHeight: string\n    };\n    colors: {\n        base?: string,\n        baseDefault?: string,\n        background?: string,\n        hover?: string|number,\n        selected?: string|number,\n        stroke?: string,\n        directory: string,\n        directorySearch: string,\n        detailsView: string,\n        popover: string,\n        tooltip: string,\n        status: any,\n        markers: any,\n        leftSidebar: string,\n        rightSidebar: string,\n        header: string,\n        footer: string,\n        modalFilters: string,\n        clusters: string,\n        clustersHover: string,\n        clustersText: string,\n        clustersBorders: string,\n        clustersHoverBorders: string,\n        clustersHoverText: string,\n    };\n    clustering: {on: boolean};\n    zoom: {\n        on: boolean,\n        limit: [number,number],\n        delta: number,\n        buttons: {\n            on: boolean,\n            location: string\n        },\n        mousewheel: boolean,\n        fingers: boolean\n    };\n    scroll: {\n        on: boolean,\n        limit: boolean,\n        background: boolean,\n        spacebar: boolean\n    };\n    tooltips: {\n        on: boolean,\n        position: string,\n        template: string,\n        maxWidth: string,\n        minWidth: 100\n    };\n    popovers: {\n        on: boolean,\n        position: string,\n        template: string,\n        centerOn: boolean,\n        width: string,\n        maxWidth: number,\n        maxHeight: number,\n        mobileFullscreen: boolean,\n        resetViewboxOnClose: boolean,\n    };\n    regionStatuses: Array<any>;\n    events: {[key: string]: string};\n    choropleth: {\n        on?: boolean,\n        source: string,\n        sourceField: string,\n        sourceFieldSelect: {\n            on: boolean,\n            variants: Array<string>\n        },\n        bubbleMode: boolean,\n        bubbleSize: {\n            min: number,\n            max: number\n        }\n        segments: Array<{\n            description: string,\n            colors: {\n                low: string,\n                high: string,\n                diffRGB: {r: number, g: number, b: number, a: number},\n                lowRGB: {r: number, g: number, b: number, a: number},\n                highRGB: {r: number, g: number, b: number, a: number}\n            },\n            labels: {low: string, high: string},\n            min: number,\n            max: number,\n            maxAdjusted: number,\n            valuePart: number\n        }>\n    };\n    regions: Array<{id: string, title: string, fill: string, disabled: boolean}>;\n    database: {\n        pagination: {on: boolean, perpage: number, showIn: string, prev: string, next: string},\n        loadOnStart: boolean,\n        regionsTableName: string,\n        objectsTableName: string\n    };\n    labelsMarkers: {on: boolean};\n    labelsRegions: {on: boolean};\n    googleMaps: {\n        on: boolean,\n        apiKey: string,\n        center: GeoPoint,\n        zoom: number,\n        drawingTools?: boolean,\n        geometry?: boolean,\n        minZoom: number\n    },\n    css: string;\n    containers: {\n        leftSidebar: {on: boolean, width: string, height: string},\n        rightSidebar: {on: boolean, width: string, height: string},\n        header: {on: boolean, width: string, height: string},\n        footer: {on: boolean, width: string, height: string}\n    },\n    filters: {\n        on: boolean,\n        source: string,\n        containerId: string,\n        location: string,\n        width: string,\n        filteredRegionsStatus: number,\n        modalLocation: string,\n        hideOnMobile: boolean,\n        hide: boolean,\n        padding: string,\n        showButtonText: string,\n        clearButton: boolean,\n        clearButtonText: boolean\n    },\n    filtersSchema?: Array<SchemaField>\n    detailsView: {\n        location: string,\n        width: string,\n        mobileFullscreen: boolean,\n        containerId: string,\n        margin: string,\n        autoresize: boolean\n    },\n    mobileView: {\n        [key: string]: any\n    },\n    templates: {\n        directoryItem: string,\n        labelRegion: string\n    },\n    controls: {\n        zoom: boolean,\n        zoomReset: boolean,\n        userLocation: boolean,\n        location: string,\n    },\n    actions: {\n        region: {\n            click: {[key: string]: any},\n            touch: {[key: string]: any},\n            mouseover: {[key: string]: any},\n            mouseout: {[key: string]: any}\n        },\n        marker: {\n            touch: {[key: string]: any},\n            click: {[key: string]: any},\n            mouseover: {[key: string]: any},\n            mouseout: {[key: string]: any}\n        },\n        map: {\n            afterLoad: {\n                selectRegion: boolean\n            }\n        },\n        directoryItem: {\n            touch: {[key: string]: any},\n            click: {[key: string]: any},\n            hover: {[key: string]: any},\n            mouseout: {[key: string]: any}\n        }\n    };\n    svgFileVersion: number;\n    data_regions: any; // passed from Admin\n    data_objects: any; // passed from Admin\n    extension: any;\n    markerLastID: number;\n}\n\nexport interface GroupOptionsInterface {\n    id: string;\n    title: string;\n    objects: Array<{label: string, value: string}>;\n    visible: boolean;\n}\nexport interface LayersControlOptionsInterface {\n    on: boolean;\n    label: string;\n    maxHeight: string;\n    position: string;\n    expanded: boolean;\n}\nexport class ViewBox {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n    constructor(x: any, y?: number|string, width?: number|string, height?: number|string) {\n        if(typeof x === 'object'){ // x as Object\n            if(x.hasOwnProperty('x')\n                && x.hasOwnProperty('y')\n                && x.hasOwnProperty('width')\n                && x.hasOwnProperty('height')\n            ){\n                this.x = typeof x.x === 'string' ? parseFloat(x.x) : x.x;\n                this.y = typeof x.y === 'string' ? parseFloat(x.y) : x.y;\n                this.width = typeof x.width === 'string' ? parseFloat(x.width) : x.width;\n                this.height = typeof x.height === 'string' ? parseFloat(x.height) : x.height;\n            } else if(typeof x === 'object' && x.length && x.length === 4){ // x as Array\n                this.x = typeof x[0] === 'string' ? parseFloat(x[0]) : x[0];\n                this.y = typeof x[1] === 'string' ? parseFloat(x[1]) : x[1];\n                this.width = typeof x[2] === 'string' ? parseFloat(x[2]) : x[2]\n                this.height = typeof x[3] === 'string' ? parseFloat(x[3]) : x[3];\n            }\n        } else {\n            this.x = typeof x === 'string' ? parseFloat(x) : x;\n            this.y = typeof y === 'string' ? parseFloat(y) : y;\n            this.width = typeof width === 'string' ? parseFloat(width) : width;\n            this.height = typeof height === 'string' ? parseFloat(height) : height;\n        }\n    }\n    toString(){\n        return this.x+' '+this.y+' '+this.width+' '+this.height;\n    }\n    toArray(){\n        return [this.x, this.y, this.width, this.height];\n    }\n}\n\nexport class GeoViewBox {\n    sw: GeoPoint;\n    ne: GeoPoint;\n    constructor(sw: GeoPoint, ne: GeoPoint) {\n        this.sw = sw;\n        this.ne = ne;\n    }\n}","import {Events} from \"../Core/Events\";\nimport {MapSVGMap} from '../Map/Map';\nimport {GeoPoint, ScreenPoint, SVGPoint} from '../Location/Location';\nimport {ViewBox} from \"../Map/MapOptionsInterface\";\nconst $ = jQuery;\n\n/**\n * Abstract MapObject class. Extended by {@link #region|MapSVG.Region} & {@link #marker|MapSVG.Marker}\n * @abstract\n * @param {object} jQueryObject\n * @param {MapSVG.Map} mapsvg\n */\nexport class MapObject {\n    id: string;\n    objects: any[];\n    events: Events;\n    element: HTMLElement|SVGElement;\n    mapsvg: MapSVGMap;\n\n    constructor(element: HTMLElement|SVGElement|null, mapsvg: MapSVGMap) {\n        this.id = \"\";\n        this.objects = [];\n        this.events = new Events(this);\n        this.element = element;\n//        this.elemType = element.tagName;\n        this.mapsvg = mapsvg;\n    };\n\n    /**\n     * Returns bounding box of an object in SVG coordinates\n     * @returns {*[]} - [x,y,width,height]\n     * @abstract\n     * @private\n     */\n    getBBox(): ViewBox {\n        return new ViewBox(1,2,3,4);\n    };\n    /**\n     * Returns geo-bounds of an object - South-West & North-East points.\n     * @returns {{sw: (number[]), ne: (number[])}}\n     */\n    getGeoBounds(): {sw: GeoPoint, ne: GeoPoint} {\n        var bbox = this.getBBox();\n        var pointSW = new SVGPoint(bbox.x, (bbox.y + bbox.height));\n        var pointNE = new SVGPoint((bbox.x + bbox.width), bbox.y);\n        var sw = this.mapsvg.convertSVGToGeo(pointSW);\n        var ne = this.mapsvg.convertSVGToGeo(pointNE);\n\n        return {sw: sw, ne: ne};\n    };\n    /**\n     * Returns style of a given property of an SVG object\n     * @param {string} prop - property name\n     * @param {object} elem - SVG object\n     * @returns {string} - style\n     */\n    getComputedStyle(prop: string, elem?: SVGElement|HTMLElement): string {\n\n        elem = elem || this.element;\n\n        var _p1:string = elem.getAttribute(prop);\n        if (_p1) {\n            return _p1;\n        }\n\n        var _p2:string = elem.getAttribute('style');\n        if(_p2){\n            var s = _p2.split(';');\n            var z = s.filter(function (e) {\n                e = e.trim();\n                var attr = e.split(':');\n                if (attr[0] == prop)\n                    return true;\n            });\n            if (z.length) {\n                return z[0].split(':').pop().trim();\n            }\n        }\n\n        var parent = elem.parentElement;\n        var elemType = parent ? parent.tagName : null;\n\n        if (elemType && elemType != 'svg')\n            return this.getComputedStyle(prop, parent);\n        else\n            return undefined;\n    };\n    /**\n     * Returns style of a property of the SVG object\n     * @param {string} prop - property name\n     * @returns {string}\n     */\n    getStyle(prop: string) {\n        var _p1 = this.attr(prop);\n        if (_p1) {\n            return _p1;\n        }\n        var _p2 = this.attr('style');\n        if (_p2){\n            var s = _p2.split(';');\n            var z = s.filter(function (e) {\n                var e = e.trim();\n                if (e.indexOf(prop) === 0)\n                    return e;\n            });\n\n            return z.length ? z[0].split(':').pop().trim() : undefined;\n        }\n        return \"\";\n    };\n    /**\n     * Returns center of an object in pixel coordinates\n     * @returns {number[]} - [x,y]\n     */\n    getCenter(): ScreenPoint {\n        var x = this.element.getBoundingClientRect().left;\n        var y = this.element.getBoundingClientRect().top;\n        var w = this.element.getBoundingClientRect().width;\n        var h = this.element.getBoundingClientRect().height;\n        var point = new ScreenPoint(x + w / 2, y + h / 2);\n        return point;\n    };\n    /**\n     * Returns center of an object in SVG coordinates\n     * @returns {{x: number, y: number}}\n     */\n    getCenterSVG(): SVGPoint {\n        var bbox = this.getBBox();\n        var point = new SVGPoint(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        return point;\n    };\n    /**\n     * Returns center of an object in geo-coordinates\n     * @returns {{lat: number, lng: number}}\n     */\n    getCenterLatLng(yShift) {\n        yShift = yShift ? yShift : 0;\n        var bbox = this.getBBox();\n        var x = bbox[0] + bbox[2] / 2;\n        var y = bbox[1] + bbox[3] / 2 - yShift;\n        var point = new SVGPoint(x,y);\n        return this.mapsvg.convertSVGToGeo(point);\n    };\n    /**\n     * Sets attribute of an SVG object\n     * @param {string|object} v1 - attribute name or object: {name: value, name: value}\n     * @param {string|number} v2 - value\n     * @returns {*}\n     */\n    attr(v1, v2 = null) {\n\n        var svgDom = this.element;\n\n        if (typeof v1 == \"object\") {\n            for(var key in v1){\n                var item = v1[key];\n                if (typeof item === \"string\" || typeof item === \"number\") {\n                    svgDom.setAttribute(key, ''+item);\n                }\n            }\n        } else if (typeof v1 == \"string\" && (typeof v2 == \"string\" || typeof v2 == \"number\")) {\n            svgDom.setAttribute(v1, ''+v2);\n        } else if (v2 == undefined) {\n            return svgDom.getAttribute(v1);\n        }\n    };\n    /**\n     * Set ID of an object\n     * @param {string} id\n     */\n    setId(id: string) {\n        if (id !== undefined) {\n            this.id = id;\n            this.element.setAttribute('id', id);\n        }\n    };\n}","import {MapSVG} from \"../Core/globals.js\";\nimport {MapObject} from \"../MapObject/MapObject.js\";\nimport {Location, SVGPoint, GeoPoint} from \"../Location/Location.js\";\nimport {ViewBox} from \"../Map/MapOptionsInterface.js\";\nimport {CustomObject} from \"../Object/CustomObject.js\";\nconst $ = jQuery;\n\n/**\n * Marker class\n * @extends MapObject\n * @param params\n * @constructor\n *\n * @example\n * var location = new MapSVG.Location({\n *   lat: 55.22,\n *   lng: 64.12,\n *   img: \"/path/to/image.png\"\n *  });\n *\n * var marker = new MapSVG.Marker({\n *   location: location,\n *   mapsvg: mapsvgInstance\n * });\n *\n * // The marker is created but still not added to the map. Let's add it:\n * mapsvg.markerAdd(marker);\n *\n */\nexport class Marker extends MapObject {\n\n    src: string;\n    location: Location;\n    svgPoint?: SVGPoint;\n    geoPoint?: GeoPoint;\n    element: HTMLElement;\n    textLabel: HTMLElement;\n    width: number;\n    height: number;\n    selected: boolean;\n    object: CustomObject;\n    centered: boolean;\n    altAttr: string;\n    private svgPointBeforeDrag: SVGPoint;\n\n    mapped?: boolean;\n    needToRemove?: boolean;\n    dragging?: boolean;\n    bubble: HTMLElement;\n    bubbleMode: boolean;\n\n    constructor(params) {\n        super(null, params.mapsvg);\n\n        this.src = params.location.getMarkerImageUrl();\n        var img = $('<img src=\"' + this.src + '\" />').addClass('mapsvg-marker');\n        this.element = img[0];\n\n        this.location = params.location;\n        this.location.marker = this;\n        this.mapsvg = params.mapsvg;\n        params.object && this.setObject(params.object);\n\n        if (params.width && params.height) {\n            this.width = params.width;\n            this.height = params.height;\n        }\n\n        this.setId(this.mapsvg.markerId());\n\n        this.svgPoint = this.location.svgPoint || this.mapsvg.convertGeoToSVG(this.location.geoPoint);\n\n        this.setImage(this.src);\n\n        this.setAltAttr();\n\n        this.bubbleMode = false;\n\n        // this.adjustPosition();\n        // this.mapsvg.markerAdd(this);\n    }\n\n    /**\n     * Set ID of the Marker\n     * @param {string} id\n     */\n    setId(id: string|number) {\n        MapObject.prototype.setId.call(this, id);\n        this.mapsvg.markers.reindex();\n    };\n    /**\n     * Get SVG bounding box of the Marker\n     * @returns {ViewBox}\n     */\n    getBBox(): ViewBox {\n        var bbox = {x: this.svgPoint.x, y: this.svgPoint.y, width: this.width / this.mapsvg.scale, height: this.height / this.mapsvg.scale};\n        bbox = $.extend(true, {}, bbox);\n        return new ViewBox(bbox);\n    };\n    /**\n     * Get Marker options\n     * @returns {{id: string, src: string, x: number, y: number, geoCoords: GeoPoint}}\n     */\n    getOptions(){\n        var o = {\n            id: this.id,\n            src: this.src,\n            svgPoint: this.svgPoint,\n            geoPoint: this.geoPoint\n        };\n        $.each(o, function (key, val) {\n            if (val == undefined) {\n                delete o[key];\n            }\n        });\n        return o;\n    };\n    /**\n     * Update marker settings\n     * @param {object} data - Options\n     */\n    update = function (data) {\n        for (var key in data) {\n            // check if there's a setter for a property\n            var setter = 'set' + MapSVG.ucfirst(key);\n            if (setter in this)\n                this[setter](data[key]);\n        }\n    };\n    /**\n     * Set image of the Marker\n     * @param {string} src\n     */\n    setImage(src: string) {\n        if (!src)\n            return false;\n        var _this = this;\n        src = MapSVG.safeURL(src);\n        var img = new Image();\n        var marker = this;\n        this.src = src;\n        if (marker.element.getAttribute('src') !== 'src') {\n            marker.element.setAttribute('src', src);\n        }\n        img.onload = function () {\n            marker.width = (<HTMLImageElement>this).width;\n            marker.height = (<HTMLImageElement>this).height;\n            _this.adjustPosition();\n        };\n        img.src = src;\n        if (this.location) {\n            this.location.setImage(src);\n        }\n\n    };\n\n    /**\n     * Set 'alt' attribute of the Marker\n     */\n    setAltAttr(){\n        var marker = this;\n\n        marker.altAttr = (typeof marker.object != 'undefined') && (typeof marker.object.title != 'undefined')&&(marker.object.title !== '') ? marker.object.title : marker.id;\n        marker.element.setAttribute('alt', marker.altAttr);\n    };\n\n    /**\n     * Set x/y coordinates of the Marker\n     * @param {SVGPoint} svgPoint\n     */\n    setPoint(svgPoint: SVGPoint) {\n\n        this.svgPoint = svgPoint;\n\n        if (this.location) {\n            this.location.setSvgPoint(this.svgPoint);\n        }\n        if (this.mapsvg.mapIsGeo) {\n            this.geoPoint = this.mapsvg.convertSVGToGeo(this.svgPoint);\n            this.location.setGeoPoint(this.geoPoint);\n        }\n\n        this.adjustPosition();\n        this.events.trigger('change');\n    };\n    /**\n     * Moves marker to a point.\n     * @private\n     * @param {Array} xy\n     */\n    /*\n    moveToClick = function (screen) {\n\n        var _data = this.mapsvg.getData();\n        var markerOptions = {};\n\n        xy[0] = xy[0] + _data.viewBox[0];\n        xy[1] = xy[1] + _data.viewBox[1];\n\n\n        if (_data.mapIsGeo)\n            this.geoCoords = this.mapsvg.convertSVGToGeo(xy[0], xy[1]);\n\n        markerOptions.xy = xy;\n        this.update(markerOptions);\n    };\n     */\n    /**\n     * Adjusts position of the Marker. Called on map zoom and on map container resize.\n     */\n    adjustPosition() {\n        var _this = this;\n        var pos = _this.mapsvg.convertSVGToPixel(this.svgPoint);\n\n        if (pos.x > 30000000) {\n            this.element.style.left = pos.x - 30000000 + 'px';\n            pos.x = 30000000;\n            if (this.textLabel) {\n                this.textLabel.style.left = pos.x - 30000000 + 'px';\n            }\n        } else {\n            this.element.style.left = '0';\n        }\n        if (pos.y > 30000000) {\n            this.element.style.top = pos.y - 30000000 + 'px';\n            pos.y = 30000000;\n            if (this.textLabel) {\n                this.textLabel.style.top = pos.y - 30000000 + 'px';\n            }\n        } else {\n            this.element.style.top = '0';\n        }\n\n        pos.x -= this.width / 2;\n        pos.y -= !this.centered ? this.height : this.height / 2;\n        pos.x = Math.round(pos.x);\n        pos.y = Math.round(pos.y);\n\n        this.element.style.transform = 'translate(' + pos.x + 'px,' + pos.y + 'px)';\n\n        if (this.textLabel) {\n            var x = Math.round(pos.x + this.width / 2 - $(this.textLabel).outerWidth() / 2);\n            var y = Math.round(pos.y - $(this.textLabel).outerHeight());\n            this.textLabel.style.transform = 'translate(' + x + 'px,' + y + 'px)';\n        }\n    };\n    /**\n     * Marker drag event handler\n     * @private\n     * @param startCoords\n     * @param scale\n     * @param endCallback\n     * @param clickCallback\n     */\n    drag (startCoords, scale, endCallback?: Function, clickCallback?: Function) {\n        var _this = this;\n        this.svgPointBeforeDrag = new SVGPoint(this.svgPoint.x, this.svgPoint.y);\n        this.dragging = true;\n\n        $('body').on('mousemove.drag.mapsvg', function (e) {\n            e.preventDefault();\n            $(_this.mapsvg.containers.map).addClass('no-transitions');\n            //$('body').css('cursor','move');\n            var mouseNew = MapSVG.mouseCoords(e);\n            var dx = mouseNew.x - startCoords.x;\n            var dy = mouseNew.y - startCoords.y;\n            var newSvgPoint = new SVGPoint(_this.svgPointBeforeDrag.x + dx / scale, _this.svgPointBeforeDrag.y + dy / scale);\n            _this.setPoint(newSvgPoint);\n        });\n        $('body').on('mouseup.drag.mapsvg', function (e) {\n            e.preventDefault();\n            _this.undrag();\n            var mouseNew = MapSVG.mouseCoords(e);\n            var dx = mouseNew.x - startCoords.x;\n            var dy = mouseNew.y - startCoords.y;\n            var newSvgPoint = new SVGPoint(_this.svgPointBeforeDrag.x + dx / scale, _this.svgPointBeforeDrag.y + dy / scale);\n\n            _this.setPoint(newSvgPoint);\n\n            if (_this.mapsvg.isGeo()){\n                // var svgPoint = new SVGPoint(_this.x + _this.width / 2, this.y + (this.height-1));\n                _this.geoPoint = _this.mapsvg.convertSVGToGeo(newSvgPoint);\n            }\n\n            endCallback && endCallback.call(_this);\n            if (_this.svgPointBeforeDrag.x == _this.svgPoint.x && _this.svgPointBeforeDrag.y == _this.svgPoint.y)\n                clickCallback && clickCallback.call(_this);\n        });\n    };\n    /**\n     * Marker undrag event handler\n     * @private\n     */\n    undrag () {\n        //$(this.element).closest('svg').css('pointer-events','auto');\n        //$('body').css('cursor','default');\n        this.dragging = false;\n        $('body').off('.drag.mapsvg');\n        $(this.mapsvg.containers.map).removeClass('no-transitions');\n    };\n    /**\n     * Deletes the Marker\n     */\n    delete () {\n        if (this.textLabel) {\n            this.textLabel.remove();\n            this.textLabel = null;\n        }\n        $(this.element).empty().remove();\n        this.mapsvg.markerDelete(this);\n    };\n    /**\n     * Sets parent DB object of the Marker\n     * @param {object} obj\n     */\n    setObject(obj: CustomObject) {\n        this.object = obj;\n        $(this.element).attr('data-object-id', this.object.id);\n    };\n    /**\n     * Hides the Marker\n     */\n    hide() {\n        $(this.element).addClass('mapsvg-marker-hidden');\n        if (this.textLabel) {\n            $(this.textLabel).hide();\n        }\n    };\n    /**\n     * Shows the Marker\n     */\n    show() {\n        $(this.element).removeClass('mapsvg-marker-hidden');\n        if (this.textLabel) {\n            $(this.textLabel).show();\n        }\n    };\n\n    /**\n     * Highlight the Marker.\n     * Used on mouseover.\n     */\n    highlight() {\n        $(this.element).addClass('mapsvg-marker-hover');\n    };\n    /**\n     * Unhighlight the Marker.\n     * Used on mouseout.\n     */\n    unhighlight() {\n        $(this.element).removeClass('mapsvg-marker-hover');\n    };\n    /**\n     * Select the Marker.\n     */\n    select() {\n        this.selected = true;\n        $(this.element).addClass('mapsvg-marker-active');\n    };\n    /**\n     * Deselect the Marker.\n     */\n    deselect() {\n        this.selected = false;\n        $(this.element).removeClass('mapsvg-marker-active');\n    };\n\n    getData(){\n        return this.object;\n    }\n    /**\n     * Returns color of the choropleth marker bubble\n     * @returns {{r: number, g: number, b: number, a: number}}\n     */\n    getChoroplethColor(){\n        let markerValue = parseFloat(this.object[this.mapsvg.options.choropleth.sourceField]);\n        let segments = this.mapsvg.options.choropleth.segments;\n        let currentSegment;\n\n        segments.forEach(function (segment) {\n            if (markerValue >= segment.min && markerValue <= segment.max){\n                currentSegment = segment;\n            }\n        });\n\n        let w = currentSegment.maxAdjusted === 0 ? 0 : (markerValue - currentSegment.min) / currentSegment.maxAdjusted;\n\n        return {\n            r: Math.round(currentSegment.colors.diffRGB.r * w + currentSegment.colors.lowRGB.r),\n            g: Math.round(currentSegment.colors.diffRGB.g * w + currentSegment.colors.lowRGB.g),\n            b: Math.round(currentSegment.colors.diffRGB.b * w + currentSegment.colors.lowRGB.b),\n            a: (currentSegment.colors.diffRGB.a * w + currentSegment.colors.lowRGB.a).toFixed(2)\n        };\n    };\n\n    /**\n     * Returns size of the choropleth bubble\n     */\n    getBubbleSize(){\n        let bubbleSize;\n\n        if (this.object[this.mapsvg.options.choropleth.sourceField]){\n            let maxBubbleSize = this.mapsvg.options.choropleth.bubbleSize.max,\n                minBubbleSize = this.mapsvg.options.choropleth.bubbleSize.min,\n                maxSourceFieldvalue = this.mapsvg.options.choropleth.segments[this.mapsvg.options.choropleth.segments.length-1].max,\n                minSourceFieldvalue = this.mapsvg.options.choropleth.segments[0].min,\n                sourceFieldvalue = parseFloat(this.object[this.mapsvg.options.choropleth.sourceField]);\n\n            bubbleSize = ((sourceFieldvalue - minSourceFieldvalue)*(maxBubbleSize - minBubbleSize)/(maxSourceFieldvalue - minSourceFieldvalue)) + Number(minBubbleSize);\n        }\n        else {\n            bubbleSize = false;\n        }\n\n        return bubbleSize;\n    }\n\n    /**\n     * Draw a choropleth bubble for the marker\n     */\n    drawBubble() {\n        let bubbleId = 'mapsvg-bubble-'+this.object.id;\n        let bubbleValue = parseFloat(this.object[this.mapsvg.options.choropleth.sourceField]);\n\n        if (bubbleValue){\n            if ($('#'+bubbleId).length === 0) {\n                $(this.mapsvg.layers.markers).append('<div id=\"'+bubbleId+'\" class=\"mapsvg-bubble mapsvg-marker-bubble\"></div>');\n            }\n\n            let bubble = $('#'+bubbleId);\n\n            let rgb = this.getChoroplethColor();\n            let bubbleSize = Number(this.getBubbleSize());\n\n            let pos = this.mapsvg.convertSVGToPixel(this.svgPoint);\n\n            pos.x -= bubbleSize / 2;\n            pos.y -= bubbleSize / 2;\n            pos.x = Math.round(pos.x);\n            pos.y = Math.round(pos.y);\n\n            $(bubble).text(bubbleValue);\n            $(bubble).css('transform', 'translate(' + pos.x + 'px,' + pos.y + 'px)')\n                .css('background-color', 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a+')')\n                .css('width', bubbleSize+'px')\n                .css('height', bubbleSize+'px')\n                .css('lineHeight', (bubbleSize-2)+'px');\n        }\n        else {\n            $('#'+bubbleId).remove();\n        }\n\n    }\n}\n","/**\n * Cluster class. Groups markers into a clickable circle with a number indicating how many markers it contains.\n * @param options\n * @constructor\n * @extends MapObject\n */\nimport {MapSVGMap} from \"../Map/Map.js\";\nimport {MapObject} from \"../MapObject/MapObject.js\";\nimport {Marker} from \"../Marker/Marker.js\";\nimport {ViewBox} from \"../Map/MapOptionsInterface\";\nimport {SVGPoint} from \"../Location/Location\";\n\nconst $ = jQuery;\n\nexport class MarkerCluster extends MapObject{ // extends MapObject\n    mapsvg: MapSVGMap;\n    svgPoint: SVGPoint;\n    min_x: number;\n    min_y: number;\n    max_x: number;\n    max_y: number;\n    cellX: number;\n    cellY: number;\n    markers: Array<Marker>;\n    cellSize: number;\n    width: number;\n    elem: HTMLElement;\n\n    constructor(options: {svgPoint: SVGPoint, cellX: number, cellY: number, markers: Array<Marker>, width?: number, cellSize?: number }, mapsvg: MapSVGMap){\n        super(null, mapsvg);\n\n        this.svgPoint = options.svgPoint;\n        this.cellX = options.cellX; // SVG-x (not pixel-x)\n        this.cellY = options.cellY; // SVG-y (not pixel-y)\n        this.markers = options.markers || [];\n\n        this.cellSize = 50;\n        this.width = 30;\n\n        var _this = this;\n\n        this.elem = $('<div class=\"mapsvg-marker-cluster\">' + this.markers.length + '</div>')[0];\n        $(this.elem).data(\"cluster\", this);\n\n        if (this.markers.length < 2) {\n            $(this.elem).hide(); // don't show cluster at the start\n        }\n\n        this.adjustPosition();\n    }\n\n    /**\n     * Adds marker to the cluster.\n     * @param {Marker} marker\n     */\n    addMarker(marker: Marker) {\n        this.markers.push(marker);\n        if (this.markers.length > 1) {\n            if (this.markers.length === 2) {\n                // this.markers[0].clusterize();\n                $(this.elem).show();\n            }\n            if (this.markers.length === 2) {\n\n                var x = this.markers.map(function (m) {\n                    return m.svgPoint.x\n                });\n                this.min_x = Math.min.apply(null, x);\n                this.max_x = Math.max.apply(null, x);\n\n                var y = this.markers.map(function (m) {\n                    return m.svgPoint.y\n                });\n                this.min_y = Math.min.apply(null, y);\n                this.max_y = Math.max.apply(null, y);\n\n                this.svgPoint.x = this.min_x + ((this.max_x - this.min_x) / 2);\n                this.svgPoint.y = this.min_y + ((this.max_y - this.min_y) / 2);\n            }\n            if (this.markers.length > 2) {\n                if (marker.svgPoint.x < this.min_x) {\n                    this.min_x = marker.svgPoint.x;\n                } else if (marker.svgPoint.x > this.max_x) {\n                    this.max_x = marker.svgPoint.x;\n                }\n                if (marker.svgPoint.y < this.min_y) {\n                    this.min_y = marker.svgPoint.y;\n                } else if (marker.svgPoint.x > this.max_x) {\n                    this.max_y = marker.svgPoint.y;\n                }\n                this.svgPoint.x = this.min_x + ((this.max_x - this.min_x) / 2);\n                this.svgPoint.y = this.min_y + ((this.max_y - this.min_y) / 2);\n            }\n            // marker.clusterize();\n        } else {\n            this.svgPoint.x = marker.svgPoint.x;\n            this.svgPoint.y = marker.svgPoint.y;\n        }\n\n        $(this.elem).text(this.markers.length);\n        this.adjustPosition();\n    }\n\n    /**\n     * Checks if provided marker should be added into this cluster.\n     * @param {MapSVG.Marker} marker\n     * @returns {boolean}\n     */\n    canTakeMarker(marker: Marker): boolean {\n\n        var _this = this;\n\n        var screenPoint = _this.mapsvg.convertSVGToPixel(marker.svgPoint);\n\n        return (this.cellX === Math.ceil(screenPoint.x / this.cellSize)\n            &&\n            this.cellY === Math.ceil(screenPoint.y / this.cellSize))\n    }\n\n    /**\n     * Destroys the cluster\n     */\n    destroy() {\n        // this.markers.forEach(function(marker){\n        //     marker.unclusterize();\n        // });\n        this.markers = null;\n        $(this.elem).remove();\n    }\n\n    /**\n     * Adjusts position of the cluster.\n     * Called on zoom and map container resize.\n     */\n    adjustPosition() {\n\n        var _this = this;\n\n        \n        var pos = _this.mapsvg.convertSVGToPixel(this.svgPoint);\n\n        if (pos.x > 30000000) {\n            $(this.elem)[0].style.left = (pos.x - 30000000).toString();\n            pos.x = 30000000;\n        } else {\n            $(this.elem)[0].style.left = (0).toString();\n            // $(this.elem)[0].style.left = pos.x+'px';\n        }\n        if (pos.y > 30000000) {\n            $(this.elem)[0].style.top = (pos.y - 30000000).toString();\n            pos.y = 30000000;\n        } else {\n            $(this.elem)[0].style.top = (0).toString();\n            // $(this.elem)[0].style.top = pos.y+'px';\n        }\n\n        pos.x -= this.width / 2;\n        pos.y -= this.width / 2;\n\n        $(this.elem).css({'transform':  'translate(' + pos.x + 'px,' + pos.y + 'px)'});\n    };\n    /**\n     * Get SVG bounding box of the MarkersCluster\n     * @returns {*[]} - [x,y,width,height]\n     */\n    getBBox(): ViewBox {\n\n        var _this = this;\n\n        var bbox = {\n            x: this.svgPoint.x,\n            y: this.svgPoint.y,\n            width: this.cellSize / this.mapsvg.getScale(),\n            height: this.cellSize / this.mapsvg.getScale()\n        };\n        bbox = $.extend(true, {}, bbox);\n\n        return new ViewBox(bbox.x, bbox.y, bbox.width, bbox.height);\n    };\n\n    getData(){\n        return this.markers.map( m => m.object );\n    }\n}","import {MapSVGMap} from \"../Map/Map.js\";\nimport {MapSVG} from \"../Core/globals.js\";\nimport {tinycolor} from \"../Vendor/tinycolor.js\"\nimport {MapObject} from \"../MapObject/MapObject.js\";\nimport {ViewBox} from \"../Map/MapOptionsInterface.js\";\nimport {SVGPoint} from \"../Location/Location.js\";\nimport {CustomObject} from \"../Object/CustomObject\";\nimport {ArrayIndexed} from \"../Core/ArrayIndexed\";\nimport {transform} from \"@babel/core\";\nconst $ = jQuery;\n\n/**\n * Region class. Contains a reference to an SVG element.\n * @extends MapObject\n * @param {element} SVGElement\n * @param {string} regionID - Region ID\n * @param {Map} mapsvg - MapSVG instance\n */\nexport class Region extends MapObject {\n    id: string;\n    title?: string;\n    id_no_spaces: string;\n    disabled: boolean;\n    selected: boolean;\n    status: number;\n    default_attr: any;\n    selected_attr: any;\n    hover_attr: any;\n    initialState: string;\n    elemOriginal: SVGGraphicsElement;\n    elem: SVGGraphicsElement;\n    style: {\n        fill?: string,\n        stroke?: string,\n        'stroke-width'?: number,\n        [key: string]: string|number\n    };\n    choroplethValue: number;\n    customAttrs: Array<string>;\n    fill?: string;\n    center?: SVGPoint;\n    textLabel: HTMLElement;\n    data: CustomObject;\n\n    constructor (element: SVGElement, mapsvg: MapSVGMap){\n            super(element, mapsvg);\n            this.id = this.element.getAttribute('id');\n            if(this.id && this.mapsvg.options.regionPrefix){\n                this.setId(this.id.replace(this.mapsvg.options.regionPrefix, ''));\n            }\n\n            this.id_no_spaces = this.id.replace(/\\s/g,'_');\n\n            this.element.setAttribute('class',( this.element.className || '' )+' mapsvg-region');\n\n            this.setStyleInitial();\n\n            var regionOptions  = this.mapsvg.options.regions && this.mapsvg.options.regions[this.id] ? this.mapsvg.options.regions[this.id] : null;\n\n            this.disabled      = this.getDisabledState();\n            this.disabled && this.attr('class',this.attr('class')+' mapsvg-disabled');\n\n            this.default_attr  = {};\n            this.selected_attr = {};\n            this.hover_attr    = {};\n            var selected = false;\n            if(regionOptions && regionOptions.selected){\n                selected = true;\n                delete regionOptions.selected;\n            }\n            regionOptions && this.update(regionOptions);\n            this.setFill();\n            if(selected) {\n                this.setSelected();\n            }\n            this.saveState();\n    };\n\n    adjustStroke(scale: number){\n        $(this.element).css({ 'stroke-width': this.style['stroke-width'] / scale });\n    }\n\n    /**\n     * Sets initial style of a Region, computed from SVG\n     * @private\n     */\n    setStyleInitial(){\n        this.style = {fill: this.getComputedStyle('fill')};\n        this.style.stroke = this.getComputedStyle('stroke') || '';\n        var w;\n        // if($(this.element).data('stroke-width')){\n        //     w = $(this.element).data('stroke-width');\n        // }else{\n            w = this.getComputedStyle('stroke-width');\n            w = w ? w.replace('px','') : '1';\n            w = w == \"1\" ? 1.2 : parseFloat(w);\n        // }\n        this.style['stroke-width'] = w;\n        //$(this.element).data('stroke-width', w);\n    };\n    /**\n     * Save state of a Region (all parameters)\n     * @private\n     */\n    saveState(){\n        this.initialState = JSON.stringify(this.getOptions());\n    };\n    /**\n     * Returns SVG bounding box of the Region\n     * @returns {[number,number,number,number]} - [x,y,width,height]\n     */\n    getBBox(): ViewBox {\n        // @ts-ignore\n        var _bbox = this.element.getBBox();\n        let bbox = new ViewBox(_bbox.x, _bbox.y, _bbox.width, _bbox.height);\n\n        // @ts-ignore (TS doesn't recognize getTransformToElement() method from SVGGraphicsElement)\n        var matrix = this.element.getTransformToElement(this.mapsvg.containers.svg);\n\n        var x2 = bbox.x+bbox.width;\n        var y2 = bbox.y+bbox.height;\n\n        // transform a point using the transformed matrix\n        var position = this.mapsvg.containers.svg.createSVGPoint();\n        position.x = bbox.x;\n        position.y = bbox.y;\n        position = position.matrixTransform(matrix);\n        bbox.x = position.x;\n        bbox.y = position.y;\n        // var position = this.mapsvg.containers.svg.createSVGPoint();\n        position.x = x2;\n        position.y = y2;\n        position = position.matrixTransform(matrix);\n        bbox.width = position.x - bbox.x;\n        bbox.height = position.y - bbox.y;\n\n        return bbox;\n    };\n    /**\n     * Checks whether the Region was changed from the initial state\n     * @returns {boolean}\n     * @private\n     */\n    changed(){\n        return JSON.stringify(this.getOptions()) != this.initialState;\n    };\n    /**\n     * Saves a copy of the Region SVG elem.\n     * Used in Map Editor by \"Edit SVG file\" mode.\n     * @private\n     */\n    edit(){\n        this.elemOriginal = <SVGGraphicsElement>$(this.element).clone()[0];\n    };\n    /**\n     * Deletes the copy of the Region SVG elem created by .edit() method.\n     * Used in Map Editor by \"Edit SVG file\" mode.\n     * @private\n     */\n    editCommit(){\n        this.elemOriginal = null;\n    };\n    /**\n     * Restores SVG elem.\n     * Used in Map Editor by \"Edit SVG file\" mode.\n     * @private\n     */\n    editCancel(){\n        this.mapsvg.containers.svg.appendChild(this.elemOriginal);\n        this.element = this.elemOriginal;\n        this.elemOriginal = null;\n    };\n    /**\n     * Returns Region properties\n     * @param {boolean} forTemplate - adds special properties for use in a template\n     * @returns {object}\n     */\n    getOptions(forTemplate?: boolean): {[key: string]: any} {\n        let o: any;\n        o = {\n            id: this.id,\n            id_no_spaces: this.id_no_spaces,\n            title: this.title,\n            fill: this.mapsvg.options.regions[this.id] && this.mapsvg.options.regions[this.id].fill,\n            data: this.data,\n            choroplethValue: this.choroplethValue\n        };\n        if(forTemplate){\n            o.disabled  = this.disabled;\n            o.dataCounter = (this.data && this.data.length) || 0;\n        }\n        for(var key in o){\n            if(typeof o[key] === 'undefined'){\n                delete o[key];\n            }\n        }\n        if(this.customAttrs){\n            var that = this;\n            this.customAttrs.forEach(function(attr){\n                o[attr] = that[attr];\n            });\n        }\n        return o;\n    };\n    /**\n     * Returns an object with properties of the Region formatted for a template\n     * @returns {object}\n     */\n    forTemplate(){\n        var data = {\n            id: this.id,\n            title: this.title,\n            objects: this.objects,\n            data: this.data\n        };\n        for(var key in this.data){\n            if(key!='title' && key!='id')\n                data[key] = this.data[key];\n        }\n\n        return data;\n    };\n    getData(){\n        return this.forTemplate();\n    }\n    /**\n     * Updates the Region\n     * @param {object} options\n     *\n     * @example\n     * var region = mapsvg.getRegion(\"US-TX\");\n     * region.update({\n     *   fill: \"#FF3322\"\n     * });\n     */\n    update(options){\n        for(var key in options){\n            // check if there's a setter for a property\n            var setter = 'set'+MapSVG.ucfirst(key);\n            if (setter in this)\n                this[setter](options[key]);\n            else{\n                this[key] = options[key];\n                this.customAttrs = this.customAttrs || [];\n                this.customAttrs.push(key);\n            }\n        }\n    };\n    /**\n     * Sets Title of the Region\n     * @param {string} title\n     */\n    setTitle(title?: string): void{\n        if (title){\n            this.title = title;\n        }\n\n        this.element.setAttribute('title', this.title);\n    };\n    /**\n     * Sets CSS style of the Region\n     * @param {object} style - CSS-format styles\n     * @private\n     */\n    setStyle(style: any): void{\n        $.extend(true, this.style, style);\n        this.setFill();\n    };\n    /**\n     * Returns color of the Region for choropleth map\n     * @returns {{r: number, g: number, b: number, a: number}}\n     */\n    getChoroplethColor(){\n        let regionValue = parseFloat(this.data[this.mapsvg.options.choropleth.sourceField]);\n        let segments = this.mapsvg.options.choropleth.segments;\n        let currentSegment;\n\n        segments.forEach(function (segment) {\n            if (regionValue >= segment.min && regionValue <= segment.max){\n                currentSegment = segment;\n            }\n        });\n\n        let w = currentSegment.maxAdjusted === 0 ? 0 : (regionValue - currentSegment.min) / currentSegment.maxAdjusted;\n\n        return {\n            r: Math.round(currentSegment.colors.diffRGB.r * w + currentSegment.colors.lowRGB.r),\n            g: Math.round(currentSegment.colors.diffRGB.g * w + currentSegment.colors.lowRGB.g),\n            b: Math.round(currentSegment.colors.diffRGB.b * w + currentSegment.colors.lowRGB.b),\n            a: (currentSegment.colors.diffRGB.a * w + currentSegment.colors.lowRGB.a).toFixed(2)\n        };\n    };\n\n    /**\n     * Returns size of the choropleth bubble\n     */\n    getBubbleSize(){\n        let bubbleSize;\n\n        if (this.data[this.mapsvg.options.choropleth.sourceField]){\n            let maxBubbleSize = this.mapsvg.options.choropleth.bubbleSize.max,\n                minBubbleSize = this.mapsvg.options.choropleth.bubbleSize.min,\n                maxSourceFieldvalue = this.mapsvg.options.choropleth.segments[this.mapsvg.options.choropleth.segments.length-1].max,\n                minSourceFieldvalue = this.mapsvg.options.choropleth.segments[0].min,\n                sourceFieldvalue = parseFloat(this.data[this.mapsvg.options.choropleth.sourceField]);\n\n            bubbleSize = ((sourceFieldvalue - minSourceFieldvalue)*(maxBubbleSize - minBubbleSize)/(maxSourceFieldvalue - minSourceFieldvalue)) + Number(minBubbleSize);\n        }\n        else {\n            bubbleSize = false;\n        }\n\n        return bubbleSize;\n    }\n    /**\n     * Sets fill color of the Region\n     * @param {string} fill - color in a CSS format\n     * @example\n     * region.setFill(\"#FF2233\");\n     * region.setFill(\"rgba(255,255,100,0.5\");\n     */\n    setFill(fill?: string){\n\n        if(this.mapsvg.options.colorsIgnore){\n            $(this.element).css(this.style);\n            return;\n        }\n\n        if(fill){\n            var regions = {};\n            regions[this.id] = {fill: fill};\n            $.extend(true, this.mapsvg.options, {regions: regions});\n        }else if(!fill && fill!==undefined && this.mapsvg.options.regions && this.mapsvg.options.regions[this.id] && this.mapsvg.options.regions[this.id].fill){\n            delete this.mapsvg.options.regions[this.id].fill;\n        }\n\n        // Priority: choropleth > status > options.fill > disabled > base > svg\n        if(this.mapsvg.options.choropleth.on\n            && this.mapsvg.options.choropleth.source === 'regions'\n            && this.mapsvg.options.choropleth.sourceField\n            && this.mapsvg.options.choropleth.bubbleMode === false\n            && this.data\n            && typeof this.data[this.mapsvg.options.choropleth.sourceField] !== 'undefined'\n            && this.data[this.mapsvg.options.choropleth.sourceField] !== ''\n        ){\n            var rgb = this.getChoroplethColor();\n            this.default_attr['fill'] = 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a+')';\n\n        }else if(this.status!==undefined && this.mapsvg.regions && this.mapsvg.regionsRepository.getSchema().getFieldByType('status') && this.mapsvg.regionsRepository.getSchema().getFieldByType('status').optionsDict && this.mapsvg.regionsRepository.getSchema().getFieldByType('status').optionsDict[this.status] && this.mapsvg.regionsRepository.getSchema().getFieldByType('status').optionsDict[this.status].color){\n            this.default_attr['fill'] = this.mapsvg.regionsRepository.getSchema().getFieldByType('status').optionsDict[this.status].color;\n\n        }else if(this.mapsvg.options.regions[this.id] && this.mapsvg.options.regions[this.id].fill) {\n            this.default_attr['fill'] = this.mapsvg.options.regions[this.id].fill;\n\n            // }else if(this.disabled && this.mapsvg.options.colors.disabled){\n            //     this.default_attr['fill'] = this.mapsvg.options.colors.disabled;\n\n        }else if(this.mapsvg.options.colors.base){\n            this.default_attr['fill'] = this.mapsvg.options.colors.base;\n\n        }else if(this.style.fill!='none'){\n            this.default_attr['fill'] = this.style.fill ? this.style.fill : this.mapsvg.options.colors.baseDefault;\n\n        }else{\n            this.default_attr['fill'] = 'none';\n        }\n\n\n        if(MapSVG.isNumber(this.mapsvg.options.colors.selected))\n            this.selected_attr['fill'] = tinycolor(this.default_attr.fill).lighten(parseFloat(''+this.mapsvg.options.colors.selected)).toRgbString();\n        else\n            this.selected_attr['fill'] = this.mapsvg.options.colors.selected;\n\n        if(MapSVG.isNumber(this.mapsvg.options.colors.hover))\n            this.hover_attr['fill'] = tinycolor(this.default_attr.fill).lighten(parseFloat(''+this.mapsvg.options.colors.hover)).toRgbString();\n        else\n            this.hover_attr['fill'] = this.mapsvg.options.colors.hover;\n\n\n        $(this.element).css('fill',this.default_attr['fill']);\n        this.fill = this.default_attr['fill'];\n\n        if(this.style.stroke!='none' && this.mapsvg.options.colors.stroke != undefined){\n            $(this.element).css('stroke',this.mapsvg.options.colors.stroke);\n        }else{\n            var s = this.style.stroke == undefined ? '' : this.style.stroke;\n            $(this.element).css('stroke', s);\n        }\n\n        if(this.selected)\n            this.setSelected();\n\n    };\n    /**\n     * Disables the Region.\n     * @param {boolean} on - true/false = disable/enable\n     * @param {boolean} skipSetFill - If false, color of the Region will not be changed\n     */\n    setDisabled(on?: boolean, skipSetFill?: boolean){\n        on = on !== undefined ? MapSVG.parseBoolean(on) : this.getDisabledState(); // get default disabled state if undefined\n        var prevDisabled = this.disabled;\n        this.disabled = on;\n        this.attr('class',this.attr('class').replace('mapsvg-disabled',''))\n        if(on){\n            this.attr('class',this.attr('class')+' mapsvg-disabled');\n        }\n        if(this.disabled != prevDisabled)\n            this.mapsvg.deselectRegion(this);\n        !skipSetFill && this.setFill();\n    };\n    /**\n     * Sets status of the Region.\n     * Takes the list of statuses from global MapSVG options.\n     * @param {number} status\n     */\n    setStatus(status: number){\n        var statusOptions = this.mapsvg.options.regionStatuses && this.mapsvg.options.regionStatuses[status];\n        if(statusOptions){\n            this.status = status;\n            this.data.status = status;\n            this.data.status_text = statusOptions.label;\n            this.setDisabled(statusOptions.disabled, true);\n        }else{\n            this.status = undefined;\n            this.data.status = undefined;\n            this.data.status_text = undefined;\n            this.setDisabled(false, true);\n        }\n        this.setFill();\n    };\n    /**\n     * Selects the Region.\n     */\n    setSelected(){\n        this.mapsvg.selectRegion(this);\n    };\n    /**\n     * Set Region choropleth value. Used to calculate color of the Region.\n     * @param {number} val\n     */\n    setchoroplethValue(val: number){\n        if($.isNumeric(val)){\n            if(typeof val === 'string') {\n                val = parseFloat(val);\n            }\n            this.choroplethValue = val;\n        } else {\n            this.choroplethValue = undefined;\n        }\n    };\n    /**\n     * Checks if Region should be disabled\n     * @param {boolean} asDefault\n     * @returns {boolean}\n     */\n    getDisabledState(asDefault?: boolean): boolean {\n        var opts = this.mapsvg.options.regions[this.id];\n        if(!asDefault && opts && opts.disabled !== undefined){\n            return opts.disabled;\n        }else {\n            return this.mapsvg.options.disableAll || this.style.fill === 'none' || this.id == 'labels' || this.id == 'Labels';\n        }\n    };\n    /**\n     * Highlight the Region.\n     * Used on mouseover.\n     */\n    highlight(){\n        $(this.element).css({'fill' : this.hover_attr.fill});\n        $(this.element).addClass('mapsvg-region-hover');\n    };\n    /**\n     * Unhighlight the Region.\n     * Used on mouseout.\n     */\n    unhighlight(){\n        $(this.element).css({'fill' : this.default_attr.fill});\n        $(this.element).removeClass('mapsvg-region-hover');\n    };\n    /**\n     * Select the Region.\n     */\n    select(){\n        $(this.element).css({'fill' : this.selected_attr.fill});\n        this.selected = true;\n        $(this.element).addClass('mapsvg-region-active');\n    };\n    /**\n     * Deselect the Region.\n     */\n    deselect(){\n        $(this.element).css({'fill' : this.default_attr.fill});\n        this.selected = false;\n        $(this.element).removeClass('mapsvg-region-active');\n    };\n\n    /**\n     * Adds custom data loaded from server\n     * @param {object} data - Any set of {key:value} pairs\n     */\n    setData(data: CustomObject) {\n        this.data = data;\n        this.setTitle(data.title);\n    };\n\n    /**\n     * Draw a choropleth bubble for the region\n     */\n    drawBubble() {\n        if (this.data){\n\n            let bubbleId = 'mapsvg-bubble-'+this.id;\n            let bubbleValue = parseFloat(this.data[this.mapsvg.options.choropleth.sourceField]);\n\n            if (bubbleValue){\n\n                if (!this.center) {\n                    this.center = this.getCenterSVG();\n                }\n\n                let pos = this.mapsvg.convertSVGToPixel(this.center);\n\n                if ($('#'+bubbleId).length === 0) {\n                    $(this.mapsvg.containers.scrollpane).append('<div id=\"'+bubbleId+'\" class=\"mapsvg-bubble mapsvg-region-bubble\"></div>');\n                }\n\n                let bubble = $('#'+bubbleId);\n\n                let rgb = this.getChoroplethColor();\n                let bubbleSize = Number(this.getBubbleSize());\n\n                $(bubble).text(bubbleValue);\n                $(bubble).css('transform','translate(-50%,-50%) translate(' + pos.x + 'px,' + pos.y + 'px)')\n                    .css('background-color', 'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + rgb.a+')')\n                    .css('width', bubbleSize+'px')\n                    .css('height', bubbleSize+'px')\n                    .css('lineHeight', (bubbleSize-2)+'px');\n            }\n            else {\n                $('#'+bubbleId).remove();\n            }\n        }\n\n    }\n}","import {Repository} from '../../Core/Repository'\nimport {Schema} from \"./Schema\";\nimport {MapSVGMap} from \"../../Map/Map\";\nimport {Events} from \"../../Core/Events\";\n\nexport class SchemaRepository extends Repository {\n\n    constructor() {\n        let objectName = 'schema';\n        super(objectName, +objectName+'s');\n        this.className = 'Schema';\n        this.objectNameSingle = objectName;\n        this.objectNameMany = objectName+'s';\n        this.path = objectName+'s/';\n        this.events = new Events(this);\n    }\n\n    create(schema: Schema): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {};\n        data[this.objectNameSingle] = this.encodeData(schema);\n\n        this.server.post(this.path, data).done((response: string) => {\n\n            let data = this.decodeData(response);\n            schema.id = data[this.objectNameSingle].id;\n            this.objects.push(schema);\n\n            this.events.trigger('created')\n            schema.events.trigger('created')\n\n            defer.resolve(schema);\n        }).fail(()=>{ defer.reject(); });\n\n        return defer;\n    }\n\n    update(schema: Schema): JQueryDeferred<any> {\n\n        let defer = jQuery.Deferred();\n        defer.promise();\n\n        let data = {};\n        data[this.objectNameSingle] = this.encodeData(schema);\n\n        this.server.put(this.path + schema.id, data).done((response: string) => {\n            let data = this.decodeData(response);\n            this.objects.push(schema);\n            defer.resolve(schema);\n\n            this.events.trigger('changed');\n            schema.events.trigger('changed');\n\n        }).fail(()=>{ defer.reject(); });\n        return defer;\n    }\n\n    encodeData(schema: Schema): {[key: string]: any} {\n\n        let _schema = schema.getData()\n\n        let fieldsJsonString = JSON.stringify(_schema);\n        fieldsJsonString = fieldsJsonString.replace(/select/g,\"!mapsvg-encoded-slct\");\n        fieldsJsonString = fieldsJsonString.replace(/table/g,\"!mapsvg-encoded-tbl\");\n        fieldsJsonString = fieldsJsonString.replace(/database/g,\"!mapsvg-encoded-db\");\n        fieldsJsonString = fieldsJsonString.replace(/varchar/g,\"!mapsvg-encoded-vc\")\n\n        return JSON.parse(fieldsJsonString);\n    }\n}","/**\n * Abstract class. Creates a scrollable controller. Extended by {@link #mapsvgpopovercontroller|PopoverController} / {@link #mapsvgdetailscontroller|DetailsController} / {@link #mapsvgdirectorycontroller|DirectoryController}\n * @abstract\n * @constructor\n * @param {object} options - List of options\n */\nimport {MapSVG} from \"./globals.js\"\nimport {MapSVGMap} from \"../Map/Map\";\n// import {Handlebars} from \"../../handlebars.js\"\n// @ts-ignore\nimport Handlebars from \"Handlebars\";\nimport {ResizeSensor} from './ResizeSensor.js'\nimport {Events} from \"./Events.js\";\nconst $ = jQuery;\n\nexport class Controller {\n    containers: {\n        main: HTMLElement,\n        view?: HTMLElement,\n        toolbar?: HTMLElement\n        contentWrap?: HTMLElement,\n        contentWrap2?: HTMLElement,\n        contentView?: HTMLElement,\n        sizer?: HTMLElement,\n    }\n    mapsvg: MapSVGMap;\n    name: string;\n    template: Function;\n    scrollable: boolean;\n    withToolbar: boolean;\n    autoresize: boolean;\n    templates: {\n        toolbar: Function,\n        main: Function\n    };\n    data: {[key: string]: any};\n    width: string;\n    color: string;\n    // container: HTMLElement;\n    // contentWrap: HTMLElement;\n    // contentWrap2: HTMLElement;\n    // view: HTMLElement;\n    // contentView: HTMLElement;\n    // contentSizer: HTMLElement;\n    // toolbarView: HTMLElement;\n    resizeSensor: ResizeSensor;\n    noPadding: boolean;\n    events: Events;\n\n    constructor(options: {[key: string]: any}) {\n        this.containers = {\n            main: options.container\n        };\n        this.mapsvg = options.mapsvg;\n        this.template = options.template;\n        this.scrollable = options.scrollable === undefined ? true : options.scrollable;\n        this.withToolbar = options.withToolbar === undefined ? true : options.withToolbar;\n        this.autoresize = MapSVG.parseBoolean(options.autoresize);\n        this.templates = {\n            toolbar: Handlebars.compile(this.getToolbarTemplate()),\n            main: this.getMainTemplate()\n        };\n        this.data = options.data;\n        this.width = options.width;\n        this.color = options.color;\n        this.events = new Events(this);\n        if (options.events) {\n            for (let eventName in options.events) {\n                if (typeof options.events[eventName] === 'function') {\n                    this.events.on(eventName, options.events[eventName]);\n                }\n            }\n        }\n        //this._init();\n    }\n\n    /**\n     * This method fires when the view is fully loaded. Can be used to do any final actions.\n     * @method\n     */\n    viewDidLoad() {\n        var _this = this;\n        _this.updateScroll();\n        if (this.autoresize) {\n            _this.adjustHeight();\n            this.resizeSensor.setScroll();\n        }\n    }\n\n    /**\n     * This method cannot be overriden and it fires always for all child classes.\n     * @private\n     */\n    _viewDidLoad() {\n        this.updateScroll();\n    }\n\n    /**\n     * Fires when the view appears after being hidden.\n     * Should be overriden by a child class.\n     * @abstract\n     */\n    viewDidAppear() {}\n\n    /**\n     * This method fires when the view disappears.\n     * Should be overriden by a child class.\n     * @abstract\n     */\n    viewDidDisappear() {}\n\n    /**\n     * Updates the size of the scrollable container. Automatically fires when window size or content size changes.\n     */\n    updateScroll() {\n        if (!this.scrollable)\n            return;\n        var _this = this;\n        $(this.containers.contentWrap).nanoScroller({preventPageScrolling: true, iOSNativeScrolling: true});\n        setTimeout(function () {\n            $(_this.containers.contentWrap).nanoScroller({preventPageScrolling: true, iOSNativeScrolling: true});\n        }, 300);\n    }\n\n    /**\n     * Adjusts height of the container to fit content.\n     */\n    adjustHeight() {\n        var _this = this;\n        $(_this.containers.main).height($(_this.containers.main).find('.mapsvg-auto-height').outerHeight() + (_this.containers.toolbar ? $(_this.containers.toolbar).outerHeight() : 0));\n    }\n\n    /**\n     * Initialization actions for all child classes. Should not be overriden.\n     * @private\n     */\n    _init() {\n        var _this = this;\n        _this.render();\n        _this.init();\n    }\n\n    /**\n     * Initialization actions. Empty method. Can be overriden by child classes.\n     */\n    init() {}\n\n    /**\n     * This method must be overriden by a child class and return an HTML code for the toolbar.\n     */\n    getToolbarTemplate() {\n        return '';\n    }\n\n    /**\n     * This method must be overriden by a child class and  to return an HTML code for the main content\n     */\n    getMainTemplate() {\n        return this.template;\n    }\n\n    /**\n     * Renders the content.\n     */\n    render() {\n\n        var _this = this;\n        this.containers.view = $('<div />').attr('id', 'mapsvg-controller-' + this.name).addClass('mapsvg-controller-view')[0];\n\n        // Wrap cointainer, includes scrollable container\n        this.containers.contentWrap = $('<div />').addClass('mapsvg-controller-view-wrap')[0];\n        this.containers.contentWrap2 = $('<div />')[0];\n\n        // Scrollable container\n        this.containers.sizer = $('<div />').addClass('mapsvg-auto-height')[0];\n        this.containers.contentView = $('<div />').addClass('mapsvg-controller-view-content')[0];\n        this.containers.sizer.appendChild(this.containers.contentView);\n\n        if (this.scrollable) {\n            $(this.containers.contentWrap).addClass('nano');\n            $(this.containers.contentWrap2).addClass('nano-content');\n        }\n        this.containers.contentWrap.appendChild(this.containers.contentWrap2);\n        this.containers.contentWrap2.appendChild(this.containers.sizer);\n\n        // Add toolbar if it exists in template file\n        if (this.withToolbar && this.templates.toolbar) {\n            this.containers.toolbar = $('<div />').addClass('mapsvg-controller-view-toolbar')[0];\n            this.containers.view.appendChild(this.containers.toolbar);\n        }\n\n        this.containers.view.append(this.containers.contentWrap);\n\n        // Add view into container\n        this.containers.main.appendChild(this.containers.view);\n        $(this.containers.main).data('controller', this);\n\n        if (this.width)\n            this.containers.view.style.width = this.width;\n        if (this.color)\n            this.containers.view.style['background-color'] = this.color;\n\n        _this.viewReadyToFill();\n        this.redraw();\n\n        setTimeout(function () {\n            _this._viewDidLoad();\n            _this.viewDidLoad();\n            _this.setEventHandlersCommon();\n            _this.setEventHandlers();\n        }, 1);\n    }\n\n    /**\n     * Fires right before rendering starts.\n     */\n    viewReadyToFill() {\n        var _this = this;\n        if (_this.autoresize) {\n            _this.resizeSensor = new ResizeSensor(this.containers.sizer[0], function () {\n                _this.adjustHeight();\n                _this.updateScroll();\n                _this.events.trigger('resize', _this, [_this.mapsvg]);\n            });\n        }\n    }\n\n    /**\n     * Redraws the container.\n     */\n    redraw(data?: {[key: string]: any}) {\n\n        if (data !== undefined) {\n            this.data = data;\n        }\n\n        try {\n            $(this.containers.contentView).html(this.templates.main(this.data));\n        } catch (err) {\n            console.error(err);\n            $(this.containers.contentView).html(\"\");\n        }\n\n        if (this.withToolbar && this.templates.toolbar)\n            $(this.containers.toolbar).html(this.templates.toolbar(this.data));\n\n        this.updateTopShift();\n\n        if (this.noPadding)\n            this.containers.contentView.style.padding = '0';\n\n        this.updateScroll();\n    }\n\n    /**\n     * Updates top shift of the main container depending on toolbar height\n     */\n    updateTopShift() {\n        var _this = this;\n        if (!this.withToolbar)\n            return;\n        // bad, i know.\n        $(_this.containers.contentWrap).css({'top': $(_this.containers.toolbar).outerHeight(true) + 'px'});\n        setTimeout(function () {\n            $(_this.containers.contentWrap).css({'top': $(_this.containers.toolbar).outerHeight(true) + 'px'});\n        }, 100);\n        setTimeout(function () {\n            $(_this.containers.contentWrap).css({'top': $(_this.containers.toolbar).outerHeight(true) + 'px'});\n        }, 200);\n        setTimeout(function () {\n            $(_this.containers.contentWrap).css({'top': $(_this.containers.toolbar).outerHeight(true) + 'px'});\n            _this.updateScroll();\n        }, 500);\n\n    };\n\n    /**\n     * Set common event handlers for all child classes\n     */\n    setEventHandlersCommon() {}\n\n    /**\n     * Set event handlers. Can be overriden by a child class.\n     */\n    setEventHandlers(){}\n\n    /**\n     * Destroys the controller.\n     */\n    destroy() {\n        delete this.resizeSensor;\n        $(this.containers.view).empty().remove();\n    }\n}","/**\n * Creates a container with a list of objects near the map\n * @class\n * @extends Controller\n * @param options - List of options\n *\n * @example\n * var directory = mapsvg.controllers.directory;\n *\n *  // Toggle map/list view on mobile devices\n * if(MapSVG.isPhone){\n *   directory.toggle(true); // show directory\n * }\n */\nimport {Controller} from \"../Core/Controller.js\";\nimport {MapSVG} from \"../Core/globals.js\";\nimport {RepositoryInterface} from \"../Core/Repository.js\";\nimport {CustomObject} from \"../Object/CustomObject.js\";\nimport {Region} from \"../Region/Region.js\";\nconst $ = jQuery;\n\nexport class DirectoryController extends Controller {\n\n    repository: RepositoryInterface;\n    position: string;\n    search: string;\n    menuBtn: HTMLElement;\n    mapBtn: HTMLElement;\n    mobileButtons: HTMLElement;\n\n    constructor(options: {[key: string]: any}) {\n        super(options);\n        this.repository = options.repository;\n        this.noPadding = true;\n        this.position = options.position;\n        this.search = options.search;\n        //this._init();\n    }\n\n    /**\n     * Returns a HTML content for the Directory toolbar\n     * @returns {string} HTML content\n     */\n    getToolbarTemplate() {\n        var t = '<div class=\"mapsvg-directory-search-wrap\">';\n        t += '<div class=\"mapsvg-directory-filter-wrap filter-wrap\"></div>';\n        t += '</div>';\n        t += '</div>';\n        return t;\n    };\n\n    /**\n     * Does all required actions when the view is loaded: adds mobile buttons for mobile devices.\n     * @private\n     */\n    viewDidLoad() {\n\n        var _this = this;\n        this.menuBtn = $('<div class=\"mapsvg-button-menu\"><i class=\"mapsvg-icon-menu\"></i> ' + this.mapsvg.options.mobileView.labelList + '</div>')[0];\n        this.mapBtn = $('<div class=\"mapsvg-button-map\"><i class=\"mapsvg-icon-map\"></i> ' + this.mapsvg.options.mobileView.labelMap + '</div>')[0];\n\n        // Make directory hidden by default on mobiles\n        if (MapSVG.isPhone && _this.mapsvg.options.menu.hideOnMobile) {\n            if (this.mapsvg.options.menu.showFirst == 'map') {\n                this.toggle(false);\n            } else {\n                this.toggle(true);\n            }\n        }\n\n        this.mobileButtons = $('<div class=\"mapsvg-mobile-buttons\"></div>')[0];\n        this.mobileButtons.append(this.menuBtn, this.mapBtn);\n\n        if (this.mapsvg.options.menu.on !== false){\n            this.mapsvg.containers.wrapAll.appendChild(this.mobileButtons);\n        }\n\n        this.events.trigger('shown', this.containers.view);\n    };\n\n\n    setEventHandlers() {\n\n        var _this = this;\n\n        $(window).on('resize', function () {\n            _this.updateTopShift();\n        });\n\n        $(this.menuBtn).on('click', function () {\n            _this.toggle(true);\n        });\n        $(this.mapBtn).on('click', function () {\n            _this.toggle(false);\n            _this.mapsvg.redraw();\n        });\n\n        $(this.containers.view).on('click.menu.mapsvg', '.mapsvg-directory-item', function (e) {\n            e.preventDefault();\n\n            var objID = $(this).data('object-id');\n\n            var regions;\n            var marker;\n            var detailsViewObject;\n            var eventObject;\n\n            _this.deselectItems();\n            _this.selectItems(objID);\n\n            if (MapSVG.isPhone && _this.mapsvg.options.menu.showMapOnClick) {\n                _this.toggle(false);\n            }\n\n\n            if (_this.mapsvg.options.menu.source == 'regions') {\n                regions = [_this.mapsvg.getRegion(objID)];\n                eventObject = regions[0];\n                detailsViewObject = regions[0];\n            } else {\n                detailsViewObject = _this.repository.getLoadedObject(objID);\n                eventObject = detailsViewObject;\n                var _regions = detailsViewObject.getRegions(_this.mapsvg.regionsRepository.schema.name);\n                if (_regions) {\n                    regions = _regions.map(function (region) {\n                        return _this.mapsvg.getRegion(region.id);\n                    }).filter(function (r) {\n                        return r !== undefined;\n                    });\n                }\n            }\n\n            if (detailsViewObject.location && detailsViewObject.location.marker)\n                marker = detailsViewObject.location.marker;\n\n            if (_this.mapsvg.options.actions.directoryItem.click.showDetails) {\n                _this.mapsvg.loadDetailsView(detailsViewObject);\n            }\n\n            if (regions && regions.length > 0) {\n\n                if (_this.mapsvg.options.actions.directoryItem.click.zoom) {\n                    _this.mapsvg.zoomTo(regions, _this.mapsvg.options.actions.directoryItem.click.zoomToLevel);\n                }\n\n                if (regions.length > 1) {\n                    _this.mapsvg.setMultiSelect(true);\n                }\n                regions.forEach(function (region) {\n\n                    var center = region.getCenter();\n                    e.clientX = center[0];\n                    e.clientY = center[1];\n\n                    if (_this.mapsvg.options.actions.directoryItem.click.selectRegion) {\n                        //region.setSelected(true);\n                        _this.mapsvg.selectRegion(region, true);\n                    }\n                    if (_this.mapsvg.options.actions.directoryItem.click.showRegionPopover) {\n                        if (_this.mapsvg.options.actions.directoryItem.click.zoom) {\n                            setTimeout(function () {\n                                _this.mapsvg.showPopover(region);\n                            }, 500);\n                        } else {\n                            _this.mapsvg.showPopover(region);\n                        }\n                    }\n                    if (_this.mapsvg.options.actions.directoryItem.click.fireRegionOnClick) {\n                        _this.mapsvg.events.trigger('click.region', region,[region]);\n                    }\n                });\n                if (regions.length > 1) {\n                    _this.mapsvg.setMultiSelect(false, false);\n                }\n\n            }\n            if (marker) {\n                if (_this.mapsvg.options.actions.directoryItem.click.zoomToMarker) {\n                    _this.mapsvg.zoomTo(marker, _this.mapsvg.options.actions.directoryItem.click.zoomToMarkerLevel);\n                }\n                if (_this.mapsvg.options.actions.directoryItem.click.showMarkerPopover) {\n                    if (_this.mapsvg.options.actions.directoryItem.click.zoomToMarker) {\n                        setTimeout(function () {\n                            _this.mapsvg.showPopover(detailsViewObject);\n                        }, 500);\n                    } else {\n                        _this.mapsvg.showPopover(detailsViewObject);\n                    }\n                }\n                if (_this.mapsvg.options.actions.directoryItem.click.fireMarkerOnClick) {\n                    _this.mapsvg.events.trigger('click.marker', marker, [e, _this.mapsvg]);\n                }\n                _this.mapsvg.selectMarker(marker);\n            }\n\n            _this.events.trigger('click', this, [e, eventObject, _this.mapsvg]);\n\n            var actions = _this.mapsvg.options.actions;\n\n            if (actions.directoryItem.click.goToLink) {\n                var linkParts = actions.directoryItem.click.linkField.split('.');\n                var url;\n                if (linkParts.length > 1) {\n                    var obj = linkParts.shift();\n                    var attr = '.' + linkParts.join('.');\n                    if (obj == 'Region') {\n                        if (regions[0] && regions[0].data)\n                            url = eval('regions[0].data' + attr);\n                    } else {\n                        if (detailsViewObject)\n                            url = eval('detailsViewObject' + attr);\n                    }\n\n                    if (url) {\n                        if (actions.directoryItem.click.newTab) {\n                            var win = window.open(url, '_blank');\n                            win.focus();\n                        } else {\n                            window.location.href = url;\n                        }\n                    }\n                }\n            }\n            if (actions.directoryItem.click.showAnotherMap) {\n                if (_this.mapsvg.editMode) {\n                    alert('\"Show another map\" action is disabled in the preview');\n                    return true;\n                }\n                var linkParts2 = actions.directoryItem.click.showAnotherMapField.split('.');\n                if (linkParts2.length > 1) {\n                    var obj2 = linkParts2.shift();\n                    var attr2 = '.' + linkParts2.join('.');\n                    var map_id;\n                    if (obj2 == 'Region') {\n                        if (regions[0] && regions[0].data)\n                            map_id = eval('regions[0].data' + attr2);\n                    } else {\n                        if (detailsViewObject)\n                            map_id = eval('detailsViewObject' + attr2);\n                    }\n\n                    if (map_id) {\n                        var container = actions.directoryItem.click.showAnotherMapContainerId ? $('#' + actions.directoryItem.click.showAnotherMapContainerId)[0] : $(_this.mapsvg.containers.map)[0];\n                        _this.mapsvg.loadMap(map_id, container);\n                    }\n                }\n            }\n        }).on('mouseover.menu.mapsvg', '.mapsvg-directory-item', function (e) {\n\n            var objID = $(this).data('object-id');\n            var regions;\n            var detailsViewObject;\n            var eventObject;\n            var marker;\n\n            if (_this.mapsvg.options.menu.source == 'regions') {\n                regions = [_this.mapsvg.getRegion(objID)];\n                eventObject = regions[0];\n                detailsViewObject = regions[0];\n            } else {\n                detailsViewObject = _this.repository.getLoadedObject(objID)\n                eventObject = detailsViewObject;\n                var _regions = detailsViewObject.getRegions(_this.mapsvg.regionsRepository.schema.name);\n                if (_regions) {\n                    regions = _regions.map(function (region) {\n                        return _this.mapsvg.getRegion(region.id);\n                    });\n                }\n                if (detailsViewObject.location) {\n                    marker = detailsViewObject.location.marker;\n                }\n            }\n\n            if (regions && regions.length) {\n                _this.mapsvg.highlightRegions(regions);\n            }\n            if (marker) {\n                _this.mapsvg.highlightMarker(marker);\n                if (_this.mapsvg.options.actions.directoryItem.hover.centerOnMarker) {\n                    _this.mapsvg.centerOn(marker);\n                }\n            }\n            _this.events.trigger('mouseover', $(this), [e, eventObject, _this.mapsvg]);\n\n        }).on('mouseout.menu.mapsvg', '.mapsvg-directory-item', function (e) {\n\n            var objID = $(this).data('object-id');\n            var regions;\n            var detailsViewObject;\n            var eventObject;\n            var marker;\n\n            if (_this.mapsvg.options.menu.source == 'regions') {\n                regions = [_this.mapsvg.getRegion(objID)];\n                eventObject = regions[0];\n                detailsViewObject = regions[0];\n            } else {\n                detailsViewObject = _this.repository.getLoadedObject(objID)\n                eventObject = detailsViewObject;\n                var _regions = detailsViewObject.getRegions(_this.mapsvg.regionsRepository.schema.name);\n                if (_regions) {\n                    regions = _regions.map(function (region) {\n                        return _this.mapsvg.getRegion(region.id);\n                    });\n                }\n                if (detailsViewObject.location) {\n                    marker = detailsViewObject.location.marker;\n                }\n            }\n\n            if (regions && regions.length) {\n                _this.mapsvg.unhighlightRegions();\n            }\n            if (marker) {\n                _this.mapsvg.unhighlightMarker();\n            }\n            _this.events.trigger('mouseout', $(this), [e, eventObject, _this.mapsvg]);\n        });\n\n        $(this.containers.contentView).on('click', '.mapsvg-category-item', function () {\n\n            var panel = $(this).next('.mapsvg-category-block');\n\n            if (panel[0].style.maxHeight || panel.hasClass('active')) {\n                panel[0].style.maxHeight = null;\n            } else {\n                panel[0].style.maxHeight = panel[0].scrollHeight + \"px\";\n            }\n\n            if ($(this).hasClass('active')) {\n                $(this).toggleClass('active', false);\n                $(this).next('.mapsvg-category-block').addClass('collapsed').removeClass('active');\n            } else {\n                if (_this.mapsvg.options.menu.categories.collapseOther) {\n                    $(this).parent().find('.mapsvg-category-item.active').removeClass('active');\n                    $(this).parent().find('.mapsvg-category-block.active').removeClass('active').addClass('collapsed');\n                }\n                $(this).toggleClass('active', true);\n                $(this).next('.mapsvg-category-block').removeClass('collapsed').addClass('active');\n            }\n\n            var panels = $('.mapsvg-category-block.collapsed');\n            panels.each(function (i, panel) {\n                panel.style.maxHeight = null;\n            });\n\n        });\n\n\n    }\n\n    /**\n     * Highlights directory items\n     * @param {array} ids - A list of object IDs\n     */\n    highlightItems(ids) {\n        var _this = this;\n        if (typeof ids != 'object')\n            ids = [ids];\n        ids.forEach(function (id) {\n            $(_this.containers.view).find('#mapsvg-directory-item-' + id).addClass('hover');\n        });\n    }\n\n    /**\n     * Unhighlights directory items\n     */\n    unhighlightItems() {\n        $(this.containers.view).find('.mapsvg-directory-item').removeClass('hover');\n    }\n\n    /**\n     * Highlights directory items\n     * @param {array} ids - A list of object IDs\n     */\n    selectItems(ids) {\n        var _this = this;\n        if (typeof ids != 'object')\n            ids = [ids];\n        ids.forEach(function (id) {\n            $(_this.containers.view).find('#mapsvg-directory-item-' + id).addClass('selected');\n        });\n\n        if($('#mapsvg-directory-item-' + ids[0]).length > 0){\n            _this.scrollable && $(_this.containers.contentWrap).nanoScroller({scrollTo: $(_this.containers.view).find('#mapsvg-directory-item-' + ids[0])});\n        }\n    }\n\n    /**\n     * Deselects directory items\n     */\n    deselectItems() {\n        $(this.containers.view).find('.mapsvg-directory-item').removeClass('selected');\n    }\n\n    /**\n     * Remove items\n     */\n    removeItems(ids) {\n        $(this.containers.view).find('#mapsvg-directory-item-' + ids).remove();\n    }\n\n    /**\n     * Filter out directory items\n     */\n    filterOut(items) {\n\n        var _this = this;\n\n        // TODO filterout for regions must be done on the server side\n\n        // if (this.repository.table == 'regions') {\n        //\n        //     var f: {field: string, val: number|string};\n        //     f = {\n        //         field: '',\n        //         val: ''\n        //     };\n        //     if (_this.mapsvg.options.menu.filterout.field) {\n        //         f.field = _this.mapsvg.options.menu.filterout.field;\n        //         f.val = _this.mapsvg.options.menu.filterout.val;\n        //     }\n        //\n        //     items = items.filter(function (item) {\n        //         var ok = true;\n        //         var status = _this.mapsvg.options.regionStatuses;\n        //         if (status[item.status]) {\n        //             ok = !status[item.status].disabled;\n        //         }\n        //\n        //         if (ok && f.field) {\n        //             ok = (item[f.field] != f.val);\n        //         }\n        //         return ok;\n        //     });\n        // }\n\n        return items;\n    }\n\n    /**\n     * Loads items from a source defined in settings  to the directory. The source can be \"Regions\" or \"Database\".\n     */\n    loadItemsToDirectory() {\n\n        var items = [];\n        var _this = this;\n\n        if (!_this.repository.loaded) return false;\n\n        // If \"categories\" option is enabled, then:\n        if (_this.mapsvg.options.menu.categories && _this.mapsvg.options.menu.categories.on && _this.mapsvg.options.menu.categories.groupBy) {\n            // Get category field to group objects by\n            var categoryField = _this.mapsvg.options.menu.categories.groupBy;\n            // Get the list of categories\n            if (_this.repository.getSchema().getField(categoryField) === undefined || _this.repository.getSchema().getField(categoryField).options === undefined) {\n                return false;\n            }\n            var categories = _this.repository.getSchema().getField(categoryField).options;\n            // Get the list of items for every category\n            categories.forEach(function (category) {\n                var dbItems = _this.repository.getLoaded();\n                dbItems = _this.filterOut(dbItems);\n                let itemArr: Array<any> = [];\n                dbItems.forEach((item) => {\n                    itemArr.push(item);\n                });\n                var catItems = itemArr.filter(function (object) {\n                    if (categoryField === 'regions') {\n                        var objectRegions = (typeof object[categoryField] !== 'undefined' && object[categoryField].length) ? object[categoryField] : [];\n                            var objectRegionIDs = objectRegions.map(function(region){\n                            return region.id;\n                        });\n                        return objectRegionIDs.indexOf(category.id) !== -1;\n                    } else {\n                        return object[categoryField] == category.value;\n                    }\n                });\n                category.counter = catItems.length;\n                if (categoryField === 'regions') {\n                    category.label = category.title;\n                    category.value = category.id;\n                }\n\n                items.push({category: category, items: catItems});\n            });\n            // Filter out empty categories, if needed:\n            if (_this.mapsvg.options.menu.categories.hideEmpty) {\n                items = items.filter(function (item) {\n                    return item.category.counter > 0;\n                });\n            }\n\n        } else { // If categories are not enabled then just get the list of DB items:\n            if(_this.mapsvg.options.menu.source === 'regions'){\n                items = _this.repository.getLoaded().map(r => {\n                    let data = r.getData();\n                    data.objects = _this.mapsvg.getRegion(data.id).objects;\n                    return data;\n                });\n            } else {\n                items = _this.repository.getLoaded().map(r => r.getData(_this.mapsvg.regionsRepository.schema.name));;\n            }\n        }\n\n        try {\n            $(this.containers.contentView).html(this.templates.main({'items': items}));\n        } catch (err) {\n            console.error('MapSVG: Error in the \"Directory item\" template');\n            console.error(err);\n        }\n        if (items.length === 0) {\n            $(this.containers.contentView).html('<div class=\"mapsvg-no-results\">' + this.mapsvg.options.menu.noResultsText + '</div>');\n        }\n\n        if (_this.mapsvg.options.menu.categories.on) {\n            if (_this.mapsvg.options.menu.categories.collapse && items.length > 1) {\n                $(this.containers.contentView).find('.mapsvg-category-block').addClass('collapsed');\n            } else if (_this.mapsvg.options.menu.categories.collapse && items.length === 1) {\n                $(this.containers.contentView).find('.mapsvg-category-item').addClass('active');\n                $(this.containers.contentView).find('.mapsvg-category-block').addClass('active');\n                var panel = $(this.containers.contentView).find('.mapsvg-category-block')[0];\n                panel.style.maxHeight = panel.scrollHeight + \"px\";\n            } else if (!_this.mapsvg.options.menu.categories.collapse) {\n                $(this.containers.contentView).find('.mapsvg-category-item').addClass('active');\n                $(this.containers.contentView).find('.mapsvg-category-block').addClass('active');\n                var panels = $(this.containers.contentView).find('.mapsvg-category-block');\n                panels.each(function (i, panel) {\n                    panel.style.maxHeight = panel.scrollHeight + \"px\";\n                });\n            }\n        }\n        this.updateTopShift();\n        this.updateScroll();\n    }\n\n    /**\n     * Toggles view between map and directory on mobile devices\n     * @param {boolean} on - If \"true\", directory is shown and map is hidden, and vice-versa.\n     */\n    toggle(on?: boolean) {\n        var _this = this;\n        if (on) {\n            $(this.containers.main).parent().show();\n            $(_this.mapsvg.containers.mapContainer).hide();\n            // _this.mapsvg.$wrapAll.toggleClass('mapsvg-mobile-show-map', true);\n            // _this.mapsvg.$wrapAll.toggleClass('mapsvg-mobile-show-directory', ƒalse);\n            $(this.menuBtn).addClass('active');\n            $(this.mapBtn).removeClass('active');\n            // redraw?\n        } else {\n            $(this.containers.main).parent().hide();\n            $(_this.mapsvg.containers.mapContainer).show();\n            // _this.mapsvg.$wrapAll.toggleClass('mapsvg-mobile-show-map', false);\n            // _this.mapsvg.$wrapAll.toggleClass('mapsvg-mobile-show-directory', true);\n            $(this.menuBtn).removeClass('active');\n            $(this.mapBtn).addClass('active');\n        }\n\n        if (!$(this.containers.main).parent().is(':visible')) {\n            if (MapSVG.isPhone) {\n                $(_this.mapsvg.containers.wrap).css('height', 'auto');\n                _this.updateScroll();\n            }\n        } else {\n            if (MapSVG.isPhone && $(this.containers.main).height() < parseInt(this.mapsvg.options.menu.minHeight)) {\n                $(_this.mapsvg.containers.wrap).css('height', parseInt(this.mapsvg.options.menu.minHeight) + 'px');\n                _this.updateScroll();\n            }\n        }\n\n        this.updateTopShift();\n    }\n\n    /**\n     * Adds pagination buttons to the directory.\n     * @param {string} pager - HTML string with the buttons\n     */\n    addPagination(pager) {\n        $(this.containers.contentView).append('<div class=\"mapsvg-pagination-container\"></div>');\n        $(this.containers.contentView).find('.mapsvg-pagination-container').html(pager);\n    }\n}\n","/**\n * Details View controller. Large scrollable window with content and \"X\" close button\n * that can be placed in the map container, header/footer/sidebar or in a custom DIV container outside of the map.\n * @param {object} options\n * @extends Controller\n * @constructor\n */\nimport {MapSVG} from \"../Core/globals.js\";\nimport {Controller} from \"../Core/Controller\";\nconst $ = jQuery;\n\nexport class DetailsController extends Controller {\n\n    modal: boolean;\n    mobileCloseBtn: HTMLElement;\n\n    constructor(options: {[key: string]: any}) {\n        super(options);\n        this.modal = options.modal;\n        //this._init();\n    }\n\n    /**\n     * Returns toolbar for the Details View\n     * @returns {string}\n     * @private\n     */\n    getToolbarTemplate() {\n        if (this.withToolbar)\n            return '<div class=\"mapsvg-popover-close mapsvg-details-close\"></div>';\n        else\n            return '';\n    };\n\n    /**\n     * Fires when view is fully rendered. Intended for final actions.\n     * @private\n     */\n    viewDidLoad() {\n        var _this = this;\n        this.events.trigger('shown', _this, [_this.mapsvg]);\n        if (this.modal && MapSVG.isPhone && this.mapsvg.options.detailsView.mobileFullscreen && !this.mobileCloseBtn) {\n            this.mobileCloseBtn = $('<button class=\"mapsvg-mobile-modal-close mapsvg-btn\">' + _this.mapsvg.options.mobileView.labelClose + '</button>')[0];\n            this.containers.view.appendChild(this.mobileCloseBtn);\n        }\n    };\n\n    /**\n     * Sets event handlers\n     * @private\n     */\n    setEventHandlers() {\n        var _this = this;\n        $(this.containers.toolbar).on('click', '.mapsvg-popover-close, .mapsvg-mobile-modal-close', function (e) {\n            e.stopPropagation();\n            _this.destroy();\n            _this.events.trigger('closed', _this, [_this.mapsvg]);\n        });\n    }\n}\n","/// <reference path=\"../../../vendor/jquery-plugins.d.ts\" />\n\nimport {FormBuilder} from \"../FormBuilder\";\nimport {FormElementInterface} from \"./FormElementInterface\";\n// import {Handlebars} from \"../../../handlebars.js\"\n// @ts-ignore\nimport Handlebars from \"Handlebars\";\nimport {Events} from \"../../Core/Events\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class FormElement implements FormElementInterface {\n\n    name: string;\n    label: string;\n    type: string;\n    db_type: string;\n    value: any;\n    domElements: {\n        main?: HTMLElement,\n        edit?: HTMLElement,\n        // fields?: {[key:string]: HTMLInputElement},\n        [key:string]: HTMLElement\n    };\n    inputs: {[key:string]: HTMLInputElement|HTMLSelectElement|HTMLTextAreaElement|HTMLButtonElement};\n    templates: {\n        main?: Function;\n        edit?: Function;\n        [key: string]: Function;\n    };\n    formBuilder: FormBuilder;\n    searchable?: boolean;\n    options?: Array<any>;\n    optionsDict?: {[key: string]: any};\n    help?: string;\n    placeholder?: string;\n    parameterName?: string;\n    parameterNameShort?: string;\n    nameChanged: boolean;\n    visible?: boolean;\n    readonly?: boolean;\n    protected?: boolean;\n    auto_increment?: boolean;\n    not_null?: boolean;\n    external: {[key: string]: any};\n\n    mapIsGeo: boolean;\n    events: Events;\n    namespace: string;\n    editMode: boolean;\n    filtersMode: boolean;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n\n        this.readonly = typeof options.readonly !== 'undefined' ? options.readonly : false;\n        this.protected = typeof options.protected !== 'undefined' ? options.protected : false;\n        this.auto_increment = typeof options.auto_increment !== 'undefined' ? options.auto_increment : false;\n        this.not_null = typeof options.not_null !== 'undefined' ? options.not_null : false;\n        this.searchable = typeof options.searchable !== 'undefined' ? options.searchable : false;\n        this.visible = typeof options.visible !== 'undefined' ? options.visible : true;\n\n        this.formBuilder = formBuilder;\n        this.events = new Events(this);\n        this.type = options.type;\n        this.value = options.value;\n        this.db_type = options.db_type || 'varchar(255)';\n        this.label = this.label || (options.label === undefined ? 'Label' : options.label);\n        this.name = this.name || options.name || 'label';\n        this.help = options.help || '';\n        this.placeholder = options.placeholder;\n        // this.databaseFields = options.databaseFields;\n        // this.databaseFieldsFilterableShort = options.databaseFieldsFilterableShort;\n        // this.regionFields = options.regionFields;\n        this.mapIsGeo = external.mapIsGeo;\n        this.editMode = external.editMode;\n        this.filtersMode = external.filtersMode;\n        this.namespace = external.namespace;\n\n        this.external = external;\n\n        var t = this.type;\n        if (t === 'marker' && this.mapIsGeo) {\n            t = 'marker-geo';\n        }\n        if (t === 'location' && this.mapIsGeo) {\n            t = 'location-geo';\n        }\n\n        if (this.filtersMode) {\n            this.parameterName = options.parameterName || '';\n            this.parameterNameShort = this.parameterName.split('.')[1];\n            this.name = this.parameterNameShort;\n            this.placeholder = options.placeholder || '';\n            this.templates = {\n                main: Handlebars.compile($('#mapsvg-filters-tmpl-' + t + '-view').html())\n            };\n        } else {\n            this.templates = {\n                main: Handlebars.compile($('#mapsvg-data-tmpl-' + t + '-view').html())\n            };\n        }\n\n        this.inputs = {};\n\n    }\n\n    init(){\n        this.setDomElements();\n        this.setEventHandlers();\n    }\n\n    setDomElements(){\n        this.domElements = {\n            main: $(this.templates.main(this.getDataForTemplate()))[0]\n        };\n        // this.domElements.markerSelector = $(this.domElements.main).find(\".mapsvg-marker-image-selector\")[0];\n        $(this.domElements.main).data('formElement', this);\n        this.addSelect2();\n    }\n\n\n    setEventHandlers() {\n        var _this = this;\n        if (this.formBuilder.editMode) {\n            $(this.domElements.main).on('click', function () {\n                _this.events.trigger('click', _this, [_this]);\n            });\n        }\n    }\n\n    addSelect2(){\n        if ($().mselect2) {\n            $(this.domElements.main).find('select').css({width: '100%', display: 'block'})\n                .mselect2()\n                .on('select2:focus', function () {\n                    $(this).mselect2('open');\n                });\n            $(this.domElements.main).find('.select2-selection--multiple .select2-search__field').css('width', '100%');\n        }\n    }\n\n    setEditorEventHandlers() {\n        var _this = this;\n\n        $(this.domElements.edit).on('click', 'button.mapsvg-remove', function () {\n            $(_this.domElements.main).empty().remove();\n            $(_this.domElements.edit).empty().remove();\n            _this.events.trigger('delete', _this, [_this]);\n        });\n\n\n        $(this.domElements.edit).on('click', '.mapsvg-filter-insert-options', function () {\n            var objType = _this.parameterName.split('.')[0];\n            var fieldName = _this.parameterName.split('.')[1];\n            var field;\n            if (objType == 'Object') {\n                field = _this.formBuilder.mapsvg.objectsRepository.getSchema().getField(fieldName);\n            } else {\n                if (fieldName == 'id') {\n                    let options = [];\n                    _this.formBuilder.mapsvg.regions.forEach(function (r) {\n                        options.push({label: r.id, value: r.id});\n                    })\n                    field = {\n                        options: options\n                    };\n                } else if (fieldName == 'region_title') {\n                    let options = [];\n                    _this.formBuilder.mapsvg.regions.forEach(function (r) {\n                        options.push({label: r.title, value: r.title});\n                    });\n                    field = {options: options};\n                } else {\n                    field = _this.formBuilder.mapsvg.regionsRepository.getSchema().getField(fieldName);\n                }\n            }\n            if (field && field.options) {\n                var options;\n                if (fieldName == 'regions') {\n                    if (field.options[0].title && field.options[0].title.length)\n                        field.options.sort(function (a, b) {\n                            if (a.title < b.title)\n                                return -1;\n                            if (a.title > b.title)\n                                return 1;\n                            return 0;\n                        });\n                    options = field.options.map(function (o) {\n                        return (o.title || o.id) + ':' + o.id\n                    });\n                } else {\n                    options = field.options.map(function (o) {\n                        return o.label + ':' + o.value\n                    });\n                }\n                $(this).closest('.form-group').find('textarea').val(options.join(\"\\n\")).trigger('change');\n            }\n        });\n\n        $(this.domElements.edit).on('keyup change paste', 'input, textarea, select', function () {\n            var prop = $(this).attr('name');\n\n            var array = $(this).data('array');\n            if (_this.type === 'status' && array) {\n                var param = $(this).data('param');\n                var index = $(this).closest('tr').index();\n                _this.options[index] = _this.options[index] || {label: '', value: '', color: '', disabled: false};\n                _this.options[index][param] = $(this).is(':checkbox') ? $(this).prop('checked') : $(this).val();\n                _this.redraw();\n            } else if (_this.type === 'distance' && array) {\n                var param = $(this).data('param');\n                var index = $(this).closest('tr').index();\n                if (!_this.options[index]) {\n                    _this.options[index] = {value: '', default: false};\n                }\n                if (param === 'default') {\n                    _this.options.forEach(function (option) {\n                        option.default = false;\n                    });\n                    _this.options[index].default = $(this).prop('checked');\n                } else {\n                    _this.options[index].value = $(this).val();\n                }\n                _this.redraw();\n            } else if (prop == 'label' || prop == 'name') {\n                return false;\n            } else {\n                var value;\n                value = ($(this).attr('type') == 'checkbox') ? $(this).prop('checked') : $(this).val();\n                if ($(this).attr('type') == 'radio') {\n                    var name = $(this).attr('name');\n                    value = $('input[name=\"' + name + '\"]:checked').val();\n                }\n                _this.update(prop, value);\n            }\n        });\n\n        $(this.domElements.edit).on('keyup change paste', 'input[name=\"label\"]', function () {\n            if (!_this.nameChanged) {\n                // _this.update('name',str);\n                _this.label = $(this).val()+'';\n                if (_this.type != 'region' && _this.type != 'location') {\n                    var str = $(this).val()+'';\n                    str = str.toLowerCase().replace(/ /g, '_').replace(/\\W/g, '');\n                    $(_this.domElements.edit).find('input[name=\"name\"]').val(str);\n                    _this.name = str+'';\n                }\n                $(_this.domElements.main).find('label').first().html(_this.label);\n                if (!_this.filtersMode) {\n                    $(_this.domElements.main).find('label').first().append('<div class=\"field-name\">' + _this.name + '</div>');\n                }\n\n            }\n        });\n        $(this.domElements.edit).on('keyup change paste', 'input[name=\"name\"]', function () {\n            if (this.value) {\n                if (this.value.match(/[^a-zA-Z0-9_]/g)) {\n                    this.value = this.value.replace(/[^a-zA-Z0-9_]/g, '');\n                    $(this).trigger('change');\n                }\n                if (this.value[0].match(/[^a-zA-Z_]/g)) {\n                    this.value = this.value[0].replace(/[^a-zA-Z_]/g, '') + this.value.slice(1);\n                    $(this).trigger('change');\n                }\n            }\n            if (_this.type != 'region')\n                _this.name = this.value;\n            $(_this.domElements.main).find('label').html(_this.label + '<div class=\"field-name\">' + _this.name + '</div>');\n            _this.nameChanged = true;\n        });\n    };\n\n\n    getEditor() {\n\n        // if(!this.domElements.edit){\n        if (!this.filtersMode) {\n            this.templates.edit = this.templates.edit || Handlebars.compile($('#mapsvg-data-tmpl-' + this.type + '-control').html());\n        } else {\n            this.templates.edit = this.templates.edit || Handlebars.compile($('#mapsvg-filters-tmpl-' + this.type + '-control').html());\n        }\n        this.domElements.edit = $('<div>'+this.templates.edit(this.getDataForTemplate())+'</div>')[0];\n        // }\n        return this.domElements.edit;\n    };\n\n    destroyEditor() {\n        // this.domElements.edit.find('select').mselect2('destroy');\n        $(this.domElements.edit).empty().remove();\n    };\n\n    initEditor() {\n\n        $(this.domElements.edit).find('input').first().select();\n\n        if ($().mselect2) {\n            if(this.type !== 'distance'){\n                $(this.domElements.edit).find('select').css({width: '100%', display: 'block'}).mselect2();\n            }\n        }\n        $(this.domElements.edit).find('.mapsvg-onoff').bootstrapToggle({\n            onstyle: 'default',\n            offstyle: 'default'\n        });\n        this.setEditorEventHandlers();\n    };\n\n    getSchema(): {[key: string]: any} {\n\n        let data: {[key: string]: any};\n\n        data = {\n            type: this.type,\n            db_type: this.db_type,\n            label: this.label,\n            name: this.name,\n            value: this.value,\n            searchable: this.searchable,\n            help: this.help,\n            visible: this.visible === undefined ? true : this.visible,\n            readonly: this.readonly,\n            placeholder: this.placeholder,\n            protected: this.protected,\n            auto_increment: this.auto_increment,\n            not_null: this.not_null\n        };\n        if(this.options){\n            data.options = this.getSchemaFieldOptionsList();\n\n        }\n        if (this.filtersMode) {\n            data.parameterName = this.parameterName;\n            data.parameterNameShort = this.parameterName.split('.')[1];\n        }\n\n        return data;\n    };\n\n    getSchemaFieldOptionsList(): any[] {\n\n        let _this = this;\n        let options = [];\n        this.options.forEach((option, index) => {\n            if (this.options[index].value !== '') {\n                options.push(this.options[index]);\n                // this.options.splice(index, 1);\n            }\n        });\n\n        return options;\n    }\n\n    getDataForTemplate(): {[key: string]: any} {\n\n        var data = this.getSchema();\n\n        // Add namespace to names\n        data._name = data.name;\n        if (this.namespace) {\n            data.name = this.name.split('[')[0];\n            var suffix = this.name.split('[')[1] || '';\n            if (suffix)\n                suffix = '[' + suffix;\n            data.name = this.namespace + '[' + data.name + ']' + suffix\n        }\n\n        data.external = this.external;\n\n        return data;\n    };\n\n    update(prop, value) {\n        var _this = this;\n        if (prop == 'options') {\n            var options = [];\n            value = value.split(\"\\n\").forEach(function (row) {\n                row = row.trim().split(':');\n                if (_this.type == 'checkbox' && row.length == 3) {\n                    options.push({\n                        label: row[0],\n                        name: row[1],\n                        value: row[2]\n                    });\n                } else if ((_this.type == 'radio' || _this.type == 'select' || _this.type == 'checkboxes') && row.length == 2) {\n                    options.push({\n                        label: row[0],\n                        value: row[1]\n                    });\n                }\n            });\n            this.options = options;\n        } else {\n            this[prop] = value;\n        }\n        if (prop == 'parameterName') {\n            $(this.domElements.edit).find('.mapsvg-filter-param-name').text(value);\n        }\n        this.redraw();\n    };\n\n    addParams(params: {[key: string]: any}){\n\n    }\n\n    redraw() {\n        var _this = this;\n        var newView = $(this.templates.main(this.getDataForTemplate()));\n        $(this.domElements.main).html(newView.html());\n        if ($().mselect2) {\n            if (this.type !== 'distance') {\n                $(this.domElements.main).find('select').css({width: '100%', display: 'block'})\n                    .mselect2()\n                    .on('select2:focus', function () {\n                        $(this).mselect2('open');\n                    });\n            } else {\n                $(this.domElements.main).find('select').mselect2().on('select2:focus', function () {\n                    $(this).mselect2('open');\n                });\n            }\n        }\n        if ($().colorpicker) {\n            this.domElements.edit && $(this.domElements.edit).find('.cpicker').colorpicker().on('changeColor.colorpicker', function (event) {\n                var input = $(this).find('input');\n                if (input.val() == '')\n                    $(this).find('i').css({'background-color': ''});\n            });\n        }\n\n    }\n\n    setOptions(options?: any[]): any[]{\n\n        if(options){\n            this.options = [];\n            this.optionsDict = {};\n            options.forEach((value, key) => {\n                this.options.push(value);\n                this.optionsDict[key] = value;\n            });\n            return this.options;\n        } else {\n            return this.setOptions([\n                {label: 'Option one', name: 'option_one', value: 1},\n                {label: 'Option two', name: 'option_two', value: 2}\n            ]);\n        }\n\n    }\n\n    getData(): {name: string, value: any} {\n        return {name: this.name, value: this.value};\n    }\n\n    updateData(): void {};\n\n    destroy(): void {\n        if($().mselect2){\n            var sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                sel.mselect2('destroy');\n            }\n        }\n    }\n\n    show(): void {\n        $(this.domElements.main).show();\n    }\n\n    hide(): void {\n        $(this.domElements.main).hide();\n    }\n\n\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class CheckboxFormElement extends FormElement {\n\n    checkboxLabel: string;\n    checkboxValue: string;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.db_type = 'tinyint(1)';\n        this.checkboxLabel = options.checkboxLabel;\n        this.checkboxValue = options.checkboxValue;\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.checkbox = $(this.domElements.main).find('input')[0];\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.checkbox).on('change', (e)=>{\n            //@ts-ignore\n            this.value = e.target.checked;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        if (this.checkboxLabel) {\n            schema.checkboxLabel = this.checkboxLabel;\n        }\n        if (this.checkboxValue) {\n            schema.checkboxValue = this.checkboxValue;\n        }\n        return schema;\n    }\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\n// TODO add checkboxes to regions as well\n\nexport class CheckboxesFormElement extends FormElement {\n\n    checkboxLabel: string;\n    checkboxValue: string;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.db_type = 'text';\n        this.checkboxLabel = options.checkboxLabel;\n\n        this.setOptions(options.options);\n    }\n\n    setDomElements() {\n        super.setDomElements();\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.domElements.main).on('change', 'input', (e)=>{\n            var a = [];\n            $(this.domElements.main).find('input:checked').map((i, el)=>{ a.push(jQuery(el).attr('name')); });\n            this.value = a;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class DateFormElement extends FormElement {\n\n    languages: string[];\n    language: string;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        if (this.formBuilder.admin){\n            this.languages = ['en-GB', 'ar', 'az', 'bg', 'bs', 'ca', 'cs', 'cy', 'da', 'de', 'el', 'es', 'et', 'eu', 'fa', 'fi', 'fo', 'fr', 'gl', 'he', 'hr', 'hu', 'hy', 'id', 'is', 'it', 'ja', 'ka', 'kh', 'kk', 'kr', 'lt', 'lv', 'mk', 'ms', 'nb', 'nl', 'nl-BE', 'no', 'pl', 'pt-BR', 'pt', 'ro', 'rs', 'rs-latin', 'ru', 'sk', 'sl', 'sq', 'sr', 'sr-latin', 'sv', 'sw', 'th', 'tr', 'uk', 'vi', 'zh-CN', 'zh-TW'];\n        }\n        this.db_type = 'varchar(50)';\n        this.language = options.language;\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.date = $(this.domElements.main).find('input')[0];\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.date).on('change', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.language = this.language;\n        return schema;\n    }\n\n    getDataForTemplate(): { [p: string]: any } {\n        let data = super.getDataForTemplate();\n        if (this.formBuilder.admin)\n            data.languages = this.languages;\n        data.language = this.language;\n        return data;\n    }\n}","import {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {MapSVG} from \"../../Core/globals.js\";\n// @ts-ignore\nimport Bloodhound from \"Bloodhound\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nimport {Server} from \"../../Infrastructure/Server/Server\";\nconst $ = jQuery;\n\nexport class DistanceFormElement extends FormElement {\n\n    value: {\n        units: string,\n        latlng: {lat: string|number, lng: string|number},\n        length: string,\n        address: string,\n        country: string\n    };\n    distanceControl: string;\n    distanceUnits: string;\n    distanceUnitsLabel: string;\n    fromLabel: string;\n    placeholder: string;\n    userLocationButton: boolean;\n    addressField: boolean;\n    addressFieldPlaceholder: string;\n    languages: {[key: string]: string}[];\n    countries: string[];\n    country: string;\n    language: string;\n    searchByZip: boolean;\n    zipLength: number;\n    isGeo: boolean;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.name = 'distance';\n\n        this.label = this.label || (options.label === undefined ? 'Search radius' : options.label);\n        this.distanceControl = options.distanceControl || 'select';\n        this.distanceUnits = options.distanceUnits || 'km';\n        this.distanceUnitsLabel = options.distanceUnitsLabel || 'km';\n        this.fromLabel = options.fromLabel || 'from';\n        this.placeholder = options.placeholder;\n        this.userLocationButton = options.userLocationButton || false;\n        this.type = options.type;\n        this.addressField = options.addressField || true;\n        this.addressFieldPlaceholder = options.addressFieldPlaceholder || 'Address';\n        this.languages = [{\"value\": \"sq\", \"label\": \"Albanian\"}, {\"value\": \"ar\", \"label\": \"Arabic\"}, {\n            \"value\": \"eu\",\n            \"label\": \"Basque\"\n        }, {\"value\": \"be\", \"label\": \"Belarusian\"}, {\"value\": \"bg\", \"label\": \"Bulgarian\"}, {\n            \"value\": \"my\",\n            \"label\": \"Burmese\"\n        }, {\"value\": \"bn\", \"label\": \"Bengali\"}, {\"value\": \"ca\", \"label\": \"Catalan\"}, {\n            \"value\": \"zh-cn\",\n            \"label\": \"Chinese (simplified)\"\n        }, {\"value\": \"zh-tw\", \"label\": \"Chinese (traditional)\"}, {\n            \"value\": \"hr\",\n            \"label\": \"Croatian\"\n        }, {\"value\": \"cs\", \"label\": \"Czech\"}, {\"value\": \"da\", \"label\": \"Danish\"}, {\n            \"value\": \"nl\",\n            \"label\": \"Dutch\"\n        }, {\"value\": \"en\", \"label\": \"English\"}, {\n            \"value\": \"en-au\",\n            \"label\": \"English (australian)\"\n        }, {\"value\": \"en-gb\", \"label\": \"English (great Britain)\"}, {\n            \"value\": \"fa\",\n            \"label\": \"Farsi\"\n        }, {\"value\": \"fi\", \"label\": \"Finnish\"}, {\"value\": \"fil\", \"label\": \"Filipino\"}, {\n            \"value\": \"fr\",\n            \"label\": \"French\"\n        }, {\"value\": \"gl\", \"label\": \"Galician\"}, {\"value\": \"de\", \"label\": \"German\"}, {\n            \"value\": \"el\",\n            \"label\": \"Greek\"\n        }, {\"value\": \"gu\", \"label\": \"Gujarati\"}, {\"value\": \"iw\", \"label\": \"Hebrew\"}, {\n            \"value\": \"hi\",\n            \"label\": \"Hindi\"\n        }, {\"value\": \"hu\", \"label\": \"Hungarian\"}, {\"value\": \"id\", \"label\": \"Indonesian\"}, {\n            \"value\": \"it\",\n            \"label\": \"Italian\"\n        }, {\"value\": \"ja\", \"label\": \"Japanese\"}, {\"value\": \"kn\", \"label\": \"Kannada\"}, {\n            \"value\": \"kk\",\n            \"label\": \"Kazakh\"\n        }, {\"value\": \"ko\", \"label\": \"Korean\"}, {\"value\": \"ky\", \"label\": \"Kyrgyz\"}, {\n            \"value\": \"lt\",\n            \"label\": \"Lithuanian\"\n        }, {\"value\": \"lv\", \"label\": \"Latvian\"}, {\"value\": \"mk\", \"label\": \"Macedonian\"}, {\n            \"value\": \"ml\",\n            \"label\": \"Malayalam\"\n        }, {\"value\": \"mr\", \"label\": \"Marathi\"}, {\"value\": \"no\", \"label\": \"Norwegian\"}, {\n            \"value\": \"pl\",\n            \"label\": \"Polish\"\n        }, {\"value\": \"pt\", \"label\": \"Portuguese\"}, {\n            \"value\": \"pt-br\",\n            \"label\": \"Portuguese (brazil)\"\n        }, {\"value\": \"pt-pt\", \"label\": \"Portuguese (portugal)\"}, {\n            \"value\": \"pa\",\n            \"label\": \"Punjabi\"\n        }, {\"value\": \"ro\", \"label\": \"Romanian\"}, {\"value\": \"ru\", \"label\": \"Russian\"}, {\n            \"value\": \"sr\",\n            \"label\": \"Serbian\"\n        }, {\"value\": \"sk\", \"label\": \"Slovak\"}, {\"value\": \"sl\", \"label\": \"Slovenian\"}, {\n            \"value\": \"es\",\n            \"label\": \"Spanish\"\n        }, {\"value\": \"sv\", \"label\": \"Swedish\"}, {\"value\": \"tl\", \"label\": \"Tagalog\"}, {\n            \"value\": \"ta\",\n            \"label\": \"Tamil\"\n        }, {\"value\": \"te\", \"label\": \"Telugu\"}, {\"value\": \"th\", \"label\": \"Thai\"}, {\n            \"value\": \"tr\",\n            \"label\": \"Turkish\"\n        }, {\"value\": \"uk\", \"label\": \"Ukrainian\"}, {\"value\": \"uz\", \"label\": \"Uzbek\"}, {\n            \"value\": \"vi\",\n            \"label\": \"Vietnamese\"\n        }];\n        // @ts-ignore\n        this.countries = MapSVG.countries;\n        this.country = options.country;\n        this.language = options.language;\n        this.searchByZip = options.searchByZip;\n        this.zipLength = options.zipLength || 5;\n        this.userLocationButton = MapSVG.parseBoolean(options.userLocationButton);\n        this.options = options.options || [\n            {value: '10', default: true},\n            {value: '30', default: false},\n            {value: '50', default: false},\n            {value: '100', default: false}\n        ];\n\n        var selected = false;\n        if (this.value) {\n            this.options.forEach( (option) => {\n                if (option.value === this.value.length) {\n                    option.selected = true;\n                    selected = true;\n                }\n            });\n        }\n        if (!selected) {\n            this.options.forEach(function (option) {\n                if (option.default) {\n                    option.selected = true;\n                }\n            });\n        }\n        let defOption = this.options.find((opt) => opt.selected === true);\n        let length = defOption.value;\n        this.value = {\n            units: this.distanceUnits,\n            latlng: {lat: 0, lng: 0},\n            length: length,\n            address: '',\n            country: this.country\n        };\n\n    }\n\n    setDomElements() {\n        super.setDomElements();\n\n        this.inputs.units   = <HTMLInputElement>$(this.domElements.main).find('[name=\"distanceUnits\"]')[0];\n        this.inputs.latlng  = <HTMLInputElement>$(this.domElements.main).find('[name=\"distanceLatLng\"]')[0];\n        this.inputs.length  = <HTMLInputElement>$(this.domElements.main).find('[name=\"distanceLength\"]')[0];\n        this.inputs.address = <HTMLInputElement>$(this.domElements.main).find('[name=\"distanceAddress\"]')[0];\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.distanceControl = this.distanceControl;\n        schema.distanceUnits = this.distanceUnits;\n        schema.distanceUnitsLabel = this.distanceUnitsLabel;\n        schema.fromLabel = this.fromLabel;\n        schema.addressField = this.addressField;\n        schema.addressFieldPlaceholder = this.addressFieldPlaceholder;\n        schema.userLocationButton = this.userLocationButton;\n        schema.placeholder = this.placeholder;\n        schema.language = this.language;\n        schema.country = this.country;\n        schema.searchByZip = this.searchByZip;\n        schema.zipLength = this.zipLength;\n        schema.userLocationButton = MapSVG.parseBoolean(this.userLocationButton);\n        if (schema.distanceControl === 'none') {\n            schema.distanceDefault = schema.options.filter(function (o) {\n                return o.default;\n            })[0].value;\n        }\n\n        schema.options.forEach(function (option, index) {\n            if (schema.options[index].value === '') {\n                schema.options.splice(index, 1);\n            } else {\n                schema.options[index].default = MapSVG.parseBoolean(schema.options[index].default);\n                // data.optionsDict[option.value] = option;\n            }\n        });\n\n        return schema;\n    }\n\n    getDataForTemplate(): {[key: string]: any} {\n\n        let data = super.getDataForTemplate();\n\n        if (this.formBuilder.admin) {\n            data.languages = this.languages;\n            data.countries = this.countries;\n        }\n        data.language = this.language;\n        data.country = this.country;\n        data.searchByZip = this.searchByZip;\n        data.zipLength = this.zipLength;\n        data.userLocationButton = MapSVG.parseBoolean(this.userLocationButton);\n        return data;\n    }\n\n    destroy() {\n        if($().mselect2){\n            var sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                sel.mselect2('destroy');\n            }\n        }\n    }\n\n    initEditor() {\n        super.initEditor();\n        this.mayBeAddDistanceRow()\n        if ($().mselect2) {\n            $(this.domElements.edit).find('select').mselect2();\n        }\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        var _this = this;\n\n        $(this.domElements.edit).on('keyup change paste', '.mapsvg-edit-distance-row input', function () {\n            _this.mayBeAddDistanceRow();\n        });\n\n        let server = new Server();\n\n        // TODO check if distance filter is working:\n        // Google geocoding\n        var locations = new Bloodhound({\n            datumTokenizer: Bloodhound.tokenizers.obj.whitespace('formatted_address'),\n            queryTokenizer: Bloodhound.tokenizers.whitespace,\n            remote: {\n                url: server.getUrl('geocoding') + '?address='+(this.searchByZip===true?'zip%20':'')+'%QUERY%&language='+this.language+(this.country?'&country='+this.country:''),\n                wildcard: '%QUERY%',\n                transform: function (response) {\n                    if (response.error_message) {\n                        alert(response.error_message);\n                    }\n                    return response.results;\n                },\n                rateLimitWait: 600\n            }\n        });\n\n        var thContainer = $(this.domElements.main).find('.typeahead');\n\n        if (this.searchByZip) {\n            // var tH = thContainer.typeahead({minLength: this.zipLength, autoselect: true}, {\n            //     name: 'mapsvg-addresses',\n            //     source: locations,\n            //     display: 'formatted_address',\n            // });\n            $(this.domElements.main).find('.mapsvg-distance-fields').addClass('search-by-zip');\n            // thContainer.on('typeahead:asyncreceive',function(ev,query,dataset){\n            //     console.log(ev,query,dataset);\n            // });\n            thContainer.on('change keyup', function () {\n                if ($(this).val().toString().length === _this.zipLength) {\n                    locations.search($(this).val(), null, function (data) {\n                        if (data && data[0]) {\n                            var latlng = data[0].geometry.location\n                            _this.inputs.latlng.value = latlng.lat + ',' + latlng.lng;\n                            _this.value.latlng = {lat: latlng.lat, lng: latlng.lng};\n                            _this.events.trigger('changed');\n                        }\n                    });\n                }\n            });\n\n\n        } else {\n            // @ts-ignore\n            var tH = thContainer.typeahead({minLength: 3}, {\n                name: 'mapsvg-addresses',\n                display: 'formatted_address',\n                source: locations,\n                limit: 5\n            });\n            $(this.domElements.main).find('.mapsvg-distance-fields').removeClass('search-by-zip');\n        }\n\n        if (_this.userLocationButton) {\n            var userLocationButton = $(this.domElements.main).find('.user-location-button');\n            userLocationButton.on('click', function () {\n                _this.formBuilder.mapsvg.showUserLocation(function (location) {\n                    locations.search(location.lat + ',' + location.lng, null, function (data) {\n                        if (data && data[0]) {\n                            thContainer.val(data[0].formatted_address);\n                        } else {\n                            thContainer.val(location.lat + ',' + location.lng);\n                        }\n                    });\n                    _this.inputs.latlng.value = location.lat + ',' + location.lng;\n                    _this.events.trigger('changed');\n                });\n            });\n        }\n\n        thContainer.on('change keyup', function () {\n            if ($(this).val() === '') {\n                _this.inputs.latlng.value = '';\n                _this.events.trigger('changed', this, [this]);\n            }\n        });\n        thContainer.on('typeahead:select', function (ev, item) {\n            let address: { [key: string]: any };\n            address = {};\n            address.formatted = item.formatted_address;\n            var latlng = item.geometry.location;\n            _this.inputs.latlng.value = latlng.lat + ',' + latlng.lng;\n            _this.value.latlng = {lat: latlng.lat, lng: latlng.lng};\n            _this.events.trigger('changed');\n            thContainer.blur();\n        });\n\n        $(this.inputs.latlng).on('change', function(){\n            let latlng = this.value.split(',');\n            _this.value.latlng = {lat: latlng[0], lng: latlng[1]};\n\n            _this.events.trigger('changed');\n        });\n        $(this.inputs.length).on('change', function(){\n            _this.value.length = this.value;\n            _this.events.trigger('changed');\n        });\n\n    }\n\n    addSelect2() {\n        if ($().mselect2) {\n            $(this.domElements.main).find('select').mselect2().on('select2:focus', function () {\n                $(this).mselect2('open');\n            });\n        }\n    }\n\n    mayBeAddDistanceRow() {\n        var _this = this;\n        let editDistanceRow = $($('#mapsvg-edit-distance-row').html());\n        // if there's something in the last status edit field, add +1 status row\n        var z = $(_this.domElements.edit).find('.mapsvg-edit-distance-row:last-child input');\n        if(z && z.last() && z.last().val() && z.last().val().toString().trim().length){\n            var newRow = editDistanceRow.clone();\n            newRow.insertAfter($(_this.domElements.edit).find('.mapsvg-edit-distance-row:last-child'));\n        }\n        var rows = $(_this.domElements.edit).find('.mapsvg-edit-distance-row');\n        var row1 = rows.eq( rows.length-2 );\n        var row2 = rows.eq( rows.length-1 );\n\n        if( row1.length && row2.length && !row1.find('input:eq(0)').val().toString().trim() && !row2.find('input:eq(0)').val().toString().trim()) {\n            row2.remove();\n        }\n    };\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class EmptyFormElement extends FormElement {\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.readonly = true;\n    }\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\n\nexport class IdFormElement extends FormElement {\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n    }\n\n    getData(): any {\n        return {name: 'id', value: this.value};\n    }\n}","/**!\n * Sortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n(function sortableModule(factory) {\n    \"use strict\";\n\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    }\n    else if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n        module.exports = factory();\n    }\n    else if (typeof Package !== \"undefined\") {\n        //noinspection JSUnresolvedVariable\n        Sortable = factory();  // export for Meteor.js\n    }\n    else {\n        /* jshint sub:true */\n        window[\"Sortable\"] = factory();\n    }\n})(function sortableFactory() {\n    \"use strict\";\n\n    if (typeof window == \"undefined\" || !window.document) {\n        return function sortableError() {\n            throw new Error(\"Sortable.js requires a window with a document\");\n        };\n    }\n\n    var dragEl,\n        parentEl,\n        ghostEl,\n        cloneEl,\n        rootEl,\n        nextEl,\n\n        scrollEl,\n        scrollParentEl,\n        scrollCustomFn,\n\n        lastEl,\n        lastCSS,\n        lastParentCSS,\n\n        oldIndex,\n        newIndex,\n\n        activeGroup,\n        putSortable,\n\n        autoScroll = {},\n\n        tapEvt,\n        touchEvt,\n\n        moved,\n\n        /** @const */\n        RSPACE = /\\s+/g,\n\n        expando = 'Sortable' + (new Date).getTime(),\n\n        win = window,\n        document = win.document,\n        parseInt = win.parseInt,\n\n        $ = win.jQuery || win.Zepto,\n        Polymer = win.Polymer,\n\n        supportDraggable = !!('draggable' in document.createElement('div')),\n        supportCssPointerEvents = (function (el) {\n            // false when IE11\n            if (!!navigator.userAgent.match(/Trident.*rv[ :]?11\\./)) {\n                return false;\n            }\n            el = document.createElement('x');\n            el.style.cssText = 'pointer-events:auto';\n            return el.style.pointerEvents === 'auto';\n        })(),\n\n        _silent = false,\n\n        abs = Math.abs,\n        min = Math.min,\n        slice = [].slice,\n\n        touchDragOverListeners = [],\n\n        _autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n            // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n            if (rootEl && options.scroll) {\n                var el,\n                    rect,\n                    sens = options.scrollSensitivity,\n                    speed = options.scrollSpeed,\n\n                    x = evt.clientX,\n                    y = evt.clientY,\n\n                    winWidth = window.innerWidth,\n                    winHeight = window.innerHeight,\n\n                    vx,\n                    vy,\n\n                    scrollOffsetX,\n                    scrollOffsetY\n                    ;\n\n                // Delect scrollEl\n                if (scrollParentEl !== rootEl) {\n                    scrollEl = options.scroll;\n                    scrollParentEl = rootEl;\n                    scrollCustomFn = options.scrollFn;\n\n                    if (scrollEl === true) {\n                        scrollEl = rootEl;\n\n                        do {\n                            if ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n                                (scrollEl.offsetHeight < scrollEl.scrollHeight)\n                            ) {\n                                break;\n                            }\n                            /* jshint boss:true */\n                        } while (scrollEl = scrollEl.parentNode);\n                    }\n                }\n\n                if (scrollEl) {\n                    el = scrollEl;\n                    rect = scrollEl.getBoundingClientRect();\n                    vx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n                    vy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n                }\n\n\n                if (!(vx || vy)) {\n                    vx = (winWidth - x <= sens) - (x <= sens);\n                    vy = (winHeight - y <= sens) - (y <= sens);\n\n                    /* jshint expr:true */\n                    (vx || vy) && (el = win);\n                }\n\n\n                if (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n                    autoScroll.el = el;\n                    autoScroll.vx = vx;\n                    autoScroll.vy = vy;\n\n                    clearInterval(autoScroll.pid);\n\n                    if (el) {\n                        autoScroll.pid = setInterval(function () {\n                            scrollOffsetY = vy ? vy * speed : 0;\n                            scrollOffsetX = vx ? vx * speed : 0;\n\n                            if ('function' === typeof(scrollCustomFn)) {\n                                return scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt);\n                            }\n\n                            if (el === win) {\n                                win.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);\n                            } else {\n                                el.scrollTop += scrollOffsetY;\n                                el.scrollLeft += scrollOffsetX;\n                            }\n                        }, 24);\n                    }\n                }\n            }\n        }, 30),\n\n        _prepareGroup = function (options) {\n            function toFn(value, pull) {\n                if (value === void 0 || value === true) {\n                    value = group.name;\n                }\n\n                if (typeof value === 'function') {\n                    return value;\n                } else {\n                    return function (to, from) {\n                        var fromGroup = from.options.group.name;\n\n                        return pull\n                            ? value\n                            : value && (value.join\n                                ? value.indexOf(fromGroup) > -1\n                                : (fromGroup == value)\n                        );\n                    };\n                }\n            }\n\n            var group = {};\n            var originalGroup = options.group;\n\n            if (!originalGroup || typeof originalGroup != 'object') {\n                originalGroup = {name: originalGroup};\n            }\n\n            group.name = originalGroup.name;\n            group.checkPull = toFn(originalGroup.pull, true);\n            group.checkPut = toFn(originalGroup.put);\n\n            options.group = group;\n        }\n        ;\n\n\n\n    /**\n     * @class  Sortable\n     * @param  {HTMLElement}  el\n     * @param  {Object}       [options]\n     */\n    function Sortable(el, options) {\n        if (!(el && el.nodeType && el.nodeType === 1)) {\n            throw 'Sortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n        }\n\n        this.el = el; // root element\n        this.options = options = _extend({}, options);\n\n\n        // Export instance\n        el[expando] = this;\n\n\n        // Default options\n        var defaults = {\n            group: Math.random(),\n            sort: true,\n            disabled: false,\n            store: null,\n            handle: null,\n            scroll: true,\n            scrollSensitivity: 30,\n            scrollSpeed: 10,\n            draggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n            ghostClass: 'sortable-ghost',\n            chosenClass: 'sortable-chosen',\n            dragClass: 'sortable-drag',\n            ignore: 'a, img',\n            filter: null,\n            animation: 0,\n            setData: function (dataTransfer, dragEl) {\n                dataTransfer.setData('Text', dragEl.textContent);\n            },\n            dropBubble: false,\n            dragoverBubble: false,\n            dataIdAttr: 'data-id',\n            delay: 0,\n            forceFallback: false,\n            fallbackClass: 'sortable-fallback',\n            fallbackOnBody: false,\n            fallbackTolerance: 0,\n            fallbackOffset: {x: 0, y: 0}\n        };\n\n\n        // Set default options\n        for (var name in defaults) {\n            !(name in options) && (options[name] = defaults[name]);\n        }\n\n        _prepareGroup(options);\n\n        // Bind all private methods\n        for (var fn in this) {\n            if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n                this[fn] = this[fn].bind(this);\n            }\n        }\n\n        // Setup drag mode\n        this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n        // Bind events\n        _on(el, 'mousedown', this._onTapStart);\n        _on(el, 'touchstart', this._onTapStart);\n\n        if (this.nativeDraggable) {\n            _on(el, 'dragover', this);\n            _on(el, 'dragenter', this);\n        }\n\n        touchDragOverListeners.push(this._onDragOver);\n\n        // Restore sorting\n        options.store && this.sort(options.store.get(this));\n    }\n\n\n    Sortable.prototype = /** @lends Sortable.prototype */ {\n        constructor: Sortable,\n\n        _onTapStart: function (/** Event|TouchEvent */evt) {\n            if(evt.target.tagName == 'i' || evt.target.tagName == 'I'){\n                evt.target.click();\n                return;\n            }\n            var _this = this,\n                el = this.el,\n                options = this.options,\n                type = evt.type,\n                touch = evt.touches && evt.touches[0],\n                target = (touch || evt).target,\n                originalTarget = evt.target.shadowRoot && evt.path[0] || target,\n                filter = options.filter,\n                startIndex;\n\n            // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n            if (dragEl) {\n                return;\n            }\n\n            if (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n                return; // only left button or enabled\n            }\n\n            if (options.handle && !_closest(originalTarget, options.handle, el)) {\n                return;\n            }\n\n            target = _closest(target, options.draggable, el);\n\n            if (!target) {\n                return;\n            }\n\n            // Get the index of the dragged element within its parent\n            startIndex = _index(target, options.draggable);\n\n            // Check filter\n            if (typeof filter === 'function') {\n                if (filter.call(this, evt, target, this)) {\n                    _dispatchEvent(_this, originalTarget, 'filter', target, el, startIndex);\n                    evt.preventDefault();\n                    return; // cancel dnd\n                }\n            }\n            else if (filter) {\n                filter = filter.split(',').some(function (criteria) {\n                    criteria = _closest(originalTarget, criteria.trim(), el);\n\n                    if (criteria) {\n                        _dispatchEvent(_this, criteria, 'filter', target, el, startIndex);\n                        return true;\n                    }\n                });\n\n                if (filter) {\n                    evt.preventDefault();\n                    return; // cancel dnd\n                }\n            }\n\n            // Prepare `dragstart`\n            this._prepareDragStart(evt, touch, target, startIndex);\n        },\n\n        _prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target, /** Number */startIndex) {\n            var _this = this,\n                el = _this.el,\n                options = _this.options,\n                ownerDocument = el.ownerDocument,\n                dragStartFn;\n\n            if (target && !dragEl && (target.parentNode === el)) {\n                tapEvt = evt;\n\n                rootEl = el;\n                dragEl = target;\n                parentEl = dragEl.parentNode;\n                nextEl = dragEl.nextSibling;\n                activeGroup = options.group;\n                oldIndex = startIndex;\n\n                this._lastX = (touch || evt).clientX;\n                this._lastY = (touch || evt).clientY;\n\n                dragEl.style['will-change'] = 'transform';\n\n                dragStartFn = function () {\n                    // Delayed drag has been triggered\n                    // we can re-enable the events: touchmove/mousemove\n                    _this._disableDelayedDrag();\n\n                    // Make the element draggable\n                    dragEl.draggable = _this.nativeDraggable;\n\n                    // Chosen item\n                    _toggleClass(dragEl, options.chosenClass, true);\n\n                    // Bind the events: dragstart/dragend\n                    _this._triggerDragStart(touch);\n\n                    // Drag start event\n                    _dispatchEvent(_this, rootEl, 'choose', dragEl, rootEl, oldIndex);\n                };\n\n                // Disable \"draggable\"\n                options.ignore.split(',').forEach(function (criteria) {\n                    _find(dragEl, criteria.trim(), _disableDraggable);\n                });\n\n                _on(ownerDocument, 'mouseup', _this._onDrop);\n                _on(ownerDocument, 'touchend', _this._onDrop);\n                _on(ownerDocument, 'touchcancel', _this._onDrop);\n\n                if (options.delay) {\n                    // If the user moves the pointer or let go the click or touch\n                    // before the delay has been reached:\n                    // disable the delayed drag\n                    _on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n                    _on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n                    _on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n                    _on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n                    _on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\n                    _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n                } else {\n                    dragStartFn();\n                }\n            }\n        },\n\n        _disableDelayedDrag: function () {\n            var ownerDocument = this.el.ownerDocument;\n\n            clearTimeout(this._dragStartTimer);\n            _off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n            _off(ownerDocument, 'touchend', this._disableDelayedDrag);\n            _off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n            _off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n            _off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n        },\n\n        _triggerDragStart: function (/** Touch */touch) {\n            if (touch) {\n                // Touch device support\n                tapEvt = {\n                    target: dragEl,\n                    clientX: touch.clientX,\n                    clientY: touch.clientY\n                };\n\n                this._onDragStart(tapEvt, 'touch');\n            }\n            else if (!this.nativeDraggable) {\n                this._onDragStart(tapEvt, true);\n            }\n            else {\n                _on(dragEl, 'dragend', this);\n                _on(rootEl, 'dragstart', this._onDragStart);\n            }\n\n            try {\n                if (document.selection) {\n                    // Timeout neccessary for IE9\n                    setTimeout(function () {\n                        document.selection.empty();\n                    });\n                } else {\n                    window.getSelection().removeAllRanges();\n                }\n            } catch (err) {\n            }\n        },\n\n        _dragStarted: function () {\n            if (rootEl && dragEl) {\n                var options = this.options;\n\n                // Apply effect\n                _toggleClass(dragEl, options.ghostClass, true);\n                _toggleClass(dragEl, options.dragClass, false);\n\n                Sortable.active = this;\n\n                // Drag start event\n                _dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n            }\n        },\n\n        _emulateDragOver: function () {\n            if (touchEvt) {\n                if (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n                    return;\n                }\n\n                this._lastX = touchEvt.clientX;\n                this._lastY = touchEvt.clientY;\n\n                if (!supportCssPointerEvents) {\n                    _css(ghostEl, 'display', 'none');\n                }\n\n                var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n                    parent = target,\n                    i = touchDragOverListeners.length;\n\n                if (parent) {\n                    do {\n                        if (parent[expando]) {\n                            while (i--) {\n                                touchDragOverListeners[i]({\n                                    clientX: touchEvt.clientX,\n                                    clientY: touchEvt.clientY,\n                                    target: target,\n                                    rootEl: parent\n                                });\n                            }\n\n                            break;\n                        }\n\n                        target = parent; // store last element\n                    }\n                        /* jshint boss:true */\n                    while (parent = parent.parentNode);\n                }\n\n                if (!supportCssPointerEvents) {\n                    _css(ghostEl, 'display', '');\n                }\n            }\n        },\n\n\n        _onTouchMove: function (/**TouchEvent*/evt) {\n            if (tapEvt) {\n                var\toptions = this.options,\n                    fallbackTolerance = options.fallbackTolerance,\n                    fallbackOffset = options.fallbackOffset,\n                    touch = evt.touches ? evt.touches[0] : evt,\n                    dx = (touch.clientX - tapEvt.clientX) + fallbackOffset.x,\n                    dy = (touch.clientY - tapEvt.clientY) + fallbackOffset.y,\n                    translate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n                // only set the status to dragging, when we are actually dragging\n                if (!Sortable.active) {\n                    if (fallbackTolerance &&\n                        min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance\n                    ) {\n                        return;\n                    }\n\n                    this._dragStarted();\n                }\n\n                // as well as creating the ghost element on the document body\n                this._appendGhost();\n\n                moved = true;\n                touchEvt = touch;\n\n                _css(ghostEl, 'webkitTransform', translate3d);\n                _css(ghostEl, 'mozTransform', translate3d);\n                _css(ghostEl, 'msTransform', translate3d);\n                _css(ghostEl, 'transform', translate3d);\n\n                evt.preventDefault();\n            }\n        },\n\n        _appendGhost: function () {\n            if (!ghostEl) {\n                var rect = dragEl.getBoundingClientRect(),\n                    css = _css(dragEl),\n                    options = this.options,\n                    ghostRect;\n\n                ghostEl = dragEl.cloneNode(true);\n\n                _toggleClass(ghostEl, options.ghostClass, false);\n                _toggleClass(ghostEl, options.fallbackClass, true);\n                _toggleClass(ghostEl, options.dragClass, true);\n\n                _css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n                _css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n                _css(ghostEl, 'width', rect.width);\n                _css(ghostEl, 'height', rect.height);\n                _css(ghostEl, 'opacity', '0.8');\n                _css(ghostEl, 'position', 'fixed');\n                _css(ghostEl, 'zIndex', '100000');\n                _css(ghostEl, 'pointerEvents', 'none');\n\n                options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n                // Fixing dimensions.\n                ghostRect = ghostEl.getBoundingClientRect();\n                _css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n                _css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n            }\n        },\n\n        _onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n            var dataTransfer = evt.dataTransfer,\n                options = this.options;\n\n            this._offUpEvents();\n\n            if (activeGroup.checkPull(this, this, dragEl, evt) == 'clone') {\n                cloneEl = _clone(dragEl);\n                _css(cloneEl, 'display', 'none');\n                rootEl.insertBefore(cloneEl, dragEl);\n                _dispatchEvent(this, rootEl, 'clone', dragEl);\n            }\n\n            _toggleClass(dragEl, options.dragClass, true);\n\n            if (useFallback) {\n                if (useFallback === 'touch') {\n                    // Bind touch events\n                    _on(document, 'touchmove', this._onTouchMove);\n                    _on(document, 'touchend', this._onDrop);\n                    _on(document, 'touchcancel', this._onDrop);\n                } else {\n                    // Old brwoser\n                    _on(document, 'mousemove', this._onTouchMove);\n                    _on(document, 'mouseup', this._onDrop);\n                }\n\n                this._loopId = setInterval(this._emulateDragOver, 50);\n            }\n            else {\n                if (dataTransfer) {\n                    dataTransfer.effectAllowed = 'move';\n                    options.setData && options.setData.call(this, dataTransfer, dragEl);\n                }\n\n                _on(document, 'drop', this);\n                setTimeout(this._dragStarted, 0);\n            }\n        },\n\n        _onDragOver: function (/**Event*/evt) {\n            var el = this.el,\n                target,\n                dragRect,\n                targetRect,\n                revert,\n                options = this.options,\n                group = options.group,\n                activeSortable = Sortable.active,\n                isOwner = (activeGroup === group),\n                canSort = options.sort;\n\n            if (evt.preventDefault !== void 0) {\n                evt.preventDefault();\n                !options.dragoverBubble && evt.stopPropagation();\n            }\n\n            moved = true;\n\n            if (activeGroup && !options.disabled &&\n                (isOwner\n                        ? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n                        : (\n                        putSortable === this ||\n                        activeGroup.checkPull(this, activeSortable, dragEl, evt) && group.checkPut(this, activeSortable, dragEl, evt)\n                    )\n                ) &&\n                (evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n            ) {\n                // Smart auto-scrolling\n                _autoScroll(evt, options, this.el);\n\n                if (_silent) {\n                    return;\n                }\n\n                target = _closest(evt.target, options.draggable, el);\n                dragRect = dragEl.getBoundingClientRect();\n                putSortable = this;\n\n                if (revert) {\n                    _cloneHide(true);\n                    parentEl = rootEl; // actualization\n\n                    if (cloneEl || nextEl) {\n                        rootEl.insertBefore(dragEl, cloneEl || nextEl);\n                    }\n                    else if (!canSort) {\n                        rootEl.appendChild(dragEl);\n                    }\n\n                    return;\n                }\n\n\n                if ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n                    (el === evt.target) && (target = _ghostIsLast(el, evt))\n                ) {\n                    if (target) {\n                        if (target.animated) {\n                            return;\n                        }\n\n                        targetRect = target.getBoundingClientRect();\n                    }\n\n                    _cloneHide(isOwner);\n\n                    if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt) !== false) {\n                        if (!dragEl.contains(el)) {\n                            el.appendChild(dragEl);\n                            parentEl = el; // actualization\n                        }\n\n                        this._animate(dragRect, dragEl);\n                        target && this._animate(targetRect, target);\n                    }\n                }\n                else if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n                    if (lastEl !== target) {\n                        lastEl = target;\n                        lastCSS = _css(target);\n                        lastParentCSS = _css(target.parentNode);\n                    }\n\n                    targetRect = target.getBoundingClientRect();\n\n                    var width = targetRect.right - targetRect.left,\n                        height = targetRect.bottom - targetRect.top,\n                        floating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display)\n                            || (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n                        isWide = (target.offsetWidth > dragEl.offsetWidth),\n                        isLong = (target.offsetHeight > dragEl.offsetHeight),\n                        halfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n                        nextSibling = target.nextElementSibling,\n                        moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt),\n                        after\n                        ;\n\n                    if (moveVector !== false) {\n                        _silent = true;\n                        setTimeout(_unsilent, 30);\n\n                        _cloneHide(isOwner);\n\n                        if (moveVector === 1 || moveVector === -1) {\n                            after = (moveVector === 1);\n                        }\n                        else if (floating) {\n                            var elTop = dragEl.offsetTop,\n                                tgTop = target.offsetTop;\n\n                            if (elTop === tgTop) {\n                                after = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n                            }\n                            else if (target.previousElementSibling === dragEl || dragEl.previousElementSibling === target) {\n                                after = (evt.clientY - targetRect.top) / height > 0.5;\n                            } else {\n                                after = tgTop > elTop;\n                            }\n                        } else {\n                            after = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n                        }\n\n                        if (!dragEl.contains(el)) {\n                            if (after && !nextSibling) {\n                                el.appendChild(dragEl);\n                            } else {\n                                target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n                            }\n                        }\n\n                        parentEl = dragEl.parentNode; // actualization\n\n                        this._animate(dragRect, dragEl);\n                        this._animate(targetRect, target);\n                    }\n                }\n            }\n        },\n\n        _animate: function (prevRect, target) {\n            var ms = this.options.animation;\n\n            if (ms) {\n                var currentRect = target.getBoundingClientRect();\n\n                _css(target, 'transition', 'none');\n                _css(target, 'transform', 'translate3d('\n                    + (prevRect.left - currentRect.left) + 'px,'\n                    + (prevRect.top - currentRect.top) + 'px,0)'\n                );\n\n                target.offsetWidth; // repaint\n\n                _css(target, 'transition', 'all ' + ms + 'ms');\n                _css(target, 'transform', 'translate3d(0,0,0)');\n\n                clearTimeout(target.animated);\n                target.animated = setTimeout(function () {\n                    _css(target, 'transition', '');\n                    _css(target, 'transform', '');\n                    target.animated = false;\n                }, ms);\n            }\n        },\n\n        _offUpEvents: function () {\n            var ownerDocument = this.el.ownerDocument;\n\n            _off(document, 'touchmove', this._onTouchMove);\n            _off(ownerDocument, 'mouseup', this._onDrop);\n            _off(ownerDocument, 'touchend', this._onDrop);\n            _off(ownerDocument, 'touchcancel', this._onDrop);\n        },\n\n        _onDrop: function (/**Event*/evt) {\n            var el = this.el,\n                options = this.options;\n\n            clearInterval(this._loopId);\n            clearInterval(autoScroll.pid);\n            clearTimeout(this._dragStartTimer);\n\n            // Unbind events\n            _off(document, 'mousemove', this._onTouchMove);\n\n            if (this.nativeDraggable) {\n                _off(document, 'drop', this);\n                _off(el, 'dragstart', this._onDragStart);\n            }\n\n            this._offUpEvents();\n\n            if (evt) {\n                if (moved) {\n                    evt.preventDefault();\n                    !options.dropBubble && evt.stopPropagation();\n                }\n\n                ghostEl && ghostEl.parentNode.removeChild(ghostEl);\n\n                if (dragEl) {\n                    if (this.nativeDraggable) {\n                        _off(dragEl, 'dragend', this);\n                    }\n\n                    _disableDraggable(dragEl);\n                    dragEl.style['will-change'] = '';\n\n                    // Remove class's\n                    _toggleClass(dragEl, this.options.ghostClass, false);\n                    _toggleClass(dragEl, this.options.chosenClass, false);\n\n                    if (rootEl !== parentEl) {\n                        newIndex = _index(dragEl, options.draggable);\n\n                        if (newIndex >= 0) {\n\n                            // Add event\n                            _dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n                            // Remove event\n                            _dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\n                            // drag from one list and drop into another\n                            _dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n                            _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n                        }\n                    }\n                    else {\n                        // Remove clone\n                        cloneEl && cloneEl.parentNode.removeChild(cloneEl);\n\n                        if (dragEl.nextSibling !== nextEl) {\n                            // Get the index of the dragged element within its parent\n                            newIndex = _index(dragEl, options.draggable);\n\n                            if (newIndex >= 0) {\n                                // drag & drop within the same list\n                                _dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n                                _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n                            }\n                        }\n                    }\n\n                    if (Sortable.active) {\n                        /* jshint eqnull:true */\n                        if (newIndex == null || newIndex === -1) {\n                            newIndex = oldIndex;\n                        }\n\n                        _dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n                        // Save sorting\n                        this.save();\n                    }\n                }\n\n            }\n\n            this._nulling();\n        },\n\n        _nulling: function() {\n            rootEl =\n                dragEl =\n                    parentEl =\n                        ghostEl =\n                            nextEl =\n                                cloneEl =\n\n                                    scrollEl =\n                                        scrollParentEl =\n\n                                            tapEvt =\n                                                touchEvt =\n\n                                                    moved =\n                                                        newIndex =\n\n                                                            lastEl =\n                                                                lastCSS =\n\n                                                                    putSortable =\n                                                                        activeGroup =\n                                                                            Sortable.active = null;\n        },\n\n        handleEvent: function (/**Event*/evt) {\n            var type = evt.type;\n\n            if (type === 'dragover' || type === 'dragenter') {\n                if (dragEl) {\n                    this._onDragOver(evt);\n                    _globalDragOver(evt);\n                }\n            }\n            else if (type === 'drop' || type === 'dragend') {\n                this._onDrop(evt);\n            }\n        },\n\n\n        /**\n         * Serializes the item into an array of string.\n         * @returns {String[]}\n         */\n        toArray: function () {\n            var order = [],\n                el,\n                children = this.el.children,\n                i = 0,\n                n = children.length,\n                options = this.options;\n\n            for (; i < n; i++) {\n                el = children[i];\n                if (_closest(el, options.draggable, this.el)) {\n                    order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n                }\n            }\n\n            return order;\n        },\n\n\n        /**\n         * Sorts the elements according to the array.\n         * @param  {String[]}  order  order of the items\n         */\n        sort: function (order) {\n            var items = {}, rootEl = this.el;\n\n            this.toArray().forEach(function (id, i) {\n                var el = rootEl.children[i];\n\n                if (_closest(el, this.options.draggable, rootEl)) {\n                    items[id] = el;\n                }\n            }, this);\n\n            order.forEach(function (id) {\n                if (items[id]) {\n                    rootEl.removeChild(items[id]);\n                    rootEl.appendChild(items[id]);\n                }\n            });\n        },\n\n\n        /**\n         * Save the current sorting\n         */\n        save: function () {\n            var store = this.options.store;\n            store && store.set(this);\n        },\n\n\n        /**\n         * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n         * @param   {HTMLElement}  el\n         * @param   {String}       [selector]  default: `options.draggable`\n         * @returns {HTMLElement|null}\n         */\n        closest: function (el, selector) {\n            return _closest(el, selector || this.options.draggable, this.el);\n        },\n\n\n        /**\n         * Set/get option\n         * @param   {string} name\n         * @param   {*}      [value]\n         * @returns {*}\n         */\n        option: function (name, value) {\n            var options = this.options;\n\n            if (value === void 0) {\n                return options[name];\n            } else {\n                options[name] = value;\n\n                if (name === 'group') {\n                    _prepareGroup(options);\n                }\n            }\n        },\n\n\n        /**\n         * Destroy\n         */\n        destroy: function () {\n            var el = this.el;\n\n            el[expando] = null;\n\n            _off(el, 'mousedown', this._onTapStart);\n            _off(el, 'touchstart', this._onTapStart);\n\n            if (this.nativeDraggable) {\n                _off(el, 'dragover', this);\n                _off(el, 'dragenter', this);\n            }\n\n            // Remove draggable attributes\n            Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n                el.removeAttribute('draggable');\n            });\n\n            touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n            this._onDrop();\n\n            this.el = el = null;\n        }\n    };\n\n\n    function _cloneHide(state) {\n        if (cloneEl && (cloneEl.state !== state)) {\n            _css(cloneEl, 'display', state ? 'none' : '');\n            !state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);\n            cloneEl.state = state;\n        }\n    }\n\n\n    function _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n        if (el) {\n            ctx = ctx || document;\n\n            do {\n                if ((selector === '>*' && el.parentNode === ctx) || _matches(el, selector)) {\n                    return el;\n                }\n                /* jshint boss:true */\n            } while (el = _getParentOrHost(el));\n        }\n\n        return null;\n    }\n\n\n    function _getParentOrHost(el) {\n        var parent = el.host;\n\n        return (parent && parent.nodeType) ? parent : el.parentNode;\n    }\n\n\n    function _globalDragOver(/**Event*/evt) {\n        if (evt.dataTransfer) {\n            evt.dataTransfer.dropEffect = 'move';\n        }\n        evt.preventDefault();\n    }\n\n\n    function _on(el, event, fn) {\n        el.addEventListener(event, fn, false);\n    }\n\n\n    function _off(el, event, fn) {\n        el.removeEventListener(event, fn, false);\n    }\n\n\n    function _toggleClass(el, name, state) {\n        if (el) {\n            if (el.classList) {\n                el.classList[state ? 'add' : 'remove'](name);\n            }\n            else {\n                var className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');\n                el.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');\n            }\n        }\n    }\n\n\n    function _css(el, prop, val) {\n        var style = el && el.style;\n\n        if (style) {\n            if (val === void 0) {\n                if (document.defaultView && document.defaultView.getComputedStyle) {\n                    val = document.defaultView.getComputedStyle(el, '');\n                }\n                else if (el.currentStyle) {\n                    val = el.currentStyle;\n                }\n\n                return prop === void 0 ? val : val[prop];\n            }\n            else {\n                if (!(prop in style)) {\n                    prop = '-webkit-' + prop;\n                }\n\n                style[prop] = val + (typeof val === 'string' ? '' : 'px');\n            }\n        }\n    }\n\n\n    function _find(ctx, tagName, iterator) {\n        if (ctx) {\n            var list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n            if (iterator) {\n                for (; i < n; i++) {\n                    iterator(list[i], i);\n                }\n            }\n\n            return list;\n        }\n\n        return [];\n    }\n\n\n\n    function _dispatchEvent(sortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n        sortable = (sortable || rootEl[expando]);\n\n        var evt = document.createEvent('Event'),\n            options = sortable.options,\n            onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n        evt.initEvent(name, true, true);\n\n        evt.to = rootEl;\n        evt.from = fromEl || rootEl;\n        evt.item = targetEl || rootEl;\n        evt.clone = cloneEl;\n\n        evt.oldIndex = startIndex;\n        evt.newIndex = newIndex;\n\n        rootEl.dispatchEvent(evt);\n\n        if (options[onName]) {\n            options[onName].call(sortable, evt);\n        }\n    }\n\n\n    function _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvt) {\n        var evt,\n            sortable = fromEl[expando],\n            onMoveFn = sortable.options.onMove,\n            retVal;\n\n        evt = document.createEvent('Event');\n        evt.initEvent('move', true, true);\n\n        evt.to = toEl;\n        evt.from = fromEl;\n        evt.dragged = dragEl;\n        evt.draggedRect = dragRect;\n        evt.related = targetEl || toEl;\n        evt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\n        fromEl.dispatchEvent(evt);\n\n        if (onMoveFn) {\n            retVal = onMoveFn.call(sortable, evt, originalEvt);\n        }\n\n        return retVal;\n    }\n\n\n    function _disableDraggable(el) {\n        el.draggable = false;\n    }\n\n\n    function _unsilent() {\n        _silent = false;\n    }\n\n\n    /** @returns {HTMLElement|false} */\n    function _ghostIsLast(el, evt) {\n        var lastEl = el.lastElementChild,\n            rect = lastEl.getBoundingClientRect();\n\n        // 5 — min delta\n        // abs — нельзя добавлять, а то глюки при наведении сверху\n        return (\n                (evt.clientY - (rect.top + rect.height) > 5) ||\n                (evt.clientX - (rect.right + rect.width) > 5)\n            ) && lastEl;\n    }\n\n\n    /**\n     * Generate id\n     * @param   {HTMLElement} el\n     * @returns {String}\n     * @private\n     */\n    function _generateId(el) {\n        var str = el.tagName + el.className + el.src + el.href + el.textContent,\n            i = str.length,\n            sum = 0;\n\n        while (i--) {\n            sum += str.charCodeAt(i);\n        }\n\n        return sum.toString(36);\n    }\n\n    /**\n     * Returns the index of an element within its parent for a selected set of\n     * elements\n     * @param  {HTMLElement} el\n     * @param  {selector} selector\n     * @return {number}\n     */\n    function _index(el, selector) {\n        var index = 0;\n\n        if (!el || !el.parentNode) {\n            return -1;\n        }\n\n        while (el && (el = el.previousElementSibling)) {\n            if ((el.nodeName.toUpperCase() !== 'TEMPLATE') && (selector === '>*' || _matches(el, selector))) {\n                index++;\n            }\n        }\n\n        return index;\n    }\n\n    function _matches(/**HTMLElement*/el, /**String*/selector) {\n        if (el) {\n            selector = selector.split('.');\n\n            var tag = selector.shift().toUpperCase(),\n                re = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n            return (\n                (tag === '' || el.nodeName.toUpperCase() == tag) &&\n                (!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n            );\n        }\n\n        return false;\n    }\n\n    function _throttle(callback, ms) {\n        var args, _this;\n\n        return function () {\n            if (args === void 0) {\n                args = arguments;\n                _this = this;\n\n                setTimeout(function () {\n                    if (args.length === 1) {\n                        callback.call(_this, args[0]);\n                    } else {\n                        callback.apply(_this, args);\n                    }\n\n                    args = void 0;\n                }, ms);\n            }\n        };\n    }\n\n    function _extend(dst, src) {\n        if (dst && src) {\n            for (var key in src) {\n                if (src.hasOwnProperty(key)) {\n                    dst[key] = src[key];\n                }\n            }\n        }\n\n        return dst;\n    }\n\n    function _clone(el) {\n        return $\n            ? $(el).clone(true)[0]\n            : (Polymer && Polymer.dom\n                ? Polymer.dom(el).cloneNode(true)\n                : el.cloneNode(true)\n        );\n    }\n\n\n    // Export utils\n    Sortable.utils = {\n        on: _on,\n        off: _off,\n        css: _css,\n        find: _find,\n        is: function (el, selector) {\n            return !!_closest(el, selector, el);\n        },\n        extend: _extend,\n        throttle: _throttle,\n        closest: _closest,\n        toggleClass: _toggleClass,\n        clone: _clone,\n        index: _index\n    };\n\n\n    /**\n     * Create sortable instance\n     * @param {HTMLElement}  el\n     * @param {Object}      [options]\n     */\n    Sortable.create = function (el, options) {\n        return new Sortable(el, options);\n    };\n\n\n    // Export\n    Sortable.version = '1.4.2';\n    return Sortable;\n});","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport Sortable from \"../../../vendor/sortable/sortable.min.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class ImagesFormElement extends FormElement {\n\n    searchType: string;\n    images: {[key: string]: string}[];\n    mediaUploader: any;\n    button_text: string;\n    sortable: Sortable;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.searchType = options.searchType || 'fulltext';\n        this.mediaUploader = external.mediaUploader;\n\n        this.button_text = options.button_text || 'Browse...';\n        this.db_type = 'text';\n        this.label = options.label || 'Images';\n        this.name = options.name || 'images';\n\n        this.images = this.value || [];\n        this.value = JSON.stringify(this.value);\n    }\n\n    init(){\n        super.init();\n        this.redrawImages();\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        // this.domElements.btnUpload = <HTMLElement>$(this.domElements.main).find('.mapsvg-upload-image')[0];\n        // this.domElements.btnImageDelete = <HTMLElement>$(this.domElements.main).find('.mapsvg-upload-image')[0];\n        // this.inputs.text = <HTMLInputElement>$(this.domElements.main).find('input[type=\"text\"]')[0];\n    }\n\n    getData(): {name: string, value: any} {\n        this.updateData();\n        // if(this.images && this.images.length && this.images[0]!=null){\n        //     var newList = [];\n        //     $(this.domElements.main).find('.mapsvg-thumbnail-wrap').each(function(index, el){\n        //         var imageData = $(el).data('image');\n        //         newList.push(imageData);\n        //     });\n        //     this.images = newList;\n        //     // data[control.name] = data[control.name].concat(control.images);\n        // }\n        return {name: this.name, value: this.images};\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.button_text = this.button_text;\n        return schema;\n    }\n\n    updateData(){\n        let newListOfImages = [];\n\n        $(this.domElements.main).find('.mapsvg-thumbnail-wrap').each(function(index, el){\n            var imageData = $(el).data('image');\n            newListOfImages.push(imageData);\n        });\n        this.images = newListOfImages;\n        this.value = JSON.stringify(this.images);\n        $(this.domElements.main).find('input').val(this.value);\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        if(this.formBuilder.editMode){\n            return;\n        }\n\n        let _this = this;\n\n        var imageDOM = $(this.domElements.main).find('.mapsvg-data-images');\n\n        // When a file is selected, grab the URL and set it as the text field's value\n        this.external.mediaUploader.on('select', function () {\n            // if (_this.formBuilder.mediaUploaderFor !== _this)\n            //     return false;\n            var attachments = _this.external.mediaUploader.state().get('selection').toJSON();\n            attachments.forEach(function (img) {\n                let image: any;\n                image = {sizes: {}};\n                for (var type in img.sizes) {\n                    image[type] = img.sizes[type].url.replace('http://', '//').replace('https://', '//');\n                    image.sizes[type] = {width: img.sizes[type].width, height: img.sizes[type].height};\n                }\n                if (!image.thumbnail) {\n                    image.thumbnail = image.full;\n                    image.sizes.thumbnail = {width: img.sizes.full.width, height: img.sizes.full.height};\n                }\n                if (!image.medium) {\n                    image.medium = image.full;\n                    image.sizes.medium = {width: img.sizes.full.width, height: img.sizes.full.height};\n                }\n\n                // image.title = img.title;\n                image.caption = img.caption;\n                image.description = img.description;\n\n                _this.images.push(image);\n            });\n            _this.value = JSON.stringify(this.images);\n            _this.redrawImages();\n        });\n        $(_this.domElements.main).on('click', '.mapsvg-upload-image', function (e) {\n            e.preventDefault();\n            // Open the uploader dialog\n            // _this.formBuilder.mediaUploaderFor = _this;\n            _this.external.mediaUploader.open();\n        });\n        $(_this.domElements.main).on('click', '.mapsvg-image-delete', function (e) {\n            e.preventDefault();\n            $(this).closest('.mapsvg-thumbnail-wrap').remove();\n            _this.updateData();\n            // _this.images = [];\n            // $(_this.domElements.main).find('img').each(function (i, image) {\n            //     _this.images.push($(image).data('image'));\n            // });\n            // $(_this.domElements.main).find('input').val(JSON.stringify(_this.images));\n        });\n\n        _this.sortable = new Sortable(imageDOM[0], {\n            animation: 150,\n            onStart: function () {\n                $(_this.domElements.main).addClass('sorting');\n            },\n            onEnd: function (evt) {\n                _this.images = [];\n                $(_this.domElements.main).find('img').each(function (i, image) {\n                    _this.images.push($(image).data('image'));\n                });\n                this.value = JSON.stringify(_this.images);\n                $(_this.domElements.main).find('input').val(this.value);\n                $(_this.domElements.main).removeClass('sorting');\n            }\n        });\n    }\n\n    redrawImages() {\n        var _this = this;\n        var imageDOM = $(this.domElements.main).find('.mapsvg-data-images');\n        imageDOM.empty();\n        this.images && this.images.forEach(function (image) {\n            var img = $('<img class=\"mapsvg-data-thumbnail\" />').attr('src', image.thumbnail).data('image', image);\n            var imgContainer = $('<div class=\"mapsvg-thumbnail-wrap\"></div>').data('image', image);\n            imgContainer.append(img);\n            imgContainer.append('<i class=\"fa fa-times  mapsvg-image-delete\"></i>');\n            imageDOM.append(imgContainer);\n        });\n        $(this.domElements.main).find('input').val(this.value);\n    };\n\n}","import {MapSVG} from \"../../Core/globals.js\";\nimport {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {GeoPoint, Location} from \"../../Location/Location.js\";\nimport {Marker} from \"../../Marker/Marker.js\";\n// import {Handlebars} from \"../../../handlebars.js\";\n// @ts-ignore\nimport Handlebars from \"Handlebars\";\n// @ts-ignore\nimport Bloodhound from \"Bloodhound\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nimport {Server} from \"../../Infrastructure/Server/Server\";\n\nconst $ = jQuery;\n\nexport class LocationFormElement extends FormElement {\n\n    language: string;\n    markerImages: Array<string>;\n    markersByField: {[key: string]: any};\n    markerField: string;\n    markersByFieldEnabled: boolean;\n    location: Location;\n    marker: Marker;\n    languages: {label: string, value: string}[];\n    backupData?: {\n        location: Location,\n        Marker: Marker\n    }\n    isGeo: boolean;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.location = <Location>this.value;\n        this.label = this.label || (options.label === undefined ? 'Location' : options.label);\n        this.name = 'location';\n        this.db_type = 'text';\n        this.languages = [{\"value\": \"sq\", \"label\": \"Albanian\"}, {\"value\": \"ar\", \"label\": \"Arabic\"}, {\n            \"value\": \"eu\",\n            \"label\": \"Basque\"\n        }, {\"value\": \"be\", \"label\": \"Belarusian\"}, {\"value\": \"bg\", \"label\": \"Bulgarian\"}, {\n            \"value\": \"my\",\n            \"label\": \"Burmese\"\n        }, {\"value\": \"bn\", \"label\": \"Bengali\"}, {\"value\": \"ca\", \"label\": \"Catalan\"}, {\n            \"value\": \"zh-cn\",\n            \"label\": \"Chinese (simplified)\"\n        }, {\"value\": \"zh-tw\", \"label\": \"Chinese (traditional)\"}, {\n            \"value\": \"hr\",\n            \"label\": \"Croatian\"\n        }, {\"value\": \"cs\", \"label\": \"Czech\"}, {\"value\": \"da\", \"label\": \"Danish\"}, {\n            \"value\": \"nl\",\n            \"label\": \"Dutch\"\n        }, {\"value\": \"en\", \"label\": \"English\"}, {\n            \"value\": \"en-au\",\n            \"label\": \"English (australian)\"\n        }, {\"value\": \"en-gb\", \"label\": \"English (great Britain)\"}, {\n            \"value\": \"fa\",\n            \"label\": \"Farsi\"\n        }, {\"value\": \"fi\", \"label\": \"Finnish\"}, {\"value\": \"fil\", \"label\": \"Filipino\"}, {\n            \"value\": \"fr\",\n            \"label\": \"French\"\n        }, {\"value\": \"gl\", \"label\": \"Galician\"}, {\"value\": \"de\", \"label\": \"German\"}, {\n            \"value\": \"el\",\n            \"label\": \"Greek\"\n        }, {\"value\": \"gu\", \"label\": \"Gujarati\"}, {\"value\": \"iw\", \"label\": \"Hebrew\"}, {\n            \"value\": \"hi\",\n            \"label\": \"Hindi\"\n        }, {\"value\": \"hu\", \"label\": \"Hungarian\"}, {\"value\": \"id\", \"label\": \"Indonesian\"}, {\n            \"value\": \"it\",\n            \"label\": \"Italian\"\n        }, {\"value\": \"ja\", \"label\": \"Japanese\"}, {\"value\": \"kn\", \"label\": \"Kannada\"}, {\n            \"value\": \"kk\",\n            \"label\": \"Kazakh\"\n        }, {\"value\": \"ko\", \"label\": \"Korean\"}, {\"value\": \"ky\", \"label\": \"Kyrgyz\"}, {\n            \"value\": \"lt\",\n            \"label\": \"Lithuanian\"\n        }, {\"value\": \"lv\", \"label\": \"Latvian\"}, {\"value\": \"mk\", \"label\": \"Macedonian\"}, {\n            \"value\": \"ml\",\n            \"label\": \"Malayalam\"\n        }, {\"value\": \"mr\", \"label\": \"Marathi\"}, {\"value\": \"no\", \"label\": \"Norwegian\"}, {\n            \"value\": \"pl\",\n            \"label\": \"Polish\"\n        }, {\"value\": \"pt\", \"label\": \"Portuguese\"}, {\n            \"value\": \"pt-br\",\n            \"label\": \"Portuguese (brazil)\"\n        }, {\"value\": \"pt-pt\", \"label\": \"Portuguese (portugal)\"}, {\n            \"value\": \"pa\",\n            \"label\": \"Punjabi\"\n        }, {\"value\": \"ro\", \"label\": \"Romanian\"}, {\"value\": \"ru\", \"label\": \"Russian\"}, {\n            \"value\": \"sr\",\n            \"label\": \"Serbian\"\n        }, {\"value\": \"sk\", \"label\": \"Slovak\"}, {\"value\": \"sl\", \"label\": \"Slovenian\"}, {\n            \"value\": \"es\",\n            \"label\": \"Spanish\"\n        }, {\"value\": \"sv\", \"label\": \"Swedish\"}, {\"value\": \"tl\", \"label\": \"Tagalog\"}, {\n            \"value\": \"ta\",\n            \"label\": \"Tamil\"\n        }, {\"value\": \"te\", \"label\": \"Telugu\"}, {\"value\": \"th\", \"label\": \"Thai\"}, {\n            \"value\": \"tr\",\n            \"label\": \"Turkish\"\n        }, {\"value\": \"uk\", \"label\": \"Ukrainian\"}, {\"value\": \"uz\", \"label\": \"Uzbek\"}, {\n            \"value\": \"vi\",\n            \"label\": \"Vietnamese\"\n        }];\n        this.language = options.language;\n        // @ts-ignore\n        this.markerImages = MapSVG.markerImages;\n        this.markersByField = options.markersByField;\n        this.markerField = options.markerField;\n        this.markersByFieldEnabled = MapSVG.parseBoolean(options.markersByFieldEnabled);\n\n        this.templates.marker = Handlebars.compile($('#mapsvg-data-tmpl-marker').html());\n    }\n\n    init(){\n        super.init();\n        if(this.location && this.location.marker){\n            this.renderMarker();\n        }\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.language = this.language;\n        schema.markersByField = this.markersByField;\n        schema.markerField = this.markerField;\n        schema.markersByFieldEnabled = MapSVG.parseBoolean(this.markersByFieldEnabled);\n        return schema;\n    }\n\n    getData(): {name: string, value: any} {\n        return {name: this.name, value: this.location ? this.location.getData(): {}};\n    }\n\n    getDataForTemplate(): { [p: string]: any } {\n\n        let data = super.getDataForTemplate();\n\n        if (this.formBuilder.admin) {\n            data.languages = this.languages;\n            data.markerImages = MapSVG.markerImages;\n            data.markersByField = this.markersByField;\n            data.markerField = this.markerField;\n            data.markersByFieldEnabled = MapSVG.parseBoolean(this.markersByFieldEnabled);\n            var _this = this;\n            data.markerImages.forEach(function (m) {\n                if (m.path === _this.formBuilder.mapsvg.getData().options.defaultMarkerImage) {\n                    m.default = true;\n                } else {\n                    m.default = false;\n                }\n            })\n\n        }\n        data.language = this.language;\n\n        if (this.location) {\n            data.location = this.location;\n            if (this.location.marker) {\n                data.location.img = (this.location.marker.src.indexOf(MapSVG.urls.uploads) === 0 ? 'uploads/' : '') + (this.location.marker.src.split('/').pop());\n            }\n        }\n\n        return data;\n\n        // return this.location;\n    }\n\n    initEditor() {\n        super.initEditor();\n        this.fillMarkersByFieldOptions(this.markerField);\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        var _this = this;\n\n        // Google geocoding\n\n        let server = new Server();\n        if (_this.formBuilder.mapsvg.isGeo()) {\n\n            var locations = new Bloodhound({\n                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('formatted_address'),\n                queryTokenizer: Bloodhound.tokenizers.whitespace,\n                remote: {\n                    url: server.getUrl('geocoding') + '?address=%QUERY%&language=' + this.language,\n                    wildcard: '%QUERY%',\n                    transform: function (response) {\n                        if (response.error_message) {\n                            alert(response.error_message);\n                        }\n                        return response.results;\n                    },\n                    rateLimitWait: 600\n                }\n            });\n            var thContainer = $(this.domElements.main).find('.typeahead');\n            var tH = thContainer.typeahead({\n                minLength: 3\n            }, {\n                name: 'mapsvg-addresses',\n                display: 'formatted_address',\n                source: locations\n            });\n            thContainer.on('typeahead:select', function (ev, item) {\n                _this.location && _this.location.marker && _this.deleteMarker();\n\n                let address: any;\n                address = {};\n                address.formatted = item.formatted_address;\n                item.address_components.forEach(function (addr_item) {\n                    var type = addr_item.types[0];\n                    address[type] = addr_item.long_name;\n                    if (addr_item.short_name != addr_item.long_name) {\n                        address[type + '_short'] = addr_item.short_name;\n                    }\n                });\n\n                var locationData = {\n                    address: address,\n                    geoPoint: new GeoPoint(item.geometry.location.lat, item.geometry.location.lng),\n                    img: _this.formBuilder.mapsvg.getMarkerImage(_this.formBuilder.getData())\n                };\n\n                _this.location = new Location(locationData);\n\n                // _this.location\n\n                _this.formBuilder.location = _this.location;\n\n                var marker = new Marker({\n                    location: _this.location,\n                    mapsvg: _this.formBuilder.mapsvg\n                });\n                _this.location.marker = marker;\n\n                // TODO just added\n                _this.formBuilder.mapsvg.markerAdd(_this.location.marker);\n\n                _this.formBuilder.mapsvg.setEditingMarker(marker);\n                _this.formBuilder.markerBackup = marker.getOptions();\n                _this.renderMarker();\n\n                var select = $(_this.formBuilder.view).find('select[name=\"regions\"]');\n\n                if (_this.formBuilder.mapsvg.options.source.indexOf('/geo-calibrated/usa.svg') !== -1) {\n                    // If this is the map of USA, choose the corresponding state by region ID in the \"regions\" field\n                    if (select.length !== 0 && _this.location.address.state_short) {\n                        select.val(['US-' + _this.location.address.state_short]);\n                        select.trigger('change');\n                    }\n                } else if (_this.formBuilder.mapsvg.options.source.indexOf('/geo-calibrated/world.svg') !== -1) {\n                    // If this is the world.svg map, choose the corresponding country by country ID in the \"regions\" field\n                    if (select.length !== 0 && _this.location.address.country_short) {\n                        select.val([_this.location.address.country_short]);\n                        select.trigger('change');\n                    }\n                } else {\n                    if (select.length !== 0 && _this.location.address.administrative_area_level_1) {\n                        _this.formBuilder.mapsvg.regions.forEach((_region)=>{\n                            if(_region.title === _this.location.address.administrative_area_level_1\n                                ||\n                                _region.title === _this.location.address.administrative_area_level_2\n                                ||\n                                _region.id === _this.location.address.country_short + '-' + _this.location.address.administrative_area_level_1_short\n                            ){\n                                select.val([_region.id]);\n                                select.trigger('change');\n                            }\n                        });\n                    }\n                }\n\n                thContainer.typeahead('val', '');\n            });\n        }\n\n        $(this.domElements.main).on('click', '.mapsvg-marker-image-btn-trigger', function (e) {\n            $(this).toggleClass('active');\n            _this.toggleMarkerSelector.call(_this, $(this), e);\n        });\n\n        $(this.domElements.main).on('click', '.mapsvg-marker-delete', function (e) {\n            e.preventDefault();\n            _this.deleteMarker();\n        });\n    }\n\n    setEditorEventHandlers() {\n        super.setEditorEventHandlers();\n\n        var _this = this;\n\n\n        var imgSelector = $('#marker-file-uploader').closest('.form-group').find('.mapsvg-marker-image-selector');\n\n        $(this.domElements.edit).on('change', 'select[name=\"markerField\"]', function () {\n            var fieldName = $(this).val();\n            _this.fillMarkersByFieldOptions(fieldName);\n        });\n        $(this.domElements.edit).on('click', '.mapsvg-marker-image-btn-trigger', function (e) {\n            $(this).toggleClass('active');\n            _this.toggleMarkerSelectorInLocationEditor.call(_this, $(this), e);\n        });\n\n\n        $(this.domElements.edit).on('change', '#marker-file-uploader', function () {\n            let uploadBtn = $(this).closest('.btn-file')._button('loading');\n            for (var i = 0; i < this.files.length; i++) {\n\n                var data = new FormData();\n                data.append('file', this.files[0]);\n\n                var server = new Server();\n\n                server.ajax(\n                    'markers',\n                    {\n                        type: \"POST\",\n                        data: data,\n                        processData: false,\n                        contentType: false\n                }).done(function (resp) {\n                    if (resp.error) {\n                        alert(resp.error);\n                    } else {\n                        var marker = resp.marker;\n                        var newMarker = '<button class=\"btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose\">'\n                            + '<img src=\"' + marker.path + '\" />'\n                            + '</button>';\n                        $(newMarker).appendTo(imgSelector);\n                        MapSVG.markerImages.push(marker);\n                    }\n                }).always(function () {\n                    uploadBtn._button('reset');\n                });\n            }\n        });\n    }\n\n    updateData() {\n\n    }\n\n    mayBeAddDistanceRow() {\n        var _this = this;\n        if(!this.domElements.editDistanceRow){\n            this.domElements.editDistanceRow = $($('#mapsvg-edit-distance-row').html())[0];\n        }\n        // if there's something in the last status edit field, add +1 status row\n        var z = $(this.domElements.edit).find('.mapsvg-edit-distance-row:last-child input');\n        if (z && z.last() && z.last().val() && (z.last().val()+'').trim().length) {\n            var newRow = $(this.templates.editDistanceRow).clone();\n            newRow.insertAfter($(_this.domElements.edit).find('.mapsvg-edit-distance-row:last-child'));\n        }\n        var rows = $(_this.domElements.edit).find('.mapsvg-edit-distance-row');\n        var row1 = rows.eq(rows.length - 2);\n        var row2 = rows.eq(rows.length - 1);\n\n        if (row1.length && row2.length && !row1.find('input:eq(0)').val().toString().trim() && !row2.find('input:eq(0)').val().toString().trim()) {\n            row2.remove();\n        }\n    };\n\n    fillMarkersByFieldOptions(fieldName) {\n\n        var _this = this;\n\n        var field = _this.formBuilder.mapsvg.objectsRepository.getSchema().getField(fieldName);\n        if (field) {\n            var markerImg = _this.formBuilder.mapsvg.options.defaultMarkerImage;\n            var rows = [];\n            field.options.forEach(function (option) {\n                var img = _this.markersByField && _this.markersByField[option.value] ? _this.markersByField[option.value] : markerImg;\n                rows.push('<tr data-option-id=\"' + option.value + '\"><td>' + option.label + '</td><td><button class=\"btn btn-default mapsvg-marker-image-btn-trigger mapsvg-marker-image-btn\"><img src=\"' + img + '\" class=\"new-marker-img\" style=\"margin-right: 4px;\"/><span class=\"caret\"></span></button></td></tr>');\n            });\n            $(\"#markers-by-field\").empty().append(rows);\n        }\n    };\n\n    renderMarker(marker?: Marker) {\n        var _this = this;\n        if (!this.location && !(marker && marker.location)) {\n            return false;\n        }\n        if (marker && marker.location) {\n            this.location = marker.location;\n        }\n        this.renderMarkerHtml();\n        this.location.marker.events.on( 'change', () => {\n            this.renderMarkerHtml();\n        });\n    };\n    renderMarkerHtml(){\n        if(this.location.marker.dragging){\n            return false;\n        }\n        $(this.domElements.main).find('.mapsvg-new-marker').show().html(this.templates.marker(this.location));\n    }\n\n    toggleMarkerSelector(jQueryObj, e) {\n        e.preventDefault();\n        var _this = this;\n        if (_this.domElements.markerSelector && $(_this.domElements.markerSelector).is(':visible')) {\n            $(_this.domElements.markerSelector).hide();\n            return;\n        }\n        if (_this.domElements.markerSelector && $(_this.domElements.markerSelector).not(':visible')) {\n            $(_this.domElements.markerSelector).show();\n            return;\n        }\n\n        _this.domElements.markerImageButton = jQueryObj.find('img')[0];\n        var currentImage = $(_this.domElements.markerImageButton).attr('src');\n        var images = MapSVG.markerImages.map(function (image) {\n            return '<button class=\"btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose ' + (currentImage == image.path ? 'active' : '') + '\"><img src=\"' + image.path + '\" /></button>';\n        });\n\n        if (!_this.domElements.markerSelector) {\n            _this.domElements.markerSelector = $(this.domElements.main).find('.mapsvg-marker-image-selector')[0];\n        }\n\n        // delete previous marker image selector and reset events\n        if (_this.domElements.markerSelector) {\n            $(_this.domElements.markerSelector).empty();\n        }\n\n        // create new markers image selector\n        // $(_this.domElements.markerSelector) = jQueryObj;\n        // _this.formBuilder.markerSelector = $(_this.domElements.markerSelector);\n\n        // attach Marker object to the selector\n        if (_this.formBuilder.markerBackup) {\n            $(_this.domElements.markerSelector).data('marker', _this.formBuilder.markerBackup);\n        } else {\n            $(_this.domElements.markerSelector).data('marker', null);\n        }\n\n        $(_this.domElements.markerSelector).html(images.join(''));\n\n        $(_this.domElements.markerSelector).on('click', '.mapsvg-marker-image-btn-choose', function (e) {\n            e.preventDefault();\n            var src = $(this).find('img').attr('src');\n\n            if (_this.formBuilder.markerBackup) {\n                var marker = _this.formBuilder.mapsvg.getMarker(_this.formBuilder.markerBackup.id);\n                // _this.formBuilder.markerBackup.setImage(src);\n                marker.setImage(src);\n            }\n            $(_this.domElements.markerSelector).hide();\n            $(_this.domElements.main).find('.mapsvg-marker-image-btn-trigger').toggleClass('active', false);\n            $(_this.domElements.markerImageButton).attr('src', src);\n\n            _this.formBuilder.mapsvg.setDefaultMarkerImage(src);\n        });\n    };\n\n    toggleMarkerSelectorInLocationEditor(jQueryObj, e) {\n        e.preventDefault();\n        var _this = this;\n        if (jQueryObj.data('markerSelector') && jQueryObj.data('markerSelector').is(':visible')) {\n            jQueryObj.data('markerSelector').hide();\n            return;\n        }\n        if (jQueryObj.data('markerSelector') && jQueryObj.data('markerSelector').not(':visible')) {\n            jQueryObj.data('markerSelector').show();\n            return;\n        }\n\n        var markerBtn = $(this).closest('td').find('.mapsvg-marker-image-btn-trigger');\n        var currentImage = markerBtn.attr('src');\n        var images = MapSVG.markerImages.map(function (image) {\n            return '<button class=\"btn btn-default mapsvg-marker-image-btn mapsvg-marker-image-btn-choose ' + (currentImage == image.path ? 'active' : '') + '\"><img src=\"' + image.path + '\" /></button>';\n        });\n\n        if (!jQueryObj.data('markerSelector')) {\n            var ms = $('<div class=\"mapsvg-marker-image-selector\"></div>');\n            jQueryObj.closest('td').append(ms);\n            jQueryObj.data('markerSelector', ms);\n        } else {\n            jQueryObj.data('markerSelector').empty();\n        }\n\n        jQueryObj.data('markerSelector').html(images.join(''));\n\n        jQueryObj.data('markerSelector').on('click', '.mapsvg-marker-image-btn-choose', function (e) {\n            e.preventDefault();\n            var src = $(this).find('img').attr('src');\n            jQueryObj.data('markerSelector').hide();\n            var td = $(this).closest('td');\n            var fieldId = $(this).closest('tr').data('option-id');\n            var btn = td.find('.mapsvg-marker-image-btn-trigger');\n            btn.toggleClass('active', false);\n            btn.find('img').attr('src', src);\n            _this.setMarkerByField(fieldId, src);\n        });\n    };\n\n    setMarkerByField(fieldId, markerImg) {\n        this.markersByField = this.markersByField || {};\n        this.markersByField[fieldId] = markerImg;\n    };\n\n    deleteMarker() {\n        var _this = this;\n\n        if(this.formBuilder.backupData){\n            this.formBuilder.backupData.location = this.location;\n            this.formBuilder.backupData.marker = this.marker;\n        }else{\n            this.formBuilder.backupData = {\n                location: this.location,\n                marker:   this.marker\n            }\n        }\n\n        this.location = null;\n        this.marker = null;\n\n        if (this.formBuilder.markerBackup) {\n            this.formBuilder.mapsvg.getMarker(this.formBuilder.markerBackup.id).delete();\n            _this.formBuilder.mapsvg.editingMarker = null;\n            // delete this.formBuilder.markerBackup;\n        }\n        $(this.domElements.main).find('.mapsvg-new-marker').hide();\n        $(this.domElements.main).find('.mapsvg-marker-id').attr('disabled', 'disabled');\n    };\n\n\n    destroy() {\n        if($().mselect2){\n            var sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                //@ts-ignore\n                sel.mselect2('destroy');\n            }\n        }\n        this.domElements.markerSelector && $(this.domElements.markerSelector).popover('destroy');\n\n    }\n\n\n\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class ModalFormElement extends FormElement {\n\n    showButtonText: boolean;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.showButtonText = options.showButtonText;\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.showButtonText = this.showButtonText;\n        return schema;\n    }\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nimport {Server} from \"../../Infrastructure/Server/Server\";\nconst $ = jQuery;\n\nexport class PostFormElement extends FormElement {\n\n    id: number;\n    post_id: number;\n    post?: {\n        id: number,\n        post_content: string,\n        post_title: string,\n        url: string,\n        acf?: {[key: string]: any}\n    };\n    add_fields: boolean;\n    post_type: boolean;\n    post_types: string[];\n\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        if (this.formBuilder.admin) this.post_types = this.formBuilder.admin.getPostTypes();\n        this.post_type = options.post_type || this.post_types[0];\n        this.add_fields = MapSVG.parseBoolean(options.add_fields);\n        this.db_type = 'int(11)';\n        this.name = 'post_id';\n        this.post_id = options.post_id;\n        this.post = options.post;\n\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.postSelect = <HTMLSelectElement>$(this.domElements.main).find(\".mapsvg-find-post\")[0];\n        this.inputs.postId = <HTMLInputElement>$(this.domElements.main).find('input[name=\"post_id\"]')[0];\n    }\n\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.post_type = this.post_type;\n        schema.add_fields = this.add_fields;\n        return schema;\n    }\n\n    destroy() {\n        // @ts-ignore\n        if($().mselect2){\n            let sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                //@ts-ignore\n                sel.mselect2('destroy');\n            }\n        }\n    }\n\n\n    getDataForTemplate(): { [p: string]: any } {\n\n        let data = super.getDataForTemplate();\n\n        if (this.formBuilder.admin)\n            data.post_types = this.formBuilder.admin.getPostTypes();\n        data.post_type = this.post_type;\n        data.post = this.post;\n        data.add_fields = this.add_fields || 0;\n        return data;\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        let _this = this;\n\n        let server = new Server();\n\n        // @ts-ignore\n        $(this.inputs.postSelect).mselect2({\n            placeholder: 'Search post by title',\n            allowClear: true,\n            ajax: {\n                url: server.getUrl('posts'), //MapSVG.urls.ajaxurl + '?action=mapsvg_search_posts&post_type=' + this.post_type,\n                dataType: 'json',\n                delay: 250,\n                data: function (params) {\n                    return {\n                        filters: {post_type: _this.post_type},\n                        search: params.term, // search term\n                        page: params.page\n                    };\n                },\n                processResults: function (data, params) {\n                    // parse the results into the format expected by Select2\n                    // since we are using custom formatting functions we do not need to\n                    // alter the remote JSON data, except to indicate that infinite\n                    // scrolling can be used\n                    params.page = params.page || 1;\n\n                    return {\n                        results: data.posts ? data.posts : [],\n                        pagination: {\n                            more: false //(params.page * 30) < data.total_count\n                        }\n                    };\n                },\n                cache: true\n            },\n            escapeMarkup: function (markup) {\n                return markup;\n            }, // let our custom formatter work\n            minimumInputLength: 1,\n            templateResult: formatRepo, // omitted for brevity, see the source of this page\n            templateSelection: formatRepoSelection // omitted for brevity, see the source of this page\n        }).on('select2:select', function (e) {\n            _this.post = e.params.data;\n            // TODO change in php post ID to id (lowercase):\n            $(_this.domElements.main).find(\".mapsvg-post-id\").text(_this.post.id);\n            $(_this.domElements.main).find(\".mapsvg-post-url\").text(_this.post.url).attr('href', _this.post.url);\n            $(_this.inputs.postId).val(_this.post.id);\n            _this.value = _this.post.id;\n            _this.events.trigger('change');\n        }).on('change', function (e) {\n            if (e.target.value === '') {\n                $(_this.domElements.main).find(\".mapsvg-post-id\").text('');\n                $(_this.domElements.main).find(\".mapsvg-post-url\").text('');\n                $(_this.inputs.postId).val('');\n                _this.value = '';\n                _this.events.trigger('change');\n            }\n        });\n\n        function formatRepo(repo) {\n            if (repo.loading) {\n                return repo.text;\n            } else {\n                return \"<div class='select2-result-repository clearfix'>\" +\n                    repo.post_title + \"</div>\";\n            }\n\n        }\n\n        function formatRepoSelection(repo) {\n            return repo.post_title || repo.text;\n        }\n    }\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class RadioFormElement extends FormElement {\n\n    radiosjQueryObject: any;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.setOptions(options.options);\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.radiosjQueryObject = $(this.domElements.main).find('input[type=\"radio\"]');\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        this.radiosjQueryObject.on('change', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n}","import {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class RegionsFormElement extends FormElement {\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.searchable = MapSVG.parseBoolean(options.searchable);\n        this.options = this.formBuilder.getRegionsList();\n        this.label = 'Regions';\n        this.name = 'regions';\n        this.db_type = 'text';\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.select = $(this.domElements.main).find('select')[0];\n    }\n\n    getData(): {name: string, value: any} {\n        let data: any;\n\n        let table = this.formBuilder.mapsvg.regionsRepository.getSchema().name;\n\n        data = $(this.inputs.select).val() || [];\n        let data2 = {};\n\n        if(data && data.length > 0){\n            data = data.map((rId) => {\n                let region = this.external.regions.findById(rId);\n                return {id: region.id, title: region.title};\n            });\n            data2[table] = data;\n\n        }\n        return {name: 'regions', value: data2};\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        if (schema.multiselect)\n            schema.db_type = 'text';\n        var opts = $.extend(true, {}, {options: this.options});\n        schema.options = opts.options;\n        schema.optionsDict = {};\n        schema.options.forEach(function (option) {\n            schema.optionsDict[option.id] = option.title || option.id;\n        });\n\n        return schema;\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        // TODO: check about multiselect\n        $(this.inputs.select).on('change', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    destroy() {\n        if($().mselect2){\n            var sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                //@ts-ignore\n                sel.mselect2('destroy');\n            }\n        }\n    }\n\n\n\n}","import {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class SaveFormElement extends FormElement {\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.readonly = true;\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.btnSave  = <HTMLButtonElement>$(this.domElements.main).find('.btn-save')[0];\n        this.inputs.btnClose = <HTMLButtonElement>$(this.domElements.main).find('.btn-close')[0];\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.btnSave).on('click', () => {\n           this.events.trigger('click.btn.save') ;\n        });\n        $(this.inputs.btnClose).on('click', () => {\n           this.events.trigger('click.btn.close') ;\n        });\n    }\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class SearchFormElement extends FormElement {\n\n    searchType: string;\n    searchFallback: boolean;\n    noResultsText: string;\n    width: string;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n\n        this.searchType = options.searchType || 'fulltext';\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.text = $(this.domElements.main).find('input')[0];\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.text).on('change keyup paste', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.searchFallback = MapSVG.parseBoolean(this.searchFallback);\n        schema.placeholder = this.placeholder;\n        schema.noResultsText = this.noResultsText;\n        schema.width = this.width;\n        return schema;\n\n    }\n}","/// <reference path=\"../../../vendor/jquery-plugins.d.ts\" />\nimport {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class SelectFormElement extends FormElement {\n\n    multiselect: boolean;\n    optionsGrouped: any;\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.searchable = MapSVG.parseBoolean(options.searchable);\n        this.multiselect = MapSVG.parseBoolean(options.multiselect);\n        this.optionsGrouped = options.optionsGrouped;\n        this.db_type = this.multiselect ? 'text' : 'varchar(255)';\n\n        this.setOptions(options.options);\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.select = $(this.domElements.main).find('select')[0];\n    }\n\n    getSchema(): { [p: string]: any } {\n\n        let schema = super.getSchema();\n        schema.multiselect = MapSVG.parseBoolean(this.multiselect);\n        if (schema.multiselect)\n            schema.db_type = 'text';\n        schema.optionsGrouped = this.optionsGrouped;\n        var opts = $.extend(true, {}, {options: this.options});\n        schema.options = opts.options || [];\n        schema.optionsDict = {};\n        schema.options.forEach(function (option) {\n            schema.optionsDict[option.value] = option.label;\n        });\n\n        return schema;\n    }\n\n    // getData(){\n        // TODO check this and uncomment maybe\n        // data[control.name] = data[control.name].map(function(value){\n        //     return {value: value, label: control.optionsDict[value]};\n        // });\n\n        // TODO: check about multiselect\n        // return {value: value, label: control.optionsDict[value]};\n    // }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        // TODO: check about multiselect\n        $(this.inputs.select).on('change', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    addSelect2() {\n        if ($().mselect2) {\n            let select2Options: any;\n            select2Options = {};\n            if (this.formBuilder.filtersMode && this.type == 'select') {\n                select2Options.placeholder = this.placeholder;\n                if (!this.multiselect) {\n                    select2Options.allowClear = true;\n                }\n            }\n            $(this.domElements.main).find('select').css({width: '100%', display: 'block'})\n                .mselect2(select2Options)\n                .on('select2:focus', function () {\n                    $(this).mselect2('open');\n                });\n            $(this.domElements.main).find('.select2-selection--multiple .select2-search__field').css('width', '100%');\n        }\n    }\n\n    getData(): {name: string, value: any} {\n        let data: any;\n\n        data = $(this.inputs.select).val();\n\n        if(this.multiselect){\n            if(data && data.length > 0){\n                data = data.map((id) => {\n                    return {value: this.optionsDict[id].value, label: this.optionsDict[id].label};\n                })\n            }\n        }\n\n        return {name: this.name, value: data};\n    }\n\n    setOptions(options?: any[]): any[]{\n\n        if(options){\n            this.options = [];\n            this.optionsDict = {};\n            options.forEach((value, key) => {\n                this.options.push(value);\n                if(this.optionsGrouped) {\n                    value.options.forEach((value2, key2) => {\n                        this.optionsDict[value2.value] = value2;\n                    });\n                } else {\n                    this.optionsDict[key] = value;\n                }\n            });\n            return this.options;\n        } else {\n            return this.setOptions([\n                {label: 'Option one', name: 'option_one', value: 1},\n                {label: 'Option two', name: 'option_two', value: 2}\n            ]);\n        }\n\n    }\n\n}","/// <reference path=\"../../../vendor/jquery-plugins.d.ts\" />\n\nimport {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class StatusFormElement extends FormElement {\n\n    inputs: {select: HTMLSelectElement};\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.label = options.label || 'Status';\n        this.name = 'status';\n        this.setOptions(options.options);\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.select = $(this.domElements.main).find('select')[0];\n        if ($().colorpicker) {\n            $(this.domElements.main).find('.cpicker').colorpicker().on('changeColor.colorpicker', function (event) {\n                var input = $(this).find('input');\n                if (input.val() == '')\n                    $(this).find('i').css({'background-color': ''});\n            });\n            this.domElements.edit && $(this.domElements.edit).find('.cpicker').colorpicker().on('changeColor.colorpicker', function (event) {\n                var input = $(this).find('input');\n                if (input.val() == '')\n                    $(this).find('i').css({'background-color': ''});\n            });\n        }\n    }\n\n    destroy() {\n        if($().mselect2){\n            var sel = $(this.domElements.main).find('.mapsvg-select2');\n            if(sel.length){\n                sel.mselect2('destroy');\n            }\n        }\n    }\n\n    setEditorEventHandlers() {\n        super.setEditorEventHandlers();\n        var _this = this;\n        $(this.domElements.edit).on('keyup change paste', '.mapsvg-edit-status-row input', function () {\n            _this.mayBeAddStatusRow();\n        });\n    }\n\n    initEditor() {\n        super.initEditor();\n        var _this = this;\n        $(_this.domElements.edit).find('.cpicker').colorpicker().on('changeColor.colorpicker', function (event) {\n            var input = $(this).find('input');\n            var index = $(this).closest('tr').index();\n            if (input.val() == '')\n                $(this).find('i').css({'background-color': ''});\n            _this.options[index] = _this.options[index] || {label: '', value: '', color: '', disabled: false};\n            _this.options[index]['color'] = input.val();\n        });\n        _this.mayBeAddStatusRow();\n    }\n\n    mayBeAddStatusRow(){\n        var _this = this;\n        let editStatusRow = $($('#mapsvg-edit-status-row').html());\n        // if there's something in the last status edit field, add +1 status row\n        var z = $(_this.domElements.edit).find('.mapsvg-edit-status-label:last-child');\n        if (z && z.last() && z.last().val() && (z.last().val()+'').trim().length) {\n            var newRow = editStatusRow.clone();\n            newRow.insertAfter($(_this.domElements.edit).find('.mapsvg-edit-status-row:last-child'));\n            newRow.find('.cpicker').colorpicker().on('changeColor.colorpicker', function (event) {\n                var input = $(this).find('input');\n                var index = $(this).closest('tr').index();\n                if (input.val() == '')\n                    $(this).find('i').css({'background-color': ''});\n                _this.options[index] = _this.options[index] || {label: '', value: '', color: '', disabled: false};\n                _this.options[index]['color'] = input.val();\n            });\n        }\n        var rows = $(_this.domElements.edit).find('.mapsvg-edit-status-row');\n        var row1 = rows.eq(rows.length - 2);\n        var row2 = rows.eq(rows.length - 1);\n\n        if (row1.length && row2.length &&\n            !(row1.find('input:eq(0)').val().toString().trim() || row1.find('input:eq(1)').val().toString().trim() || row1.find('input:eq(2)').val().toString().trim())\n            &&\n            !(row2.find('input:eq(0)').val().toString().trim() || row2.find('input:eq(1)').val().toString().trim() || row2.find('input:eq(2)').val().toString().trim())\n        ) {\n            row2.remove();\n        }\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.select).on('change keyup paste', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n\n        var opts = $.extend(true, {}, {options: this.options});\n        schema.options = opts.options;\n        schema.optionsDict = {};\n\n        schema.options.forEach(function (option, index) {\n            if (schema.options[index].value === '') {\n                schema.options.splice(index, 1);\n            } else {\n                schema.options[index].disabled = MapSVG.parseBoolean(schema.options[index].disabled);\n                schema.optionsDict[option.value] = option;\n            }\n        });\n\n        return schema;\n    }\n\n}","import {FormElement} from \"./FormElement\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport * as CodeMirror from \"CodeMirror\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class TextareaFormElement extends FormElement {\n\n    searchType: string;\n    html: boolean;\n    htmlEditor: any;\n    autobr: boolean;\n    editor: CodeMirror.Editor;\n    inputs: {textarea: HTMLTextAreaElement};\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.searchType = options.searchType || 'fulltext';\n        this.searchable = MapSVG.parseBoolean(options.searchable);\n        this.autobr = options.autobr;\n        this.html = options.html;\n        this.db_type = 'text';\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.textarea = $(this.domElements.main).find('textarea')[0];\n\n        if(this.html){\n            this.editor = CodeMirror.fromTextArea(this.inputs.textarea, {\n                mode: {name: \"handlebars\", base: \"text/html\"},\n                //@ts-ignore\n                matchBrackets: true,\n                lineNumbers: true\n            });\n            if (this.formBuilder.admin){\n                this.editor.on('change', this.setTextareaValue);\n            }\n        }\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.textarea).on('change keyup paste', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.autobr = this.autobr;\n        schema.html = this.html;\n        return schema;\n    }\n\n    getDataForTemplate(): { [p: string]: any } {\n        let data = super.getDataForTemplate();\n        data.html = this.html;\n        return data;\n    }\n\n    setTextareaValue(codemirror, changeobj) {\n        var handler = codemirror.getValue();\n        var textarea = $(codemirror.getTextArea());\n        textarea.val(handler).trigger('change');\n    }\n\n    destroy() {\n        var cm = $(this.domElements.main).find('.CodeMirror');\n        if(cm.length){\n            cm.empty().remove();\n        }\n    }\n\n}","import {FormElement} from \"./FormElement.js\";\nimport {FormBuilder} from \"../FormBuilder.js\";\nimport {MapSVG} from \"../../Core/globals.js\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nconst $ = jQuery;\n\nexport class TextFormElement extends FormElement {\n\n    searchType: string;\n    searchFallback: boolean;\n    placeholder: string;\n    noResultsText: string;\n    width: string;\n    inputs: {text: HTMLInputElement}\n\n    constructor(options: SchemaField, formBuilder: FormBuilder, external: {[key: string]: any}) {\n        super(options, formBuilder, external);\n        this.searchFallback = MapSVG.parseBoolean(options.searchFallback);\n        this.width = this.formBuilder.filtersHide && !this.formBuilder.modal ? null : (options.width || '100%');\n        this.db_type = 'varchar(255)';\n    }\n\n    setDomElements() {\n        super.setDomElements();\n        this.inputs.text = <HTMLInputElement>$(this.domElements.main).find('input[type=\"text\"]')[0];\n    }\n\n    getSchema(): { [p: string]: any } {\n        let schema = super.getSchema();\n        schema.searchType = this.searchType;\n        return schema;\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n        $(this.inputs.text).on('change keyup paste', (e)=>{\n            this.value = e.target.value;\n            this.events.trigger('changed', this, [this]);\n        });\n    }\n}","import * as FormElementTypes from './index.js'\nimport {MapSVGMap} from \"../../Map/Map\";\nimport {FormBuilder} from \"../FormBuilder\";\nimport {SchemaField} from \"../../Infrastructure/Server/SchemaField\";\nimport {ArrayIndexed} from \"../../Core/ArrayIndexed\";\nconst $ = jQuery;\n\nexport class FormElementFactory {\n\n    mapsvg: MapSVGMap;\n    formBuilder: FormBuilder;\n    namespace: string;\n    editMode: boolean;\n    filtersMode: boolean;\n    mediaUploader: any;\n\n    constructor(options: {mapsvg: MapSVGMap, formBuilder: FormBuilder, editMode: boolean, filtersMode: boolean, namespace: string, mediaUploader: any}) {\n        this.mapsvg = options.mapsvg;\n        this.editMode = options.editMode;\n        this.filtersMode = options.filtersMode;\n        this.namespace = options.namespace;\n        this.mediaUploader = options.mediaUploader;\n        this.formBuilder = options.formBuilder;\n    }\n\n    create(options: SchemaField): FormElementTypes.FormElementInterface {\n        let types = {\n            'checkbox': FormElementTypes.CheckboxFormElement,\n            'checkboxes': FormElementTypes.CheckboxesFormElement,\n            'date': FormElementTypes.DateFormElement,\n            'distance': FormElementTypes.DistanceFormElement,\n            'empty': FormElementTypes.EmptyFormElement,\n            'id': FormElementTypes.IdFormElement,\n            'image': FormElementTypes.ImagesFormElement,\n            'location': FormElementTypes.LocationFormElement,\n            'modal': FormElementTypes.ModalFormElement,\n            'post': FormElementTypes.PostFormElement,\n            'radio': FormElementTypes.RadioFormElement,\n            'region': FormElementTypes.RegionsFormElement,\n            'save': FormElementTypes.SaveFormElement,\n            'search': FormElementTypes.SearchFormElement,\n            'select': FormElementTypes.SelectFormElement,\n            'status': FormElementTypes.StatusFormElement,\n            'text': FormElementTypes.TextFormElement,\n            'textarea': FormElementTypes.TextareaFormElement,\n        }\n\n        var formElement = new types[options.type](options, this.formBuilder, this.getExtraParams());\n        formElement.init();\n        return formElement;\n    }\n\n    getExtraParams(){\n        let databaseFields = [];\n        this.mapsvg.objectsRepository.getSchema().getFields().forEach(function (obj) {\n            if (obj.type == 'text' || obj.type == 'region' || obj.type == 'textarea' || obj.type == 'post' || obj.type == 'select' || obj.type == 'radio' || obj.type == 'checkbox') {\n                if (obj.type == 'post') {\n                    databaseFields.push('Object.post.post_title');\n                } else {\n                    databaseFields.push('Object.' + obj.name);\n                }\n            }\n        });\n        let databaseFieldsFilterableShort = [];\n        databaseFieldsFilterableShort = this.mapsvg.objectsRepository.getSchema().getFieldsAsArray().filter(function (obj) {\n            return (obj.type == 'select' || obj.type == 'radio' || obj.type == 'region');\n        }).map(function (obj) {\n            return obj.name;\n        });\n        let regionFields = this.mapsvg.regionsRepository.getSchema().getFieldsAsArray().map(function (obj) {\n            if (obj.type == 'status' || obj.type == 'text' || obj.type == 'textarea' || obj.type == 'post' || obj.type == 'select' || obj.type == 'radio' || obj.type == 'checkbox') {\n                if (obj.type == 'post') {\n                    return 'Region.post.post_title';\n                } else {\n                    return 'Region.' + obj.name;\n                }\n            }\n        });\n        let regions = new ArrayIndexed('id');\n        this.mapsvg.regions.forEach( region => {\n            regions.push({id: region.id, title: region.title});\n        });\n\n        return {\n            databaseFields: databaseFields,\n            databaseFieldsFilterableShort: databaseFieldsFilterableShort,\n            regionFields: regionFields,\n            regions: regions,\n            mapIsGeo: this.mapsvg.isGeo(),\n            mediaUploader: this.mediaUploader,\n            filtersMode: this.filtersMode\n        }\n    }\n}","/// <reference path=\"../../vendor/jquery-plugins.d.ts\" />\nimport {MapSVG} from \"../Core/globals.js\";\nimport {MapSVGMap} from \"../Map/Map\";\nimport {Schema} from \"../Infrastructure/Server/Schema\";\n// import {Handlebars} from \"../../handlebars.js\"\n// @ts-ignore\nimport Handlebars from \"Handlebars\";\nimport {ResizeSensor} from \"../Core/ResizeSensor\";\nimport {Events} from \"../Core/Events\";\nimport * as FormElementTypes from './FormElements/index.js';\nimport {FormElementFactory} from './FormElements/FormElementFactory.js';\nimport {GeoPoint, Location, SVGPoint} from \"../Location/Location.js\";\nimport {Marker} from \"../Marker/Marker.js\";\nimport {Region} from \"../Region/Region.js\";\nimport {FormElementInterface, LocationFormElement} from \"./FormElements/index.js\";\nimport {ArrayIndexed} from \"../Core/ArrayIndexed\";\nconst $ = jQuery;\n\nexport class FormBuilder {\n\n    container: HTMLElement;\n    namespace: string;\n    mediaUploader: any; // WP Media uploader class\n    schema: Schema;\n    events: Events;\n    formElementFactory: FormElementFactory;\n\n    structureChanged: boolean;\n\n    editMode: boolean;\n    filtersMode: boolean;\n    filtersHide: boolean;\n    showFiltersButton: FormElementTypes.FormElementInterface;\n    modal: boolean;\n    admin: any; // MapSVG Admin class?\n    mapsvg: MapSVGMap;\n    data: {[key: string]: any};\n    clearButton: boolean;\n    clearButtonText: boolean;\n    showButtonText: string;\n    template: string;\n    closeOnSave: boolean;\n    newRecord: boolean;\n    types: string[];\n    sortable: any;\n    saved: boolean\n\n    templates: {[key: string]: Function};\n    elements: {[key: string]: {[key: string]: HTMLElement}};\n    view: HTMLElement;\n        \n    formElements: ArrayIndexed<FormElementTypes.FormElementInterface>;\n    currentlyEditing: FormElementTypes.FormElementInterface;\n    markerBackup: {id: string, src: string, svgPoint: SVGPoint, geoPoint: GeoPoint};\n    location: Location;\n    scrollApi: any; // jScrollPane instance\n\n    backupData?: {\n        location: Location,\n        marker: Marker\n    }\n    editingMarker?: Marker;\n\n    constructor(options: {[key: string]: any}){\n        // schema, editMode, mapsvg, mediaUploader, data, admin, namespace\n        var _this = this;\n\n        this.events        = new Events();\n\n        // options\n        this.container     = options.container;\n        this.namespace     = options.namespace;\n        this.mediaUploader = options.mediaUploader;\n        this.schema        = options.schema || [];\n        this.editMode      = options.editMode == undefined ? false : options.editMode;\n        this.filtersMode   = options.filtersMode == undefined ? false : options.filtersMode;\n        this.filtersHide   = options.filtersHide == undefined ? false : options.filtersHide;\n        this.modal         = options.modal == undefined ? false : options.modal;\n        this.admin         = options.admin;\n        this.mapsvg        = <MapSVGMap>options.mapsvg;\n        this.data          = options.data || {};\n        this.clearButton   = options.clearButton || false;\n        this.clearButtonText =  options.clearButtonText || '';\n        this.showButtonText =  options.showButtonText || '';\n\n        this.formElementFactory = new FormElementFactory({\n           mapsvg: this.mapsvg,\n           formBuilder: this,\n           mediaUploader: this.mediaUploader,\n           editMode: this.editMode,\n           filtersMode: this.filtersMode,\n           namespace: this.namespace,\n        });\n\n        this.events        = new Events(this);\n        if(options.events && Object.keys(options.events).length > 0 ){\n            for(var eventName in options.events){\n                this.events.on(eventName, options.events[eventName]);\n            }\n        }\n        this.template      = 'form-builder';\n        this.closeOnSave   = options.closeOnSave === true;\n        this.newRecord     = options.newRecord === true;\n        this.types         = options.types || ['text', 'textarea', 'checkbox', 'radio', 'select', 'image', 'region', 'location', 'post', 'date'];\n\n        this.templates     = {};\n        this.elements      = {};\n        this.view = $('<div />').addClass('mapsvg-form-builder')[0];\n        if(this.editMode)\n            $(this.view).addClass('full-flex');\n\n        this.formElements = new ArrayIndexed('name');\n\n        if(!MapSVG.templatesLoaded[this.template]){\n            $.get(MapSVG.urls.root + \"dist/\" + _this.template+'.html', function (data) {\n                $(data).appendTo('body');\n                MapSVG.templatesLoaded[_this.template] = true;\n                Handlebars.registerPartial('dataMarkerPartial', $('#mapsvg-data-tmpl-marker').html());\n                if(_this.editMode){\n                    Handlebars.registerPartial('markerByFieldPartial', $('#mapsvg-markers-by-field-tmpl-partial').html());\n                }\n                _this.init();\n            });\n        }else{\n            this.init();\n        }\n    }\n\n    init(){\n\n        var _this = this;\n\n        // The global formBuilder property is needed to handle hotkeys (clos / OK buttons)\n        // @ts-ignore\n        MapSVG.formBuilder = this;\n\n        if(_this.editMode){\n            var templateUI = Handlebars.compile($('#mapsvg-form-editor-tmpl-ui').html());\n            $(_this.view).append( templateUI({types: this.types}) );\n            $(_this.view).addClass('edit');\n        }else{\n            var form = $('<div class=\"mapsvg-data-form-view\"></div>');\n            $(_this.view).append(form);\n            if(!this.filtersMode){\n                form.addClass('form-horizontal');\n            }\n        }\n\n        _this.elements = {\n            buttons: {\n                text: $(_this.view).find('#mapsvg-data-btn-text')[0],\n                textarea: $(_this.view).find('#mapsvg-data-btn-textarea')[0],\n                checkbox: $(_this.view).find('#mapsvg-data-btn-checkbox')[0],\n                radio: $(_this.view).find('#mapsvg-data-btn-radio')[0],\n                select: $(_this.view).find('#mapsvg-data-btn-select')[0],\n                image: $(_this.view).find('#mapsvg-data-btn-image')[0],\n                region: $(_this.view).find('#mapsvg-data-btn-region')[0],\n                marker: $(_this.view).find('#mapsvg-data-btn-marker')[0],\n                saveSchema: $(_this.view).find('#mapsvg-data-btn-save-schema')[0]\n            },\n            containers: {\n                buttons_add: $(_this.view).find('#mapsvg-data-buttons-add')[0],\n                formView: $(_this.view).find('.mapsvg-data-form-view')[0],\n                form_edit: $(_this.view).find('#mapsvg-data-form-edit')[0]\n            }\n        };\n\n        _this.redraw();\n    };\n\n    viewDidLoad(){};\n\n    setEventHandlers(){\n\n        var _this = this;\n\n        if(_this.filtersMode && _this.clearButton){\n            $(_this.elements.buttons.clearButton).on('click',function(){\n                $(_this.elements.containers.formView).find('input')\n                    .not(':button, :submit, :reset, :hidden, :checkbox, :radio')\n                    .val('')\n                    .prop('selected', false);\n                $(_this.elements.containers.formView).find('input[type=\"radio\"]').prop('checked', false);\n                $(_this.elements.containers.formView).find('input[type=\"checkbox\"]').prop('checked', false);\n                $(_this.elements.containers.formView).find('select').val('').trigger('change.select2');\n                _this.events.trigger('clear');\n            });\n        }\n\n        $(window).off('keydown.form.mapsvg').on('keydown.form.mapsvg', function(e) {\n            // @ts-ignore\n            if(MapSVG.formBuilder){\n                if((e.metaKey||e.ctrlKey) && e.keyCode == 13)\n                    // @ts-ignore\n                    MapSVG.formBuilder.save();\n                else if(e.keyCode == 27)\n                    // @ts-ignore\n                    MapSVG.formBuilder.close();\n            }\n        });\n\n\n        if(this.editMode){\n            $(this.view).on('click','.mapsvg-marker-image-selector button',function(e){\n                e.preventDefault();\n                var src = $(this).find('img').attr('src');\n                $(this).parent().find('button').removeClass('active');\n                $(this).addClass('active');\n                _this.mapsvg.setDefaultMarkerImage(src);\n            });\n            $(this.view).on('click','#mapsvg-data-buttons-add button',function(e){\n                e.preventDefault();\n                var type = $(this).data('create');\n                let formElement = _this.formElementFactory.create({type: type});\n                _this.addField(formElement);\n            });\n            $(this.view).on('click','#mapsvg-data-btn-save-schema', function(e){\n                e.preventDefault();\n                var fields = _this.getSchema();\n\n                var counts = {};\n                _this.formElements.forEach(function(elem) { counts[elem.name] = (counts[elem.name] || 0) +1; });\n\n                $(_this.elements.containers.formView).find('.form-group').removeClass('has-error');\n                var errors = [];\n\n                var reservedFields = ['lat','lon','lng','location','location_lat','location_lon','location_lng','location_address','location_img','marker','marker_id','regions','region_id','post_id', 'post','post_title','post_url', 'keywords','status'];\n                var reservedFieldsToTypes = {'regions':'region','status':'status','post_id':'post','marker':'marker','location':'location'};\n\n                var errUnique, errEmpty;\n\n                _this.formElements.forEach(function(formElement: FormElementTypes.FormElementInterface, index){\n                    var err = false;\n\n                    // If that's not Form Builder for Filters (when there is no \"name\" parameter)\n                    // we should check if names are non-empty and unique\n                    if(!_this.filtersMode){\n                        if(counts[formElement.name] > 1){\n                            if(!errUnique){\n                                errUnique = 'Field names should be unique';\n                                errors.push(errUnique);\n                                err = true;\n                            }\n                        }else if(formElement.name.length===0){\n                            if(!errEmpty){\n                                errEmpty = 'Field name can\\'t be empty';\n                                errors.push(errEmpty);\n                                err = true;\n                            }\n                        }else if(reservedFields.indexOf(formElement.name)!=-1){\n                            // if reserved field name is for proper type of object then it's OK\n                            if(!reservedFieldsToTypes[formElement.name] || (reservedFieldsToTypes[formElement.name] && reservedFieldsToTypes[formElement.name]!=formElement.type)){\n                                var msg = 'Field name \"'+formElement.name+'\" is reserved, please set another name';\n                                errors.push(msg);\n                                err = true;\n                            }\n                        }\n                    }\n\n\n                    if(formElement.options && formElement.type != 'region' && formElement.type != 'marker'){\n                        var vals = formElement.options.map(function(obj: {label: string, value: string}) {\n                            return obj.value;\n                        });\n                        let uniq = [...Array.from((new Set(vals)).values())];\n                        if(vals.length != uniq.length){\n                            errors.push('Check \"Options\" list - values should not repeat');\n                            err = true;\n                        }\n\n                    }\n\n                    err && $(formElement.domElements.main).addClass('has-error');\n                });\n\n                if(errors.length === 0){\n                    _this.events.trigger('saveSchema', _this, [fields]);\n                } else {\n                    jQuery.growl.error({title: \"Errors\", message: errors.join('<br />')});\n                }\n\n            });\n            setTimeout(function(){\n                var el = _this.elements.containers.formView;\n                // @ts-ignore\n                _this.sortable = new Sortable(el, {\n                    animation: 150,\n                    onStart: function(){\n                        $(_this.elements.containers.formView).addClass('sorting');\n                    },\n                    onEnd: function(){\n                        setTimeout(function(){\n                            $(_this.elements.containers.formView).removeClass('sorting');\n                            _this.formElements.clear();\n                            $(el).find('.form-group').each(function(index, elem){\n                                _this.formElements.push($(elem).data('formElement'));\n                            });\n                        },500);\n                    }\n                });\n            },1000);\n        }else{\n            // Save\n            // $(_this.view).on('click','button.btn-save',function(e){\n            //     e.preventDefault();\n            //     _this.save();\n            // });\n            // Close\n            // jQuery(_this.view).on('click','button.btn-close', function(){\n            //     alert(1);\n            // });\n            // $(_this.view).on('click','button.btn-close',function(e){\n            //     e.preventDefault();\n            //     _this.close();\n            // });\n        }\n\n        new ResizeSensor(this.view, function(){\n            _this.scrollApi && _this.scrollApi.reinitialise();\n        });\n    }\n\n    setFormElementEventHandlers(formElement: FormElementTypes.FormElementInterface){\n\n        var _this = this;\n\n        if(this.editMode){\n            formElement.events.on('click', (elem) => {\n                this.edit(elem);\n            });\n            formElement.events.on('delete', (elem) => {\n                this.deleteField(elem);\n            });\n\n        } else {\n\n            formElement.events.on('changed', (_formElement)=>{\n                let name = _formElement.name;\n                let value = _formElement.value;\n                // TODO check how this works with names like name[a][b][c]\n                if(_formElement.type !== 'search'){\n                    this.events.trigger('changed.field', _formElement, [name, value]);\n                } else {\n                    this.events.trigger('changed.search', _formElement, [value]);\n                }\n            });\n\n            let locationField = _this.mapsvg.objectsRepository.getSchema().getField('location');\n            // @ts-ignore\n            if (locationField && locationField.markersByFieldEnabled && locationField.markerField && formElement.name == locationField.markerField && Object.values(locationField.markersByField).length > 0) {\n                formElement.events.on('changed', (_formElement) => {\n                    let name = _formElement.name;\n                    let value = _formElement.value;\n                    // @ts-ignore\n                    var src = locationField.markersByField[value];\n                    if (src) {\n                        if (_this.markerBackup) {\n                            var marker = _this.mapsvg.getMarker(_this.markerBackup.id);\n                            marker.setImage(src);\n                            $(_this.view).find('.mapsvg-marker-image-btn img').attr('src', src);\n                        }\n                        // _this.markerBackupImageButton.attr('src',src);\n                    }\n                });\n            }\n\n        }\n    }\n\n    save(){\n\n        var _this = this;\n\n        if(_this.markerBackup){\n            var marker = _this.mapsvg.getEditingMarker();\n            marker.events.off('change');\n            _this.markerBackup = marker.getOptions();\n            _this.mapsvg.unsetEditingMarker();\n        }\n        var data = _this.getData();\n        _this.saved = true;\n\n        this.events.trigger('save', _this, [data]);\n    }\n\n    getFormElementByType(type: string): FormElementTypes.FormElementInterface {\n        return this.formElements.find((el) => el.type === type );\n    }\n\n    getData(): {[key: string]: any}{\n        let data = {};\n        this.formElements.forEach((formElement) => {\n            if(formElement.readonly === false || formElement.type === 'id'){\n                let _formElementData = formElement.getData();\n                data[_formElementData.name] = _formElementData.value;\n            }\n        });\n        return data;\n    }\n\n    redraw(){\n        var _this = this;\n\n        delete _this.markerBackup;\n\n        $(_this.container).empty();\n        $(_this.elements.containers.formView).empty();\n        _this.formElements.clear();\n\n        // if(_this.data && _this.data.id){\n        //     let formElement = this.formElementFactory.create({type: 'id', label: 'ID', name: 'id', value: _this.data.id});\n        //     _this.addField(formElement);\n        // }\n\n        // if(_this.data && _this.data._title){\n        //     let formElement = this.formElementFactory.create({type: 'title', label: 'Title', name: 'title', value: _this.data._title});\n        //     _this.addField(formElement);\n        // }\n\n\n        _this.schema && _this.schema.fields.length > 0 && _this.schema.fields.forEach(function(elem){\n\n            // if(_this.editMode && elem.type === 'id') {\n            //     return;\n            // }\n\n            if(_this.admin && _this.admin.isMetabox && elem.type == 'post'){\n\n            }else{\n                if(_this.filtersMode){\n                    if(elem.type=='distance'){\n                        elem.value = _this.data.distance ? _this.data.distance : elem.value!==undefined?elem.value:null ;\n                    } else {\n                        elem.value = _this.data[elem.parameterNameShort];\n                    }\n                } else {\n                    elem.value = _this.data ? _this.data[elem.name] : elem.value!==undefined?elem.value:null ;\n                }\n\n                if(elem.type=='location' && !_this.editMode){\n\n                    // add Marker Object into formElement\n                    if(elem.value && elem.value.marker && elem.value.marker.id){\n                        _this.markerBackup = elem.value.marker.getOptions();\n                        _this.mapsvg.setEditingMarker(elem.value.marker);\n                    }\n                    _this.admin && _this.admin.setMode && _this.admin.setMode('editMarkers');\n                    _this.admin && _this.admin.enableMarkersMode(true);\n\n                    _this.mapsvg.setMarkerEditHandler(function(){\n                        _this.markerBackup = this.getOptions();\n                        _this.mapsvg.setEditingMarker(this);\n                        var object = _this.getData();\n                        var img = _this.mapsvg.getMarkerImage(object);\n                        var marker = this;\n                        marker.setImage(img);\n                        // @ts-ignore\n                        let locationFormElement = <LocationFormElement>_this.getFormElementByType('location');\n                        locationFormElement && locationFormElement.renderMarker(marker);\n                    });\n\n                }else if(elem.type == 'post'){\n                    // @ts-ignore;\n                    elem.post = _this.data['post'];\n                } else if(elem.type === 'region'){\n                    elem.options = _this.getRegionsList();\n                }\n\n                let formElement = _this.formElementFactory.create(elem);\n                if(_this.filtersMode){\n                    if(!_this.filtersHide || (_this.filtersHide && (_this.modal && elem.type !== 'search') || (!_this.modal && elem.type === 'search'))) {\n                        _this.addField(formElement);\n                    }\n                } else {\n                    _this.addField(formElement);\n                }\n            }\n        });\n\n        if(!_this.editMode){\n            if(this.schema.fields.length === 0){\n                let formElement = this.formElementFactory.create({type: 'empty'});\n                _this.addField(formElement);\n            }else{\n                if(_this.admin && !_this.admin.isMetabox){\n                    let formElement = this.formElementFactory.create({type: 'save'});\n                    formElement.events.on('click.btn.save', ()=>{\n                        this.save();\n                    })\n                    formElement.events.on('click.btn.close', ()=>{\n                        this.close();\n                    })\n                    _this.addField(formElement);\n                }\n            }\n        }\n\n        // If part of filters is hidden in a modal, and what is showing now is NOT a modal,\n        // then add a \"Show filters\" button that opens a modal with remaining filers.\n        if(_this.filtersMode && _this.filtersHide && !_this.modal){\n            let formElement = this.formElementFactory.create({type: 'modal', 'showButtonText': _this.showButtonText});\n            this.showFiltersButton = _this.addField(formElement);\n        }\n\n        if(!_this.editMode && !_this.filtersMode){\n\n            var nano = $('<div class=\"nano\"></div>');\n            var nanoContent = $('<div class=\"nano-content\"></div>');\n            nano.append(nanoContent);\n            // nanoContent.html(this.view);\n            // $(_this.container).html(nano.html());\n            nanoContent.append(this.view);\n            $(_this.container).append(nano);\n\n            // @ts-ignore\n            nano.jScrollPane({mouseWheelSpeed: 30});\n            _this.scrollApi = nano.data('jsp');\n        }else{\n            // $(_this.container).html(this.view);\n            $(_this.container).append(this.view);\n        }\n\n        // If FormBuilder is used to create filters and \"Add clear button\" option is \"on\"\n        // then add the \"Clear all\" button\n        if(_this.filtersMode && _this.clearButton){\n            _this.elements.buttons.clearButton = $('<div class=\"form-group mapsvg-filters-reset-container\"><button class=\"btn btn-default mapsvg-filters-reset\">'+_this.clearButtonText+'</button></div>')[0];\n            $(this.elements.containers.formView).append(_this.elements.buttons.clearButton);\n        }\n\n\n\n        if (!this.editMode && !_this.filtersMode)\n            $(this.view).find('input:visible,textarea:visible').not('.tt-hint').first().focus();\n\n        var cm  = $(this.container).find('.CodeMirror');\n\n        cm.each(function(index, el){\n            // @ts-ignore\n            el && el.CodeMirror.refresh();\n        });\n        _this.setEventHandlers();\n        this.events.trigger('init', this, [this.getData()]);\n        this.events.trigger('loaded');\n    }\n\n    deleteField(formElement){\n        var _this = this;\n        _this.formElements.delete(formElement.name);\n        // _this.formElements.forEach(function(fc, index){\n        //     if(fc === formElement){\n        //         _this.formElements.splice(index,1);\n        //         _this.structureChanged = true;\n        //     }\n        // });\n    }\n\n    getExtraParams(){\n        let databaseFields = [];\n        this.mapsvg.objectsRepository.getSchema().getFields().forEach(function (obj) {\n            if (obj.type == 'text' || obj.type == 'region' || obj.type == 'textarea' || obj.type == 'post' || obj.type == 'select' || obj.type == 'radio' || obj.type == 'checkbox') {\n                if (obj.type == 'post') {\n                    databaseFields.push('Object.post.post_title');\n                } else {\n                    databaseFields.push('Object.' + obj.name);\n                }\n            }\n        });\n        let databaseFieldsFilterableShort = [];\n        databaseFieldsFilterableShort = this.mapsvg.objectsRepository.getSchema().getFieldsAsArray().filter(function (obj) {\n            return (obj.type == 'select' || obj.type == 'radio' || obj.type == 'region');\n        }).map(function (obj) {\n            return obj.name;\n        });\n        let regionFields = this.mapsvg.regionsRepository.getSchema().getFieldsAsArray().map(function (obj) {\n            if (obj.type == 'status' || obj.type == 'text' || obj.type == 'textarea' || obj.type == 'post' || obj.type == 'select' || obj.type == 'radio' || obj.type == 'checkbox') {\n                if (obj.type == 'post') {\n                    return 'Region.post.post_title';\n                } else {\n                    return 'Region.' + obj.name;\n                }\n            }\n        });\n        return {\n            databaseFields: databaseFields,\n            databaseFieldsFilterableShort: databaseFieldsFilterableShort,\n            regionFields: regionFields\n        }\n    }\n\n    addField(formElement: FormElementTypes.FormElementInterface){\n\n        var _this = this;\n\n        // Check if field can be added - some fields can be added only once:\n        if(['region','marker','post','status','distance','location','search'].indexOf(formElement.type)!=-1){\n            var repeat = false;\n            _this.formElements.forEach(function(control){\n                if(control.type == formElement.type)\n                    repeat = true;\n            });\n            if (repeat) {\n                jQuery.growl.error({title: 'Error', message: 'You can add only 1 \"'+MapSVG.ucfirst(formElement.type)+'\" field'});\n                return;\n            }\n        }\n\n        _this.formElements.push(formElement);\n\n        _this.elements.containers.formView.append(formElement.domElements.main);\n\n        this.setFormElementEventHandlers(formElement);\n\n        if(this.editMode){\n            if(formElement.protected){\n                formElement.hide();\n            } else {\n                this.edit(formElement);\n            }\n        }\n        return formElement;\n    }\n\n    edit(formElement: FormElementTypes.FormElementInterface){\n        var _this = this;\n\n        // destroy previous editor\n        _this.currentlyEditing && _this.currentlyEditing.destroyEditor();\n\n        // create new  editor\n        _this.elements.containers.form_edit.append(formElement.getEditor());\n        // setTimeout(function(){\n        formElement.initEditor();\n        _this.currentlyEditing = formElement;\n        $(_this.elements.containers.formView).find('.form-group.active').removeClass('active');\n        $(formElement.domElements.main).addClass('active');\n        // }, 500);\n    }\n\n    get(){\n        // return this.formElements.map(function(c){\n        //     return c.get();\n        // });\n    }\n\n    getSchema(){\n        return this.formElements.map(function(formElement) {\n            return formElement.getSchema();\n        });\n    }\n\n    close(){\n        var _this = this;\n\n        // $('body').off('keydown.mapsvg');\n        \n        this.formElements.forEach( formElement => formElement.destroy() );\n\n        if(!_this.saved){\n            if(_this.data.id == undefined && _this.markerBackup){\n                var marker = _this.mapsvg.getMarker(_this.markerBackup.id);\n                marker.events.off('change');\n                marker.delete();\n                delete _this.markerBackup;\n            }\n\n            if(this.backupData){\n                if(this.backupData.location){\n                    _this.mapsvg.markerAdd(this.backupData.location.marker);\n                    _this.mapsvg.setEditingMarker(this.backupData.location.marker);\n                }\n            }\n            if(_this.markerBackup){\n                var editingMarker = _this.mapsvg.getEditingMarker();\n                if (editingMarker){\n                    editingMarker.setImage(_this.markerBackup.src);\n                    editingMarker.setPoint(_this.markerBackup.svgPoint);\n                    _this.mapsvg.unsetEditingMarker();\n                }\n            }\n        }\n\n        _this.admin && _this.admin.enableMarkersMode(false);\n        MapSVG.formBuilder = null;\n        this.events.trigger('close');\n    }\n\n    destroy(){\n        $(this.view).empty().remove();\n        this.sortable = null;\n    }\n\n    toJSON(addEmpty) {\n\n        var obj = {};\n\n        function add(obj, name, value){\n            if(!addEmpty && !value)\n                return false;\n            if(name.length == 1) {\n                obj[name[0]] = value;\n            }else{\n                if(obj[name[0]] == null){\n                    if(name[1]===''){\n                        obj[name[0]] = [];\n                    }else{\n                        obj[name[0]] = {};\n                    }\n                }\n\n                if(obj[name[0]].length !== undefined){\n                    obj[name[0]].push(value);\n                } else {\n                    add(obj[name[0]], name.slice(1), value);\n                }\n\n            }\n        }\n\n        $(this.elements.containers.formView).find('input, textarea, select').each(function(){\n            if( !$(this).data('skip')\n                &&\n                !$(this).prop('disabled')\n                &&\n                $(this).attr('name')\n                &&\n                !( !addEmpty && $(this).attr('type')=='checkbox' && $(this).attr('checked')==undefined)\n                &&\n                !( $(this).attr('type')=='radio' && $(this).attr('checked')==undefined))\n            {\n                var value;\n                if($(this).attr('type')=='checkbox'){\n                    value = $(this).prop('checked');\n                }else{\n                    value = $(this).val();\n                }\n                add(obj, $(this).attr('name').replace(/]/g, '').split('['), value);\n            }\n        });\n\n        return obj;\n    }\n\n    getRegionsList(): {id: string, title: string}[] {\n        return this.mapsvg.regions.map(function(r){\n            return {id: r.id, title: r.title};\n        });\n    }\n    getRegionsAsArray(): Region[] {\n        return this.mapsvg.regions;\n    }\n}","/**\n * FiltersController class adds filters for the database.\n * @param options\n * @constructor\n */\nimport {DetailsController} from \"../Details/Details.js\";\nimport {FormBuilder} from \"../FormBuilder/FormBuilder.js\";\nimport {Schema} from \"../Infrastructure/Server/Schema.js\";\nimport {Query} from \"../Infrastructure/Server/Query.js\";\n// import {RepositoryInterface} from \"../Core/Repository.js\";\nconst $ = jQuery;\n\nexport class FiltersController extends DetailsController {\n\n    schema: Schema;\n    hideFilters: boolean;\n    query: Query;\n    source: string;\n    location: string;\n    width: string;\n    filteredRegionsStatus: number;\n    modalLocation: string;\n    hideOnMobile: boolean;\n    hide: boolean;\n    padding: string;\n    showButtonText: boolean;\n    clearButton: boolean;\n    clearButtonText: boolean;\n\n    // repository: RepositoryInterface;\n    formBuilder: FormBuilder;\n\n    constructor(options: {[key: string]: any}) {\n        super(options);\n\n        this.showButtonText  = options.showButtonText;\n        this.clearButton     = options.clearButton;\n        this.clearButtonText = options.clearButtonText;\n        this.padding         = options.padding;\n\n        this.schema          = options.schema;\n        this.hideFilters     = options.hide;\n        // this.repository      = options.repository;\n        this.query           = options.query;\n    }\n\n    viewDidLoad() {\n        super.viewDidLoad();\n\n        var _this = this;\n\n        var filtersController = this;\n\n        this.formBuilder = new FormBuilder({\n            container: this.containers.contentView,\n            filtersMode: true,\n            schema: this.schema,\n            modal: this.modal,\n            filtersHide: this.hideFilters,\n            showButtonText: this.showButtonText,\n            clearButton: this.clearButton,\n            clearButtonText: this.clearButtonText,\n            editMode: false,\n            mapsvg: this.mapsvg,\n            data: this.query,\n            admin: false,\n            events: {\n                'changed.field': (field, value) => {\n                  let filters: any = {};\n                  filters[field] = value;\n                  this.query.setFilters(filters);\n                  _this.events.trigger('changed.field', _this, [field, value]);\n                  _this.events.trigger('changed.fields', _this, [field, value]);\n                },\n                'changed.search': (value) => {\n                  this.query.setSearch(value);\n                  _this.events.trigger('changed.search', _this, [value]);\n                },\n                'cleared': () => {\n                    this.query.clearFilters();\n                    _this.events.trigger('cleared.filters', _this, []);\n                },\n                'loaded': (_formBuilder) => {\n                    $(_formBuilder.container).find('.mapsvg-form-builder').css({\n                        padding: _this.padding\n                    });\n                    _this.updateScroll();\n                    _this.events.trigger('loaded');\n                }\n            }\n        });\n    }\n\n    /**\n     * Sets filters counter on the \"Show filters\" button when compact mode is enabled and filters are hidden\n     */\n    setFiltersCounter(){\n        if(this.hideFilters) {\n            // Don't include \"search\" filter into counter since it's always outside of the modal\n            var filtersCounter = Object.keys(this.query.filters).length;\n\n            var filtersCounterString = filtersCounter === 0 ? '' : filtersCounter.toString();\n            this.formBuilder && this.formBuilder.showFiltersButton && $(this.formBuilder.showFiltersButton.domElements.main).find('button').html(this.showButtonText + ' <b>' + filtersCounterString + '</b>');\n        }\n    }\n\n    setEventHandlers() {\n        super.setEventHandlers();\n\n        var _this = this;\n\n        $(this.containers.view).on('click','.mapsvg-btn-show-filters', function(){\n            _this.events.trigger('click.btn.showFilters');\n        });\n\n        // var filterDatabase = _this.repository;\n\n        // Handle search separately with throttle 400ms\n        // $(this.containers.view).on('paste keyup','input[data-parameter-name=\"search\"]',function(){\n        //     _this.throttle(_this.textSearch, 600, _this, $(this));\n        // });\n\n        // TODO may need the code below\n        /*\n        $(this.containers.view).on('change paste keyup','select,input[type=\"radio\"],input',function(){\n\n            if($(this).data('ignoreSelect2Change')){\n                $(this).data('ignoreSelect2Change', false);\n                return;\n            }\n\n            var filter = {};\n            var field = $(this).data('parameter-name');\n\n            if($(this).attr('data-parameter-name')==\"search\"){\n                return;\n            }\n\n            if($(this).attr('name') === 'distanceAddress' || field == \"search\"){\n                return;\n            }\n            if($(this).attr('name') === 'distanceLatLng' || $(this).attr('name') === 'distanceLength'){\n                // var distanceData = {\n                //     units: formBuilder.view.find('[name=\"distanceUnits\"]').val(),\n                //     latlng: formBuilder.view.find('[name=\"distanceLatLng\"]').val(),\n                //     length: formBuilder.view.find('[name=\"distanceLength\"]').val(),\n                //     address: formBuilder.view.find('[name=\"distanceAddress\"]').val()\n                // };\n                // var field = formBuilder.mapsvg.filtersSchema.schema.find(function(field){\n                //     return field.type === 'distance';\n                // });\n                // if(field.country){\n                //     distanceData.country = field.country;\n                // }\n                // if(distanceData.units && distanceData.length && distanceData.latlng){\n                //     filter.distance = distanceData;\n                //     var latlng = distanceData.latlng.split(',');\n                //     latlng = {lat: parseFloat(latlng[0]), lng: parseFloat(latlng[1])};\n                //     MapSVG.distanceSearch = {\n                //         latlng: latlng,\n                //         units: field.distanceUnits,\n                //         unitsLabel: field.distanceUnitsLabel\n                //     };\n                // } else {\n                //     filter.distance = null;\n                //     MapSVG.distanceSearch = null;\n                // }\n            } else if ($(this).closest('.mapsvg-checkbox-group').length > 0){\n\n                filter[field] = []\n                $(this).closest('.mapsvg-checkbox-group').find('input[type=\"checkbox\"]:checked').each(function(i,el){\n                    filter[field].push($(el).val());\n                });\n\n\n            } else {\n                filter[field] = $(this).val();\n            }\n\n            filterDatabase.query.setFilters(filter);\n\n            // _this.formBuilder.view.find('select,input[type=\"radio\"]').each(function(index){\n            //     var field = $(this).data('parameter-name');\n            //     var val = $(this).val();\n            //     filters[field] = val;\n            // });\n\n            // var data = {\n            //     filters: filter\n            // };\n            // if(_this.options.menu.searchFallback){\n            //     data.searchFallback = true;\n            // }\n\n            // filterDatabase.getAll(data);\n        });\n        */\n\n    }\n}","import {MapSVG} from \"../Core/globals.js\";\nimport {Controller} from \"../Core/Controller\";\nimport {SVGPoint} from \"../Location/Location\";\nimport {Marker} from \"../Marker/Marker\";\nimport {Region} from \"../Region/Region\";\nconst $ = jQuery;\n\n/**\n * Creates a scrollable popover in a map container.\n * @extends Controller\n * @param options\n * @constructor\n */\nexport class PopoverController extends Controller {\n\n    point: SVGPoint;\n    mapObject: Marker|Region;\n    yShift: number;\n    id: string;\n    mobileCloseBtn: HTMLElement;\n\n    constructor (options) {\n        super(options);\n        options.autoresize = true;\n        this.point = options.point;\n        this.yShift = options.yShift;\n        this.mapObject = options.mapObject;\n        this.id = this.mapObject.id+'_'+Math.random();\n        $(this.containers.main).data('popover-id', this.id);\n        //this._init();\n    }\n\n    /**\n     * Sets a point where the popover should be shown\n     * @param {ScreenPoint} point - [x,y]\n     */\n    setPoint(point){\n        this.point = point;\n    }\n\n    /**\n     * Returns HTML template for the popover toolbar\n     * @returns {string}\n     */\n    getToolbarTemplate(){\n        if(this.withToolbar)\n            return '<div class=\"mapsvg-popover-close\"></div>';\n        else\n            return '';\n    }\n\n    /**\n     * Final rendering steps of the popover\n     * @private\n     */\n    viewDidLoad(){\n        super.viewDidLoad.call(this);\n        var _this = this;\n        if(MapSVG.isPhone && _this.mapsvg.options.popovers.mobileFullscreen && !this.mobileCloseBtn){\n            this.mobileCloseBtn = $('<button class=\"mapsvg-mobile-modal-close mapsvg-btn\">'+_this.mapsvg.getData().options.mobileView.labelClose+'</button>')[0];\n            $(this.containers.view).append(this.mobileCloseBtn);\n        }\n        this.adjustPosition();\n        $(this.containers.main).toggleClass('mapsvg-popover-animate', true);\n        $(this.containers.main).toggleClass('mapsvg-popover-visible', true);\n        _this.adjustHeight();\n        _this.updateScroll();\n        this.autoresize && this.resizeSensor.setScroll();\n        this.events.trigger('shown', _this, [_this.mapsvg])\n    }\n\n    /**\n     * Adjusts height of the popover\n     */\n    adjustHeight() {\n        var _this = this;\n        $(_this.containers.main).height($(_this.containers.main).find('.mapsvg-auto-height').outerHeight()+(_this.containers.toolbar?$(_this.containers.toolbar).outerHeight():0));\n    }\n\n    /**\n     * Adjsuts position of the popver. Gets called on zoom and map container resize.\n     */\n    adjustPosition() {\n        var pos   = this.mapsvg.convertSVGToPixel(this.point);\n        pos.y   -= this.yShift;\n        pos.x = Math.round(pos.x);\n        pos.y = Math.round(pos.y);\n        $(this.containers.main).css({\n            'transform': 'translateX(-50%) translate(' + pos.x + 'px,' + pos.y+ 'px)'\n        });\n    }\n\n    /**\n     * Sets event handlers for the popover\n     */\n    setEventHandlers(){\n        var _this = this;\n        $('body').off('.popover.mapsvg');\n\n        $(this.containers.view).on('click touchend','.mapsvg-popover-close, .mapsvg-mobile-modal-close',function(e){\n            e.stopImmediatePropagation();\n            _this.close();\n        });\n\n        $('body').on('mouseup.popover.mapsvg touchend.popover.mapsvg', function(e){\n            if(_this.mapsvg.getData().isScrolling || $(e.target).closest('.mapsvg-directory').length || $(e.target).closest('.mapsvg-popover').length || $(e.target).hasClass('mapsvg-btn-map'))\n                return;\n            _this.close();\n        });\n    }\n\n    /**\n     * Closes the popover\n     */\n    close(){\n        var _this = this;\n        if(($(this.containers.main).data('popover-id')!= this.id) || !$(_this.containers.main).is(':visible'))\n            return;\n        _this.destroy();\n        if(_this.mapObject instanceof Region){\n            _this.mapsvg.deselectRegion(_this.mapObject);\n        }\n        if(_this.mapObject instanceof Marker){\n            _this.mapsvg.deselectAllMarkers();\n        }\n\n        _this.events.trigger('closed', _this, [_this.mapsvg]);\n    }\n\n    /**\n     * Destroys the popover\n     */\n    destroy(){\n        $(this.containers.main).toggleClass('mapsvg-popover-animate', false);\n        $(this.containers.main).toggleClass('mapsvg-popover-visible', false);\n        super.destroy.call(this);\n    }\n\n    /**\n     * Shows the popover\n     */\n    show(){\n        $(this.containers.main).toggleClass('mapsvg-popover-animate', true);\n        $(this.containers.main).toggleClass('mapsvg-popover-visible', true);\n    }\n}\n","/// <reference path=\"MapOptionsInterface.ts\" />\n/// <reference path=\"../../../index.d.ts\" />\n/// <reference types=\"@types/googlemaps\" />\n\nimport {MapSVG} from \"../Core/globals.js\"\nimport {DefaultOptions} from \"./default-options.js\"\nimport {tinycolor} from \"../Vendor/tinycolor.js\"\nimport {MapsRepository} from \"./MapsRepository\"\nimport {MapsV2Repository} from \"./MapsV2Repository\"\n// import {Handlebars} from \"../../handlebars.js\"\n// @ts-ignore\nimport Handlebars from \"Handlebars\";\nimport {} from 'googlemaps';\nimport {ResizeSensor} from '../Core/ResizeSensor'\nimport {\n    GroupOptionsInterface,\n    LayersControlOptionsInterface,\n    MapOptionsInterface,\n    ViewBox,\n    GeoViewBox\n} from \"./MapOptionsInterface\";\n\nimport {\n    Location,\n    GeoPoint,\n    ScreenPoint,\n    LocationOptionsInterface,\n    SVGPoint\n} from \"../Location/Location\"\nimport {Marker} from \"../Marker/Marker\"\nimport {MarkerCluster} from \"../MarkerCluster/MarkerCluster\"\nimport {Region} from \"../Region/Region\";\nimport {Query} from \"../Infrastructure/Server/Query\";\nimport {CustomObject} from \"../Object/CustomObject\";\nimport {Schema} from \"../Infrastructure/Server/Schema\";\nimport {SchemaField} from \"../Infrastructure/Server/SchemaField\";\nimport {SchemaRepository} from \"../Infrastructure/Server/SchemaRepository\";\nimport {DirectoryController} from \"../Directory/Directory\";\nimport {Events} from \"../Core/Events\";\nimport {Repository} from \"../Core/Repository\";\nimport {CustomObjectsRepository} from \"../Object/CustomObjectsRepository\";\nimport {FiltersController} from \"../Filters/Filters\";\nimport { MapObject } from \"../MapObject/MapObject\";\nimport {DetailsController} from \"../Details/Details\";\nimport {PopoverController} from \"../Popover/Popover\";\nimport {FormBuilder} from \"../FormBuilder/FormBuilder\";\nimport {ArrayIndexed} from \"../Core/ArrayIndexed\";\nimport {Server} from \"../Infrastructure/Server/Server\"\n\nconst $ = jQuery;\n\n/**\n * MapSVG.Map class. Creates a new map inside of the given HTML container, which is typically a DIV element.\n * @constructor\n *\n * @param {string} id - ID of the map container\n * @param {MapOptionsInterface} options - map settings\n *\n * @example\n * // Create the map in <div id=\"my-container-id\"></div>:\n * var mapsvg = new MapSVG.Map(\"my-container-id\", {\n *   source: \"/path/to/map.svg\",\n *   zoom: {on: true},\n *   scroll: {on: true}\n * });\n *\n * // Get map instance by container ID\n * var mapsvg = MapSVG.getById(\"my-container-id\");\n *\n * // Get map instance by index number\n * var mapsvg_1 = MapSVG.get(0); // first map on the page\n * var mapsvg_2 = MapSVG.get(1); // second map.\n *\n */\nclass MapSVGMap {\n\n    //static MapSVG = MapSVG;\n\n    id: number|string;\n    containerId: string;\n    markerOptions: object = {'src': MapSVG.urls.root+'markers/pin1_red.png'};\n\n    dirtyFields: string[];\n\n    regions: ArrayIndexed<Region>;\n    objects: ArrayIndexed<CustomObject>;\n\n    regionsRepository: Repository;\n    objectsRepository: Repository;\n    filtersRepository: Repository;\n    schemaRepository: SchemaRepository;\n\n    events: Events;\n\n    resizeSensor: ResizeSensor;\n\n    liveCss: HTMLStyleElement;\n\n    defaults: MapOptionsInterface;\n    options: MapOptionsInterface;\n    optionsDelta: {[key:string]: any};\n\n    mapIsGeo: boolean;\n    geoCoordinates: boolean;\n    editMode: boolean;\n    highlightedRegions: Array<Region>;\n    editRegions: {on: boolean};\n    editMarkers: {on: boolean};\n    clickAddsMarker: boolean;\n    editData: {on: boolean};\n    disableLinks: boolean;\n    markerEditHandler: Function;\n    regionEditHandler: Function;\n    region_clicked: Region;\n    highlighted_marker: Marker;\n\n    googleMaps?: {\n        loaded: boolean,\n        map: any,\n        zoomLimit?: boolean,\n        overlay?: any;\n        initialized: boolean;\n    };\n\n    groups: Array<GroupOptionsInterface>;\n\n    svgDefault: {\n        viewBox?: ViewBox,\n        geoViewBox?: GeoViewBox,\n        width?: number,\n        height?: number\n    }\n\n    viewBox: ViewBox;\n    _viewBox: ViewBox;\n    viewBoxFull: ViewBox;\n    viewBoxFake: ViewBox;\n    whRatioFull: number;\n    geoViewBox?: GeoViewBox;\n\n    mapLonDelta: number;\n    mapLatBottomDegree: number;\n\n\n    zoomLevel: number;\n    _zoomLevel: number;\n    zoomLevels: ArrayIndexed<{\n            zoomLevel: number,\n            viewBox: ViewBox,\n            _scale: number\n        }>;\n    isZooming: boolean;\n    touchZoomStart: boolean;\n    scaleDistStart: number;\n    scrollStarted: boolean;\n\n    isScrolling: boolean;\n    zoomDelta: number;\n    whRatio: number;\n    vbStart: boolean;\n\n    scale: number;\n    _scale: number;\n    superScale: number;\n    scroll: {\n        tx?: number, ty?: number,\n        vxi?: number, vyi?: number, // initial viewbox when scrollning started\n        x?: number, y?: number, // mouse coordinates when scrolling started\n        dx?: number, dy?: number, // mouse delta\n        vx?: number, vy?: number, // new viewbox x/y\n        gx?: number, gy?: number, // for google maps scroll\n        touchScrollStart: number\n    };\n\n    iosDownscaleFactor: number;\n\n    containers: {\n        svg?: SVGSVGElement,\n        map?: HTMLElement,\n        googleMaps?: HTMLElement,\n        mapContainer?: HTMLElement,\n        scrollpane?: HTMLElement,\n        wrap?: HTMLElement,\n        wrapAll?: HTMLElement,\n        loading?: HTMLElement,\n        directory?: HTMLElement,\n        filters?: HTMLElement,\n        detailsView?: HTMLElement,\n        popover?: HTMLElement,\n        tooltip?: HTMLElement,\n        layers?: HTMLElement,\n        layersControl?: HTMLElement,\n        layersControlLabel?: HTMLElement,\n        layersControlList?: HTMLElement,\n        layersControlListNano?: HTMLElement,\n        pagerMap?: HTMLElement,\n        pagerDir?: HTMLElement,\n        leftSidebar?: HTMLElement,\n        rightSidebar?: HTMLElement,\n        header?: HTMLElement,\n        footer?: HTMLElement,\n        filterTags?: HTMLElement,\n        filtersModal?: HTMLElement,\n        clustersCss?: HTMLStyleElement,\n        clustersHoverCss?: HTMLStyleElement,\n        markersCss?: HTMLStyleElement,\n        controls?: HTMLElement,\n        zoomButtons?: HTMLElement,\n        legend?: {\n            gradient: Array<HTMLElement>,\n            table: HTMLElement,\n            container: HTMLElement\n        },\n        choroplethSourceSelect?: {\n            container: HTMLElement,\n            //label: HTMLElement,\n            select: HTMLElement,\n            options: Array<HTMLElement>\n        }\n    };\n    containersCreated: boolean;\n\n    controllers: {\n        detailsView?: DetailsController,\n        popover?: PopoverController,\n        directory?: DirectoryController,\n        // TODO add tooltip controller\n        tooltip?: any,\n        filters?: FiltersController\n    };\n\n    templates: {\n        [key: string]: Function // returned by Handlebars.compile()\n    }\n\n    markers: ArrayIndexed<Marker>;\n    clusters: object;\n    markersClusters: ArrayIndexed<MarkerCluster>;\n    firstDataLoad: boolean;\n    clustersByZoom: Array<any>;\n    selected_id: Array<string>;\n    selected_marker: Marker;\n    clusterizerWorker: Worker;\n    editingMarker: Marker;\n\n    filtersSchema: Schema;\n\n    layers: {\n        [key: string]: HTMLElement\n    };\n    controls: {\n        zoom: HTMLElement,\n        userLocation: HTMLElement,\n        zoomReset: HTMLElement\n    };\n    formBuilder: any;\n    tooltip: {posOriginal: {[key: string]: string}, posShifted: {[key: string]: string}, posShiftedPrev: {[key: string]: string}, mirror: {[key: string]: number}}\n    firefoxScroll: {\n        insideIframe: boolean;\n        scrollX: number;\n        scrollY: number;\n    };\n    canZoom: boolean;\n    eventsPreventList: {[key: string]: boolean};\n    googleMapsScript: HTMLScriptElement;\n\n    fitOnDataLoadDone: boolean;\n    fitDelta: number;\n    lastTimeFitWas: number;\n    userLocation: Location;\n    userLocationMarker: Marker;\n    setMarkersByField: boolean;\n    locationField: SchemaField;\n    popoverShowingFor: MapObject;\n\n    svgFileLastChanged: number;\n\n\n    constructor(containerId: string, map: {id: number, options: MapOptionsInterface, svgFileLastChanged: number, version: string}) {\n\n        var options = map.options;\n\n        this.updateOutdatedOptions(options);\n\n        this.dirtyFields = [];\n        \n        this.containerId = containerId;\n        this.options     = <MapOptionsInterface>$.extend(true, {}, DefaultOptions, options);\n\n        // cut domain to avoid cross-domain errors\n        if(this.options.source.indexOf('//')===0)\n            this.options.source = this.options.source.replace(/^\\/\\/[^\\/]+/, '').replace('//','/');\n        else\n            this.options.source = this.options.source.replace(/^.*:\\/\\/[^\\/]+/, '').replace('//','/');\n\n        this.editMode = this.options.editMode;\n        delete this.options.editMode;\n\n        this.id = map.id;\n        this.svgFileLastChanged = map.svgFileLastChanged;\n\n        this.regions = new ArrayIndexed('id');\n        this.objects = new ArrayIndexed('id');\n\n        this.events = new Events(this);\n\n        this.highlightedRegions = [];\n        this.editRegions = {on:false};\n        this.editMarkers = {on:false};\n        this.editData    = {on:false};\n\n        this.controllers = {};\n\n        // Set containers\n        this.containers = {\n            map: document.getElementById(this.containerId),\n            scrollpane: $('<div class=\"mapsvg-scrollpane\"></div>')[0],\n            layers: $('<div class=\"mapsvg-layers-wrap\"></div>')[0]\n        };\n\n        this.containers.map.appendChild(this.containers.scrollpane);\n        this.containers.scrollpane.appendChild(this.containers.layers);\n\n        this.whRatio = 0;\n        this.isScrolling = false;\n        this.markerOptions = {};\n        this.svgDefault = {};\n        this.scale  = 1;         // absolute scale\n        this._scale = 1;         // relative scale starting from current zoom level\n        this.selected_id    = [];\n\n        this.regions           = new ArrayIndexed('id');\n\n        if(!this.options.database.regionsTableName){\n            this.options.database.regionsTableName = 'regions_'+this.id;\n        }\n        if(!this.options.database.objectsTableName){\n            this.options.database.objectsTableName = 'objects_'+this.id;\n        }\n\n        this.regionsRepository = new Repository('region', 'regions/'+this.options.database.regionsTableName);\n        // Turn off pagination for Regions:\n        this.regionsRepository.query.update({perpage: 0});\n\n        this.objectsRepository = new Repository('object', 'objects/'+this.options.database.objectsTableName);\n        this.objectsRepository.query.update({perpage: this.options.database.pagination.perpage});\n\n        this.schemaRepository  = new SchemaRepository();\n\n        this.markers         = new ArrayIndexed('id');\n        this.markersClusters = new ArrayIndexed('id');\n        this._viewBox       = new ViewBox(0,0,0,0); // initial viewBox\n        this.viewBox        = new ViewBox(0,0,0,0); // current viewBox\n        this.zoomLevel      = 0;\n        this.scroll         = {\n            tx: 0, ty: 0,\n            vxi: 0, vyi: 0, // initial viewbox when scrollning started\n            x: 0, y: 0, // mouse coordinates when scrolling started\n            dx: 0, dy: 0, // mouse delta\n            vx: 0, vy: 0, // new viewbox x/y\n            gx: 0, gy: 0, // for google maps scroll\n            touchScrollStart: 0\n        };\n        this.layers         = {};\n        this.geoCoordinates = false;\n        this.geoViewBox     = new GeoViewBox(new GeoPoint(0,0), new GeoPoint(0,0));\n        this.eventsPreventList  = {};\n        this.googleMaps     = {loaded: false, initialized: false, map: null, zoomLimit: true};\n\n\n        this.init();\n    }\n\n    /**\n     * Sets visiblity switches for groups of SVG objects\n     * @private\n     */\n    setGroups(groups?: GroupOptionsInterface[]){\n        let _this = this;\n\n        if(!this.groups){\n            _this.groups = new ArrayIndexed('id', _this.options.groups, {autoId: true, unique: true});\n        } else {\n            this.options.groups = this.groups;\n        }\n\n        _this.groups.forEach(function(g: GroupOptionsInterface){\n            g.objects && g.objects.length && g.objects.forEach(function(obj){\n                _this.containers.svg.querySelector('#'+obj.value).classList.toggle('mapsvg-hidden', !g.visible);\n            });\n        });\n    }\n\n\n\n    /**\n     * Returns the list of options for visibility settings in admin.js\n     */\n    getGroupSelectOptions(){\n        var _this = this;\n        var id;\n        var optionGroups = [];\n        var options = [];\n        var options2 = [];\n\n        $(_this.containers.svg).find('g').each(function(index){\n            var id = $(this)[0].getAttribute('id');\n            if(id){\n                var title = $(this)[0].getAttribute('title');\n                options.push({label: title, value: id});\n            }\n        });\n        optionGroups.push({title: \"SVG Layers / Groups\", options: options});\n\n        $(_this.containers.svg).find('path,ellipse,circle,polyline,polygon,rectangle,img,text').each(function(index){\n            var id = $(this)[0].getAttribute('id');\n            if(id){\n                var title = $(this)[0].getAttribute('title');\n                options2.push({label: title, value: id});\n            }\n        });\n        optionGroups.push({title: \"Other SVG objects\", options: options2});\n\n\n        return optionGroups;\n    }\n\n    /**\n     * Sets visibility switches\n     * @param {object} options - Options\n     * @private\n     */\n    setLayersControl (options?: LayersControlOptionsInterface) {\n\n        var _this = this;\n\n        if (options)\n            $.extend(true, this.options.layersControl, options);\n\n        if (this.options.layersControl.on) {\n            if (!this.containers.layersControl) {\n                this.containers.layersControl = document.createElement('div');\n                this.containers.layersControl.classList.add('mapsvg-layers-control');\n\n                this.containers.layersControlLabel = document.createElement('div');\n                this.containers.layersControlLabel.classList.add('mapsvg-layers-label');\n                this.containers.layersControl.appendChild(this.containers.layersControlLabel);\n\n                let layersControlWrap = document.createElement('div');\n                layersControlWrap.classList.add('mapsvg-layers-list-wrap');\n                this.containers.layersControl.appendChild(layersControlWrap);\n\n                this.containers.layersControlListNano = document.createElement('div');\n                this.containers.layersControlListNano.classList.add('nano');\n                layersControlWrap.appendChild(this.containers.layersControlListNano);\n\n                this.containers.layersControlList = document.createElement('div');\n                this.containers.layersControlList.classList.add('mapsvg-layers-list');\n                this.containers.layersControlList.classList.add('nano-content');\n                this.containers.layersControlListNano.appendChild(this.containers.layersControlList);\n\n                this.containers.mapContainer.appendChild(this.containers.layersControl);\n            }\n            this.containers.layersControl.style.display = 'block';\n            this.containers.layersControlLabel.innerHTML = this.options.layersControl.label;\n\n            this.containers.layersControlLabel.style.display = 'block';\n            this.containers.layersControlList.innerHTML = '';\n            while (this.containers.layersControlList.firstChild) {\n                this.containers.layersControlList.removeChild(this.containers.layersControlList.firstChild);\n            }\n            this.containers.layersControl.classList.remove('mapsvg-top-left', 'mapsvg-top-right', 'mapsvg-bottom-left', 'mapsvg-bottom-right');\n            this.containers.layersControl.classList.add('mapsvg-' + this.options.layersControl.position);\n            if (this.options.menu.on && !this.options.menu.customContainer && this.options.layersControl.position.indexOf('left') !== -1) {\n                this.containers.layersControl.style.left = this.options.menu.width;\n            }\n\n            this.containers.layersControl.style.maxHeight = this.options.layersControl.maxHeight;\n\n            this.options.groups.forEach((g) => {\n                let item = document.createElement('div');\n                item.classList.add('mapsvg-layers-item');\n                item.setAttribute('data-group-id', g.id);\n                item.innerHTML = '<input type=\"checkbox\" class=\"ios8-switch ios8-switch-sm\" ' + (g.visible ? 'checked' : '') + ' /><label>' + g.title + '</label>';\n                this.containers.layersControlList.appendChild(item);\n            });\n\n            // @ts-ignore\n            $(this.containers.layersControlListNano).nanoScroller({\n                preventPageScrolling: true,\n                iOSNativeScrolling: true\n            });\n\n            $(this.containers.layersControl).off();\n            $(this.containers.layersControl).on('click', '.mapsvg-layers-item', function () {\n                var id = $(this).data('group-id');\n                var input = $(this).find('input');\n                input.prop('checked', !input.prop('checked'));\n                _this.groups.forEach(function (g) {\n                    if (g.id === id) g.visible = !g.visible;\n                });\n                _this.setGroups();\n            });\n            $(this.containers.layersControlLabel).on('click', () => {\n                $(_this.containers.layersControlLabel).toggleClass('closed');\n            });\n\n            $(this.containers.layersControlLabel).toggleClass('closed', !this.options.layersControl.expanded);\n\n        } else {\n            if (this.containers.layersControl) {\n                this.containers.layersControl.style.display = 'none';\n            }\n        }\n    }\n\n    loadDataObjects(params?: any){\n        return this.objectsRepository.find(params);\n    }\n\n    loadDirectory(){\n\n        // If \"Load DB on start\" is off then\n        // don't load directory to prevent 'no records found' message from appearing\n        if(!this.editMode && this.options.menu.source === 'database' && this.objectsRepository.getLoaded().length === 0){\n            return false;\n        }\n        if(this.options.menu.on){\n            this.controllers.directory.loadItemsToDirectory();\n        }\n        this.setPagination();\n\n    }\n\n    /**\n     * Adds pagination controls to the map and/or directory\n     */\n    setPagination (){\n        var _this = this;\n\n        (this.containers.pagerMap) && $(this.containers.pagerMap).empty().remove();\n        (this.containers.pagerDir) && $(this.containers.pagerDir).empty().remove();\n\n        if(_this.options.database.pagination.on && _this.options.database.pagination.perpage !== 0){\n\n            this.containers.directory.classList.toggle('mapsvg-with-pagination', (['directory','both'].indexOf(_this.options.database.pagination.showIn)!==-1));\n            this.containers.map.classList.toggle('mapsvg-with-pagination', (['map','both'].indexOf(_this.options.database.pagination.showIn)!==-1));\n\n            if(_this.options.menu.on){\n                this.containers.pagerDir = _this.getPagination();\n                _this.controllers.directory.addPagination(this.containers.pagerDir);\n            }\n            this.containers.pagerMap = _this.getPagination();\n            this.containers.map.appendChild(this.containers.pagerMap);\n        }\n    }\n    /**\n     * Generates HTML with pagination buttons and attaches callback event on button click\n     * @param {function} callback - Callback function that should be called on click on a next/prev page button\n     */\n    getPagination (callback?: Function): HTMLElement{\n        var _this = this;\n\n        // pager && (pager.empty().remove());\n        var pager = $('<nav class=\"mapsvg-pagination\"><ul class=\"pager\"><!--<li class=\"mapsvg-first\"><a href=\"#\">First</a></li>--><li class=\"mapsvg-prev\"><a href=\"#\">&larr; '+_this.options.database.pagination.prev+' '+_this.options.database.pagination.perpage+'</a></li><li class=\"mapsvg-next\"><a href=\"#\">'+_this.options.database.pagination.next+' '+_this.options.database.pagination.perpage+' &rarr;</a></li><!--<li class=\"mapsvg-last\"><a href=\"#\">Last</a></li>--></ul></nav>');\n\n        if(this.objectsRepository.onFirstPage() && this.objectsRepository.onLastPage()){\n            pager.hide();\n        }else{\n            pager.find('.mapsvg-prev').removeClass('disabled');\n            pager.find('.mapsvg-first').removeClass('disabled');\n            pager.find('.mapsvg-last').removeClass('disabled');\n            pager.find('.mapsvg-next').removeClass('disabled');\n\n            this.objectsRepository.onLastPage() &&\n            (pager.find('.mapsvg-next').addClass('disabled') && pager.find('.mapsvg-last').addClass('disabled'));\n\n            this.objectsRepository.onFirstPage() &&\n            (pager.find('.mapsvg-prev').addClass('disabled') && pager.find('.mapsvg-first').addClass('disabled'));\n        }\n\n        pager.on('click','.mapsvg-next:not(.disabled)', (e) => {\n            e.preventDefault();\n            if(this.objectsRepository.onLastPage())\n                return;\n            var query = new Query({page: this.objectsRepository.query.page+1});\n            this.objectsRepository.find(query).done(function(){\n                callback && callback();\n            });\n        }).on('click','.mapsvg-prev:not(.disabled)',function(e){\n            e.preventDefault();\n            if(_this.objectsRepository.onFirstPage())\n                return;\n            var query = new Query({page: _this.objectsRepository.query.page-1});\n            _this.objectsRepository.find(query).done(function(){\n                callback && callback();\n            });\n        }).on('click','.mapsvg-first:not(.disabled)',function(e){\n            e.preventDefault();\n            if(_this.objectsRepository.onFirstPage())\n                return;\n            var query = new Query({page: 1});\n            _this.objectsRepository.find(query).done(function(){\n                callback && callback();\n            });\n        }).on('click','.mapsvg-last:not(.disabled)',function(e){\n            e.preventDefault();\n            if(_this.objectsRepository.onLastPage())\n                return;\n            let query = new Query({lastpage: true});\n            _this.objectsRepository.find(query).done(function(){\n                callback && callback();\n            });\n        });\n\n        return pager[0];\n    }\n\n    /**\n     * Deletes all markers from the map\n     */\n    deleteMarkers(){\n        this.markers.forEach((marker: Marker)=> marker.delete());\n        this.markers.clear();\n    }\n\n    /**\n     * Deletes all markers from the map\n     */\n    deleteClusters(){\n        if(this.markersClusters){\n            this.markersClusters.forEach(function(markerCluster){\n                markerCluster.destroy();\n            });\n            this.markersClusters.clear();\n        }\n    }\n\n    /**\n     * Adds locations from the database to the map - as markers or as clusters if clustering is enabled.\n     * @private\n     */\n    addLocations(){\n        var _this = this;\n        this.firstDataLoad = this.firstDataLoad === undefined;\n\n        var locationField = this.objectsRepository.getSchema().getFieldByType('location');\n        if(!locationField){\n            return false;\n        }\n        locationField = locationField.name;\n\n        if(locationField) {\n\n            if(this.firstDataLoad){\n                this.setMarkerImagesDependency();\n            }\n\n            _this.deleteMarkers();\n            _this.deleteClusters();\n\n            _this.clusters = {};\n            _this.clustersByZoom = [];\n            _this.deleteClusters();\n\n            if(this.objectsRepository.getLoaded().length > 0){\n                this.objectsRepository.getLoaded().forEach(function(object){\n                    if(object[locationField]){\n                        if(object[locationField].geoPoint || object[locationField].svgPoint){\n                            new Marker({\n                                location: object[locationField],\n                                object: object,\n                                mapsvg: _this\n                            });\n                        }\n                    }\n                });\n                if(_this.options.clustering.on){\n                    _this.startClusterizer();\n                } else {\n                    this.objectsRepository.getLoaded().forEach(function(object){\n                        if(object.location && object.location.marker){\n                            _this.markerAdd(object.location.marker);\n                        }\n                    });\n                    _this.mayBeFitMarkers();\n                }\n            }\n        }\n    }\n    /**\n     * Stores a set of markers/clusters for a certain zoom level for later use.\n     * This method gets called by a worker thread that calculates markers/clusters for all zoom levels.\n     * @param zoomLevel\n     * @param clusters\n     * @private\n     */\n    addClustersFromWorker (zoomLevel: number, clusters){\n\n        var _this = this;\n\n        _this.clustersByZoom[zoomLevel] = [];\n        for(var cell in clusters){\n            var markers = clusters[cell].markers.map(function(marker){\n                // TODO check this, looks broken\n                return _this.objectsRepository.objects.findById(marker.id).location.marker;\n            });\n            _this.clustersByZoom[zoomLevel].push( new MarkerCluster({\n                markers: markers,\n                svgPoint: new SVGPoint(clusters[cell].x, clusters[cell].y),\n                cellX: clusters[cell].cellX,\n                cellY: clusters[cell].cellY\n            }, _this));\n\n        }\n        if(_this.zoomLevel === zoomLevel){\n            _this.clusterizeMarkers();\n        }\n    }\n    /**\n     * Starts clusterizer worker in a separate thread\n     * @private\n     */\n    startClusterizer (){\n\n        var _this = this;\n\n        if(!_this.objectsRepository || _this.objectsRepository.getLoaded().length === 0){\n            return;\n        }\n        var locationField = _this.objectsRepository.getSchema().getFieldByType('location');\n        if(!locationField){\n            return false;\n        }\n\n        if(!_this.clusterizerWorker){\n            _this.clusterizerWorker = new Worker(MapSVG.urls.root+\"js/mapsvg/Core/clustering.js\");\n\n            // Receive messages from postMessage() calls in the Worker\n            _this.clusterizerWorker.onmessage = function(evt) {\n                if(evt.data.clusters){\n                    _this.addClustersFromWorker(evt.data.zoomLevel, evt.data.clusters);\n                }\n            };\n        }\n\n        // Pass data to the WebWorker\n        var objectsData = [];\n        _this.objectsRepository.getLoaded().forEach(function(o){\n            objectsData.push({id: o.id, x: o.location ? o.location.marker.svgPoint.x : null, y: o.location ? o.location.marker.svgPoint.y : null})\n        })\n        _this.clusterizerWorker.postMessage({\n            objects: objectsData,\n            cellSize: 50,\n            mapWidth: $(_this.containers.map).width(),\n            zoomLevels: _this.zoomLevels,\n            zoomLevel: _this.zoomLevel,\n            zoomDelta: _this.zoomDelta,\n            svgViewBox: _this.svgDefault.viewBox\n        });\n\n        _this.events.on(\"zoom\", function(){\n            _this.clusterizerWorker.postMessage({\n                message: \"zoom\",\n                zoomLevel: _this.zoomLevel\n            });\n        });\n\n    }\n    /**\n     * Starts clustering markers on the map\n     * @property {boolean} skipFitMarkers - Don't do \"fit markers\" action. Used to prevent fitting markers\n     * on changinh zoom level.\n     * @private\n     */\n    clusterizeMarkers (skipFitMarkers?: boolean){\n        var _this = this;\n\n        $(_this.layers.markers).children().each(function(i,obj){\n            $(obj).detach();\n        });\n        _this.markers.clear();\n        _this.markersClusters.clear();\n\n        // $(_this.containers.map).addClass('no-transitions-markers');\n\n        _this.clustersByZoom && _this.clustersByZoom[_this.zoomLevel] && _this.clustersByZoom[_this.zoomLevel].forEach(function(cluster){\n\n            // Don't clusterize on google maps with zoom level >= 17\n            if(_this.options.googleMaps.on && _this.googleMaps.map && _this.googleMaps.map.getZoom()>=17){\n                _this.markerAdd(cluster.markers[0]);\n\n            } else {\n                if(cluster.markers.length > 1) {\n                    _this.markersClusterAdd(cluster);\n                } else {\n                    _this.markerAdd(cluster.markers[0]);\n                }\n            }\n        });\n\n        if(_this.editingMarker){\n            _this.markerAdd(_this.editingMarker);\n        }\n\n        if(!skipFitMarkers){\n            _this.mayBeFitMarkers();\n        }\n\n        if(_this.options.labelsMarkers.on){\n            _this.setLabelsMarkers();\n        }\n\n        // $(_this.containers.map).removeClass('no-transitions-markers');\n    }\n    /**\n     * Returns URL of the mapsvg.css file\n     * @returns {string} URL\n     * @private\n     */\n    getCssUrl(){\n        var _this = this;\n        return MapSVG.urls.root+'css/mapsvg.css';\n    }\n    /**\n     * Checks if the map is geo-calibrated\n     * @returns {boolean}\n     */\n    isGeo(){\n        var _this = this;\n        return _this.mapIsGeo;\n    }\n    /**\n     * Converts a string to function\n     * @param string\n     * @returns {function|object} Function or object {error: \"error text\"}\n     * @private\n     *\n     */\n    functionFromString(string: string): Function|{error: string} {\n        var _this = this;\n        var func;\n        var error = {error: ''};\n        var fn = string.trim();\n        if(fn.indexOf(\"{\")==-1 || fn.indexOf(\"function\")!==0 || fn.indexOf(\"(\")==-1){\n            return {error: \"MapSVG user function error: no function body.\"};\n        }\n        var fnBody = fn.substring(fn.indexOf(\"{\") + 1, fn.lastIndexOf(\"}\"));\n        var params = fn.substring(fn.indexOf(\"(\") + 1, fn.indexOf(\")\"));\n        try{\n            func = new Function(params,fnBody);\n        }catch(err){\n            error = err;\n        }\n\n        if (!error.error)\n            return func;\n        else\n            return error;//{error: {line: error.line, text: \"MapSVG user function error: (line \"+error.line+\"): \"+error.message}};\n    }\n    /**\n     * Returns map options.\n     * @param {bool} forTemplate - If options should be formatted for use in a template\n     * @param {bool} forWeb - If options should be formatted for use in the web\n     * @param {object} optionsDelta - used by backend WP admin only, part of options from the previous view mode\n     * @returns {object}\n     */\n    getOptions(forTemplate: boolean, forWeb: boolean) {\n\n        var _this = this;\n\n        var options = <MapOptionsInterface>$.extend(true, {}, _this.options);\n\n        $.extend(true, options, this.optionsDelta);\n\n        options.viewBox = _this._viewBox.toArray();\n        options.filtersSchema = _this.filtersSchema.getFieldsAsArray();\n        if (options.filtersSchema.length > 0) {\n            options.filtersSchema.forEach(function (field) {\n                if (field.type === 'distance') {\n                    field.value = '';\n                }\n            });\n        }\n\n        // @ts-ignore - old options field from MapSVG versions <5.x\n        delete options.markers;\n\n        if (forTemplate){\n            // @ts-ignore - may this needs to be removed?\n            options.svgFilename = options.source.split('/').pop();\n            // @ts-ignore - may this needs to be removed?\n            options.svgFiles = MapSVG.svgFiles;\n        }\n\n        if(forWeb)\n            $.each(options,function(key,val){\n                if(JSON.stringify(val) == JSON.stringify(_this.defaults[key]))\n                    delete options[key];\n            });\n        delete options.backend;\n\n        return options;\n    }\n\n    /**\n     * Restore delta options, used by MapSVG-Admin\n     * @private\n     */\n    restoreDeltaOptions(): void {\n        this.update(this.optionsDelta);\n        this.optionsDelta = {};\n    }\n\n    /**\n     * Sets event handlers\n     * @param {object} functions - Callbacks {eventName, eventName, ...}\n     */\n    setEvents(functions: {[key: string]: string|Function}){\n\n        // TODO add namespaces for events as done in jQuery\n\n        var _this = this;\n        let compiledFunction;\n\n        for (var eventName in functions) {\n\n            if (typeof functions[eventName] === 'string') {\n                compiledFunction = functions[eventName] != \"\" ? <Function>this.functionFromString(<string>functions[eventName]) : null;\n                if (!compiledFunction || compiledFunction.error || (compiledFunction instanceof TypeError || compiledFunction instanceof SyntaxError)){\n                    continue;\n                }\n            } else if(typeof functions[eventName] === 'function') {\n                compiledFunction = <Function>functions[eventName];\n            }\n\n            // Reset events\n            _this.events.off(eventName);\n            // Set new event\n            _this.events.on(eventName, compiledFunction);\n\n            if(eventName.indexOf('directory')!==-1){\n                var event = eventName.split('.')[0];\n\n                if(_this.controllers && _this.controllers.directory){\n                    _this.controllers.directory.events.off(event);\n                    _this.controllers.directory.events.on(event, compiledFunction);\n                }\n            }\n\n        }\n\n        $.extend(true, _this.options.events, functions);\n    }\n    /**\n     * Sets map actions that should be performed on Region click. Marker click, etc.\n     * @param options\n     *\n     * @example\n     * mapsvg.setActions({\n     *   \"click.region\": {\n     *     showPopover: true,\n     *     showDetails: false\n     *   }\n     * })\n     */\n    setActions (options){\n        var _this = this;\n        $.extend(true, _this.options.actions, options);\n    }\n    /**\n     * Sets Details View options\n     * @param {object} options - Options\n     */\n    setDetailsView(options?: {[key: string]: any}){\n\n        var _this = this;\n\n        options = options || _this.options.detailsView || {};\n        $.extend(true, _this.options.detailsView, options);\n\n        // Since 5.0.0: no top/near locations.\n        if(_this.options.detailsView.location === 'top' && _this.options.menu.position === 'left'){\n            _this.options.detailsView.location = 'leftSidebar';\n        } else if(_this.options.detailsView.location === 'top' && _this.options.menu.position === 'right'){\n            _this.options.detailsView.location = 'rightSidebar';\n        }\n        if(_this.options.detailsView.location === 'near'){\n            _this.options.detailsView.location = 'map';\n        }\n\n        if(!_this.containers.detailsView){\n            _this.containers.detailsView  = $('<div class=\"mapsvg-details-container\"></div>')[0];\n        }\n\n        $(_this.containers.detailsView).toggleClass('mapsvg-details-container-relative', !(MapSVG.isPhone && _this.options.detailsView.mobileFullscreen) && !_this.shouldBeScrollable(_this.options.detailsView.location));\n\n\n        if(_this.options.detailsView.location === 'custom'){\n            $('#'+_this.options.detailsView.containerId).append($(_this.containers.detailsView));\n        } else {\n            if(MapSVG.isPhone && _this.options.detailsView.mobileFullscreen){\n                $('body').append($(_this.containers.detailsView));\n                $(_this.containers.detailsView).addClass('mapsvg-container-fullscreen')\n            }else{\n                _this.containers[_this.options.detailsView.location].append(_this.containers.detailsView);\n            }\n            if(_this.options.detailsView.margin){\n                $(_this.containers.detailsView).css('margin',_this.options.detailsView.margin);\n            }\n            $(_this.containers.detailsView).css('width',_this.options.detailsView.width);\n        }\n    }\n    /**\n     * Sets mobile view options\n     * @param options\n     */\n    setMobileView(options){\n        var _this = this;\n        $.extend(true, _this.options.mobileView, options);\n    }\n    /**\n     * Attaches DB Objects to Regions\n     * @param object\n     */\n    attachDataToRegions(object?: any){\n        var _this = this;\n\n        _this.regions.forEach(function(region){\n            region.objects = [];\n        });\n\n        _this.objectsRepository.getLoaded().forEach(function(obj, index){\n            var regions = obj.getRegions(_this.regionsRepository.schema.name);\n            if(regions && regions.length){\n                regions.forEach(function(region){\n                    var r = _this.getRegion(region.id);\n                    if(r)\n                        r.objects.push(obj);\n                });\n            }\n        });\n    }\n    /**\n     * Sets templates body\n     * @param {object} templates - Key:value pairs of template names and HTML content\n     */\n    setTemplates(templates){\n        var _this = this;\n        _this.templates = _this.templates || {};\n        for (var name in templates){\n            if(name != undefined){\n                _this.options.templates[name] = templates[name];\n                var t = _this.options.templates[name];\n                if(name == 'directoryItem' || name == 'directoryCategoryItem'){\n                    var dirItemTemplate = _this.options.templates.directoryItem;\n                    t = '{{#each items}}<div id=\"mapsvg-directory-item-{{id}}\" class=\"mapsvg-directory-item\" data-object-id=\"{{id}}\">'+dirItemTemplate+'</div>{{/each}}';\n                    if(_this.options.menu.categories && _this.options.menu.categories.on && _this.options.menu.categories.groupBy){\n                        var t2 = _this.options.templates['directoryCategoryItem'];\n                        t = '{{#each items}}{{#with category}}<div id=\"mapsvg-category-item-{{value}}\" class=\"mapsvg-category-item\" data-category-value=\"{{value}}\">'+t2+'</div><div class=\"mapsvg-category-block\" data-category-id=\"{{value}}\">{{/with}}'+t+'</div>{{/each}}';\n                    }\n                    name = 'directory';\n                }\n\n\n                try {\n                    _this.templates[name] = Handlebars.compile(t, {strict: false});\n                } catch(err) {\n                    console.error(err);\n                    _this.templates[name] = Handlebars.compile(\"\", {strict: false});\n                }\n\n                if(_this.editMode && ((name == 'directory' || name == 'directoryCategoryItem') && _this.controllers && _this.controllers.directory)){\n                    _this.controllers.directory.templates.main = _this.templates[name];\n                    _this.loadDirectory();\n                }\n            }\n        }\n    }\n    // /**\n    //  * Sets status of a Region\n    //  * @param {Region} region\n    //  * @param {number} status\n    //  */\n    // setRegionStatus (region: Region, status: number){\n    //     var _this = this;\n    //     var _status = _this.regionsRepository.getSchema().getField('status').options.get(status.toString());\n    //     // @ts-ignore\n    //     if(_status.disabled)\n    //         region.setDisabled(true);\n    //     else\n    //         region.setDisabled(false);\n    //\n    //     // @ts-ignore\n    //     if(_status.color){\n    //         // @ts-ignore\n    //         region.setFill(_status.color);\n    //     }\n    //     else\n    //         region.setFill();\n    //\n    // }\n    /**\n     * Updates map settings.\n     * @param {object} options - Map options\n     *\n     * @example\n     * mapsvg.update({\n     *   popovers: {on: true},\n     *   colors: {\n     *     background: \"red\"\n     *   }\n     * });\n     */\n    update (options){\n        var _this = this;\n        for (var key in options){\n            if (key == \"regions\"){\n                $.each(options.regions,function(id,regionOptions){\n                    var region = _this.getRegion(id);\n                    region && region.update(regionOptions);\n                    if(regionOptions.choroplethValue!=undefined && _this.options.choropleth.on){\n                        _this.updateChoroplethMinMax();\n                        _this.regionsRedrawColors();\n                    }\n                    if(regionOptions.disabled!=undefined){\n                        _this.deselectRegion(region);\n                        // @ts-ignore\n                        _this.options.regions[id] = _this.options.regions[id] || {};\n                        _this.options.regions[id].disabled = region.disabled;\n                    }\n                });\n            }else if (key == \"markers\"){\n                $.each(options.markers, function(id, markerOptions){\n                    var marker = _this.getMarker(id);\n                    marker && marker.update(markerOptions);\n                });\n            }else{\n                var setter = 'set'+MapSVG.ucfirst(key);\n                if (typeof _this[setter] == 'function')\n                    this[setter](options[key]);\n                else{\n                    _this.options[key] = options[key];\n                }\n            }\n        }\n    }\n\n    getDirtyFields(): {[key: string]: any} {\n        return this.getData();\n    }\n    clearDirtyFields(): void {\n        this.dirtyFields = [];\n    }\n\n    /**\n     * Sets map title\n     * @param {string} title - Map title\n     * @private\n     */\n    setTitle(title: string): void {\n        title && (this.options.title = title);\n    }\n    /**\n     * Adds MapSVG add-ons\n     * @param extension\n     * @private\n     */\n    setExtension(extension){\n        var _this = this;\n        if(extension){\n            _this.options.extension = extension;\n        }else{\n            delete _this.options.extension;\n        }\n    }\n    /**\n     * Disables/enables redirection by link on click on a region or marker\n     * when \"Go to link...\" feature is enabled\n     * Used to prevent redirection in the map editor.\n     * @param {boolean} on - true (enable redirection) of false (disable)\n     */\n    setDisableLinks(on: boolean){\n        var _this = this;\n        on = MapSVG.parseBoolean(on);\n        if(on){\n            $(_this.containers.map).on('click.a.mapsvg','a',function(e){\n                e.preventDefault();\n            });\n        }else{\n            $(_this.containers.map).off('click.a.mapsvg');\n        }\n        _this.disableLinks = on;\n    }\n    /**\n     * Sets loading text message\n     * @param {string} val - \"Loading map...\" text\n     */\n    setLoadingText(val){\n        var _this = this;\n        _this.options.loadingText = val\n    }\n    /**\n     * Enable or disable lock aspect ratio. Used in Map Editor.\n     * @param {boolean} onoff\n     * @private\n     */\n    setLockAspectRatio(onoff: boolean){\n        var _this = this;\n        _this.options.lockAspectRatio =  MapSVG.parseBoolean(onoff);\n    }\n    /**\n     * Sets callback for marker click. Used in Map Editor to show an object editing window.\n     * @private\n     */\n    setMarkerEditHandler (handler: Function){\n        var _this = this;\n        _this.markerEditHandler = handler;\n    }\n    /**\n     * Sets the field that is used for choropleth map\n     * @param {string} field - field name\n     */\n    setChoroplethSourceField (field){\n        var _this = this;\n        _this.options.choropleth.sourceField = field;\n        _this.redrawChoropleth();\n    }\n    /**\n     * Sets callback function that is called on click on a Region.\n     * Used in the Map Editor on click on a Region in the \"Edit regions\" map mode.\n     * @param {Function} handler\n     */\n    setRegionEditHandler (handler: Function){\n        this.regionEditHandler = handler;\n    }\n    /**\n     * Disables all Regions if \"true\" is passed.\n     * @param {boolean} on\n     */\n    setDisableAll(on: boolean){\n        on = MapSVG.parseBoolean(on);\n        $.extend(true, this.options, {disableAll:on});\n        $(this.containers.map).toggleClass('mapsvg-disabled-regions', on);\n    }\n    /**\n     * @private\n     */\n    setRegionStatuses<T> (_statuses: ArrayIndexed<T>){\n\n        var _this = this;\n\n        // @ts-ignore\n        _this.options.regionStatuses = {};\n        var colors = {};\n        _statuses.forEach(function(statusOptions){\n            _this.options.regionStatuses[statusOptions.value] = statusOptions;\n            colors[statusOptions.value] = statusOptions.color.length ? statusOptions.color : undefined;\n        })\n        _this.setColors({status: colors});\n    }\n    /**\n     * @deprecated\n     * @private\n     */\n    setColorsIgnore (val){\n\n        var _this = this;\n\n        _this.options.colorsIgnore = MapSVG.parseBoolean(val);\n        _this.regionsRedrawColors();\n    }\n    /**\n     * Adds # hash at the beginning of HEX color value\n     * @param {String} color\n     * @returns {String}\n     * @private\n     */\n    fixColorHash(color){\n        var hexColorNoHash = new RegExp(/^([0-9a-f]{3}|[0-9a-f]{6})$/i);\n        if(color && color.match(hexColorNoHash) !== null){\n            color = '#'+color;\n        }\n        return color;\n    }\n    /**\n     * Sets color settings (background, regions, containers, etc.)\n     * @param {object} colors\n     *\n     * @example\n     * mapsvg.setColors({\n     *   background: \"#EEEEEE\",\n     *   hover: \"10\",\n     *   selected: \"20\",\n     *   leftSidebar: \"#FF2233\",\n     *   detailsView: \"#FFFFFF\"\n     * });\n     */\n    setColors (colors?: {[key: string]: string|number|object}){\n\n        var _this = this;\n\n        for(var i in colors){\n            if(i === 'status'){\n                // @ts-ignore\n                for(var s in colors[i]){\n                    _this.fixColorHash(colors[i][s]);\n                }\n            } else {\n                if(typeof colors[i] == 'string'){\n                    _this.fixColorHash(colors[i]);\n                }\n            }\n        }\n\n        $.extend(true, _this.options, {colors:colors});\n\n        if(colors && colors.status)\n            _this.options.colors.status = colors.status;\n\n        if(_this.options.colors.markers){\n            for(var z in _this.options.colors.markers){\n                for(var x in _this.options.colors.markers[z]){\n                    _this.options.colors.markers[z][x] = parseInt(_this.options.colors.markers[z][x]);\n                }\n            }\n        }\n\n        if(_this.options.colors.background)\n            $(_this.containers.map).css({'background': _this.options.colors.background});\n        if(_this.options.colors.hover){\n            // @ts-ignore\n            _this.options.colors.hover = (_this.options.colors.hover == \"\"+parseInt(_this.options.colors.hover)) ? parseInt(_this.options.colors.hover) : _this.options.colors.hover;\n        }\n        if(_this.options.colors.selected) {\n            // @ts-ignore\n            _this.options.colors.selected = (_this.options.colors.selected == \"\"+parseInt(_this.options.colors.selected)) ? parseInt(_this.options.colors.selected) : _this.options.colors.selected;\n        }\n\n        $(_this.containers.leftSidebar).css({'background-color': _this.options.colors.leftSidebar});\n        $(_this.containers.rightSidebar).css({'background-color': _this.options.colors.rightSidebar});\n        $(_this.containers.header).css({'background-color': _this.options.colors.header});\n        $(_this.containers.footer).css({'background-color': _this.options.colors.footer});\n\n\n        if($(_this.containers.detailsView) && _this.options.colors.detailsView !== undefined){\n            $(_this.containers.detailsView).css({'background-color': _this.options.colors.detailsView});\n        }\n        if($(_this.containers.directory) && _this.options.colors.directory !== undefined){\n            $(_this.containers.directory).css({'background-color': _this.options.colors.directory});\n        }\n        if($(_this.containers.filtersModal) && _this.options.colors.modalFilters !== undefined){\n            $(_this.containers.filtersModal).css({'background-color': _this.options.colors.modalFilters});\n        }\n\n        if($(_this.containers.filters) && _this.options.colors.directorySearch){\n            $(_this.containers.filters).css({\n                'background-color': _this.options.colors.directorySearch\n            })\n        }else if($(_this.containers.filters)) {\n            $(_this.containers.filters).css({\n                'background-color': ''\n            })\n        }\n\n        if(!_this.containers.clustersCss){\n            _this.containers.clustersCss = <HTMLStyleElement>$('<style></style>').appendTo('body')[0];\n        }\n        var css = '';\n        if(_this.options.colors.clusters){\n            css += \"background-color: \"+_this.options.colors.clusters+\";\";\n        }\n        if(_this.options.colors.clustersBorders){\n            css += \"border-color: \"+_this.options.colors.clustersBorders+\";\";\n        }\n        if(_this.options.colors.clustersText){\n            css += \"color: \"+_this.options.colors.clustersText+\";\";\n        }\n        $(_this.containers.clustersCss).html(\".mapsvg-marker-cluster {\"+css+\"}\");\n\n        if(!_this.containers.clustersHoverCss){\n            _this.containers.clustersHoverCss = <HTMLStyleElement>$('<style></style>').appendTo('body')[0];\n        }\n        var cssHover = \"\";\n        if(_this.options.colors.clustersHover){\n            cssHover += \"background-color: \"+_this.options.colors.clustersHover+\";\";\n        }\n        if(_this.options.colors.clustersHoverBorders){\n            cssHover += \"border-color: \"+_this.options.colors.clustersHoverBorders+\";\";\n        }\n        if(_this.options.colors.clustersHoverText){\n            cssHover += \"color: \"+_this.options.colors.clustersHoverText+\";\";\n        }\n        $(_this.containers.clustersHoverCss).html(\".mapsvg-marker-cluster:hover {\"+cssHover+\"}\");\n\n        if(!_this.containers.markersCss){\n            _this.containers.markersCss = <HTMLStyleElement>$('<style></style>').appendTo('head')[0];\n        }\n        var markerCssText = '.mapsvg-with-marker-active .mapsvg-marker {\\n' +\n            '  opacity: '+_this.options.colors.markers.inactive.opacity/100+';\\n' +\n            '  -webkit-filter: grayscale('+(100-_this.options.colors.markers.inactive.saturation)+'%);\\n' +\n            '  filter: grayscale('+(100-_this.options.colors.markers.inactive.saturation)+'%);\\n' +\n            '}\\n' +\n            '.mapsvg-with-marker-active .mapsvg-marker-active {\\n' +\n            '  opacity: '+_this.options.colors.markers.active.opacity/100+';\\n' +\n            '  -webkit-filter: grayscale('+(100-_this.options.colors.markers.active.saturation)+'%);\\n' +\n            '  filter: grayscale('+(100-_this.options.colors.markers.active.saturation)+'%);\\n' +\n            '}\\n' +\n            '.mapsvg-with-marker-hover .mapsvg-marker {\\n' +\n            '  opacity: '+_this.options.colors.markers.unhovered.opacity/100+';\\n' +\n            '  -webkit-filter: grayscale('+(100-_this.options.colors.markers.unhovered.saturation)+'%);\\n' +\n            '  filter: grayscale('+(100-_this.options.colors.markers.unhovered.saturation)+'%);\\n' +\n            '}\\n' +\n            '.mapsvg-with-marker-hover .mapsvg-marker-hover {\\n' +\n            '  opacity: '+_this.options.colors.markers.hovered.opacity/100+';\\n' +\n            '  -webkit-filter: grayscale('+(100-_this.options.colors.markers.hovered.saturation)+'%);\\n' +\n            '  filter: grayscale('+(100-_this.options.colors.markers.hovered.saturation)+'%);\\n' +\n            '}\\n';\n        $(_this.containers.markersCss).html(markerCssText);\n\n        $.each(_this.options.colors,function(key, color){\n            if(color === null || color == \"\")\n                delete _this.options.colors[key];\n        });\n\n        _this.regionsRedrawColors();\n    }\n    /**\n     * Sets tooltips options.\n     * @param {object} options\n     * @example\n     * mapsvg.setTooltips({\n     *   on: true,\n     *   position: \"bottom-left\",\n     *   maxWidth: \"300\"\n     * })\n     */\n    setTooltips (options) {\n\n        var _this = this;\n\n        if(options.on !== undefined)\n            options.on = MapSVG.parseBoolean(options.on);\n\n        $.extend(true, _this.options, {tooltips: options});\n\n        _this.tooltip = _this.tooltip || {posOriginal: {}, posShifted: {}, posShiftedPrev: {}, mirror: {}};\n        _this.tooltip.posOriginal    = {};\n        _this.tooltip.posShifted     = {};\n        _this.tooltip.posShiftedPrev = {};\n        _this.tooltip.mirror         = {};\n\n\n        if(_this.containers.tooltip){\n            _this.containers.tooltip.className = _this.containers.tooltip.className.replace(/(^|\\s)mapsvg-tt-\\S+/g, '');\n        }else{\n            _this.containers.tooltip = $('<div />').addClass('mapsvg-tooltip')[0];\n            $(_this.containers.map).append(_this.containers.tooltip);\n        }\n\n\n        var ex = _this.options.tooltips.position.split('-');\n        if(ex[0].indexOf('top')!=-1 || ex[0].indexOf('bottom')!=-1){\n            _this.tooltip.posOriginal.topbottom = ex[0];\n        }\n        if(ex[0].indexOf('left')!=-1 || ex[0].indexOf('right')!=-1){\n            _this.tooltip.posOriginal.leftright = ex[0];\n        }\n        if(ex[1]){\n            _this.tooltip.posOriginal.leftright = ex[1];\n        }\n\n        var event = 'mousemove.tooltip.mapsvg-'+$(_this.containers.map).attr('id');\n        $(_this.containers.tooltip).addClass('mapsvg-tt-'+_this.options.tooltips.position);\n\n        $(_this.containers.tooltip).css({'min-width': _this.options.tooltips.minWidth+'px', 'max-width': _this.options.tooltips.maxWidth+'px'});\n\n        $('body').off(event).on(event, function(e) {\n\n            MapSVG.mouse = MapSVG.mouseCoords(e);\n\n            _this.containers.tooltip.style.left = (e.clientX + $(window).scrollLeft() - $(_this.containers.map).offset().left) +'px';\n            _this.containers.tooltip.style.top  = (e.clientY + $(window).scrollTop()  - $(_this.containers.map).offset().top)  +'px';\n\n            var m = new ScreenPoint(e.clientX + $(window).scrollLeft(), e.clientY + $(window).scrollTop());\n\n            var _tbbox = _this.containers.tooltip.getBoundingClientRect();\n            var _mbbox = _this.containers.wrap.getBoundingClientRect();\n            var tbbox = {\n                top: _tbbox.top + $(window).scrollTop(),\n                bottom: _tbbox.bottom + $(window).scrollTop(),\n                left: _tbbox.left + $(window).scrollLeft(),\n                right: _tbbox.right + $(window).scrollLeft(),\n                width: _tbbox.width,\n                height: _tbbox.height\n            };\n            var mbbox = {\n                top: _mbbox.top + $(window).scrollTop(),\n                bottom: _mbbox.bottom + $(window).scrollTop(),\n                left: _mbbox.left + $(window).scrollLeft(),\n                right: _mbbox.right + $(window).scrollLeft(),\n                width: _mbbox.width,\n                height: _mbbox.height\n            };\n\n            if(m.x > mbbox.right || m.y > mbbox.bottom || m.x < mbbox.left || m.y < mbbox.top){\n                return;\n            }\n\n            if(_this.tooltip.mirror.top || _this.tooltip.mirror.bottom){\n                // may be cancel mirroring\n                if(_this.tooltip.mirror.top && m.y > _this.tooltip.mirror.top){\n                    _this.tooltip.mirror.top = 0;\n                    delete _this.tooltip.posShifted.topbottom;\n                }else if(_this.tooltip.mirror.bottom && m.y < _this.tooltip.mirror.bottom){\n                    _this.tooltip.mirror.bottom = 0;\n                    delete _this.tooltip.posShifted.topbottom;\n                }\n            }else{\n                // may be need mirroring\n\n                if(tbbox.bottom < mbbox.top + tbbox.height){\n                    _this.tooltip.posShifted.topbottom = 'bottom';\n                    _this.tooltip.mirror.top    = m.y;\n                }else if(tbbox.top > mbbox.bottom - tbbox.height){\n                    _this.tooltip.posShifted.topbottom = 'top';\n                    _this.tooltip.mirror.bottom = m.y;\n                }\n            }\n\n            if(_this.tooltip.mirror.right || _this.tooltip.mirror.left){\n                // may be cancel mirroring\n\n                if(_this.tooltip.mirror.left && m.x > _this.tooltip.mirror.left){\n                    _this.tooltip.mirror.left  = 0;\n                    delete _this.tooltip.posShifted.leftright;\n                }else if(_this.tooltip.mirror.right && m.x < _this.tooltip.mirror.right){\n                    _this.tooltip.mirror.right = 0;\n                    delete _this.tooltip.posShifted.leftright;\n                }\n            }else{\n                // may be need mirroring\n                if(tbbox.right < mbbox.left + tbbox.width){\n                    _this.tooltip.posShifted.leftright = 'right';\n                    _this.tooltip.mirror.left = m.x;\n                }else if(tbbox.left > mbbox.right - tbbox.width){\n                    _this.tooltip.posShifted.leftright = 'left';\n                    _this.tooltip.mirror.right = m.x;\n                }\n            }\n\n            var pos  = $.extend({}, _this.tooltip.posOriginal, _this.tooltip.posShifted);\n            var _pos = [];\n            pos.topbottom && _pos.push(pos.topbottom);\n            pos.leftright && _pos.push(pos.leftright);\n            // @ts-ignore\n            pos = _pos.join('-');\n\n            if(_this.tooltip.posShifted.topbottom!=_this.tooltip.posOriginal.topbottom  || _this.tooltip.posShifted.leftright!=_this.tooltip.posOriginal.leftright){\n                _this.containers.tooltip.className = _this.containers.tooltip.className.replace(/(^|\\s)mapsvg-tt-\\S+/g, '');\n                $(_this.containers.tooltip).addClass('mapsvg-tt-'+pos);\n                _this.tooltip.posShiftedPrev = pos;\n            }\n        });\n    }\n    /**\n     * Sets popover options.\n     * @param {object} options\n     * @example\n     * mapsvg.setPopovers({\n     *   on: true,\n     *   width: 300, // pixels\n     *   maxWidth: 70, // percents of map container\n     *   maxHeight: 70, // percents of map container\n     *   mobileFullscreen: true\n     * });\n     */\n    setPopovers  (options){\n\n        var _this = this;\n\n        if(options.on !== undefined)\n            options.on = MapSVG.parseBoolean(options.on);\n\n        $.extend(_this.options.popovers, options);\n\n        if(!_this.containers.popover) {\n            _this.containers.popover = $('<div />').addClass('mapsvg-popover')[0];\n            _this.layers.popovers.append(_this.containers.popover);\n        }\n        $(_this.containers.popover).css({\n            width: _this.options.popovers.width + (_this.options.popovers.width == 'auto' ? '' : 'px'),\n            'max-width': _this.options.popovers.maxWidth + '%',\n            'max-height': _this.options.popovers.maxHeight * $(_this.containers.wrap).outerHeight()/100+'px'\n        });\n\n        if(_this.options.popovers.mobileFullscreen && MapSVG.isPhone){\n            $('body').toggleClass('mapsvg-fullscreen-popovers', true);\n            $(_this.containers.popover).appendTo('body');\n        }\n    }\n    /**\n     * Sets region prefix\n     * @param {string} prefix\n     * @private\n     */\n    setRegionPrefix (prefix){\n\n        var _this = this;\n\n        _this.options.regionPrefix = prefix;\n    }\n    /**\n     * Sets initial viewbox\n     * @param {array} v - [x,y,width,height]\n     * @private\n     * @deprecated\n     */\n    setInitialViewBox (v){\n\n        var _this = this;\n\n        if(typeof v == 'string')\n            v = v.trim().split(' ').map(function(v){  return parseFloat(v); });\n        _this._viewBox = new ViewBox(v);\n        if(_this.options.googleMaps.on){\n            _this.options.googleMaps.center = _this.googleMaps.map.getCenter().toJSON();\n            _this.options.googleMaps.zoom = _this.googleMaps.map.getZoom();\n        }\n        _this.zoomLevel = 0;\n    }\n    /**\n     * Sets viewbox on map start and calculates initial width/height ratio\n     * @private\n     */\n    setViewBoxOnStart (){\n\n        var _this = this;\n\n        _this.viewBoxFull = _this.svgDefault.viewBox;\n        _this.viewBoxFake = _this.viewBox;\n        _this.whRatioFull = _this.viewBoxFull.width / _this.viewBox.width;\n        _this.containers.svg.setAttribute('viewBox', _this.viewBoxFull.toString());\n\n        if((MapSVG.device.ios || MapSVG.device.android) && _this.svgDefault.viewBox.width>1500){\n            _this.iosDownscaleFactor = _this.svgDefault.viewBox.width > 9999 ? 100 : 10;\n            _this.containers.svg.style.width = (_this.svgDefault.viewBox.width / _this.iosDownscaleFactor).toString()+'px';\n        } else {\n            _this.containers.svg.style.width = _this.svgDefault.viewBox.width+'px';\n        }\n\n        _this.vbStart = true;\n    }\n    /**\n     * Sets map viewbox\n     * @param {ViewBox} viewBox\n     * @param {boolean} skipAdjustments - if false is passed, map doesn't get redrawn\n     */\n    setViewBox (viewBox?: ViewBox, skipAdjustments?: boolean): boolean {\n\n        var _this = this;\n        let initial = false;\n\n        if(typeof viewBox === 'undefined' || (viewBox.width === 0 && viewBox.height === 0)){\n            viewBox = _this.svgDefault.viewBox;\n            initial = true;\n        }\n        var isZooming = viewBox.width != _this.viewBox.width || viewBox.height != _this.viewBox.height;\n        _this.viewBox = viewBox;\n        _this.whRatio = _this.viewBox.width / _this.viewBox.height;\n\n        !_this.vbStart && _this.setViewBoxOnStart();\n\n        if(initial){\n            if(!_this._viewBox){\n                _this._viewBox = _this.viewBox;\n            }\n            _this._scale = 1;\n        }\n\n        var p = _this.options.padding;\n\n        if(p.top){\n            _this.viewBox.y -= p.top;\n            _this.viewBox.height += p.top;\n        }\n        if(p.right){\n            _this.viewBox.width += p.right;\n        }\n        if(p.bottom){\n            _this.viewBox.height += p.bottom;\n        }\n        if(p.left){\n            _this.viewBox.x -= p.left;\n            _this.viewBox.width += p.left;\n        }\n\n        _this.scale = _this.getScale();\n        _this.superScale = _this.whRatioFull*_this.svgDefault.viewBox.width/_this.viewBox.width;\n\n        var w = _this.svgDefault.viewBox.width / $(_this.containers.map).width();\n        _this.superScale = _this.superScale / w;\n\n        if((MapSVG.device.ios || MapSVG.device.android) && _this.svgDefault.viewBox.width>1500){\n            _this.superScale *= _this.iosDownscaleFactor;\n        }\n\n        _this.scroll.tx = Math.round((_this.svgDefault.viewBox.x-_this.viewBox.x)*_this.scale);\n        _this.scroll.ty = Math.round((_this.svgDefault.viewBox.y-_this.viewBox.y)*_this.scale);\n\n        if(isZooming) {\n            if(!_this.options.googleMaps.on){\n                _this.enableMarkersAnimation();\n            }\n            // _this.throttle(_this.enableMarkersAnimation, 400, _this);\n        }\n\n        _this.containers.scrollpane.style.transform = 'translate('+_this.scroll.tx+'px,'+_this.scroll.ty+'px)';\n        _this.containers.svg.style.transform = 'scale('+_this.superScale+')';\n\n        if(isZooming && !skipAdjustments){\n            _this.updateSize();\n        }\n\n        if(isZooming){\n            if(!_this.options.googleMaps.on) {\n                setTimeout(function(){\n                    _this.disableMarkersAnimation()\n                }, 400);\n            }\n            if(_this.options.clustering.on){\n                _this.throttle(_this.clusterizeOnZoom, 400, _this);\n            } else {\n                _this.events.trigger('zoom');\n            }\n        }\n\n        return true;\n    }\n    /**\n     * Turns on marker animations\n     * @private\n     */\n    enableMarkersAnimation() {\n        $(this.containers.map).removeClass('no-transitions-markers')\n    }\n    /**\n     * Turns off marker animations\n     * @private\n     */\n    disableMarkersAnimation() {\n        $(this.containers.map).addClass('no-transitions-markers')\n    }\n    /**\n     * Event handler that clusterizes markers on zoom\n     * @event\n     * @private\n     */\n\n    clusterizeOnZoom(){\n\n        if(this.options.googleMaps.on && this.googleMaps.map && this.zoomDelta) {\n            this.zoomLevel = this.googleMaps.map.getZoom() - this.zoomDelta;\n        }\n        this.events.trigger('zoom');\n        this.clusterizeMarkers(true);\n    }\n    /**\n     * Delays method execution.\n     * For example, it can be used in search input fields to prevent sending an ajax request on each key press.\n     * @param {function} method\n     * @param {number} delay\n     * @param {object} scope\n     * @param {array} params\n     * @private\n     */\n    throttle(method: Function, delay: number, scope: any, params?: any) {\n        // @ts-ignore\n        clearTimeout(method._tId);\n        // @ts-ignore\n        method._tId = setTimeout(function(){\n            method.apply(scope, params);\n        }, delay);\n    }\n    /**\n     * Sets SVG viewBox by Google Maps bounds.\n     * Used to overlay SVG map on Google Map.\n     */\n    setViewBoxByGoogleMapBounds (){\n\n        var _this = this;\n\n        var googleMapBounds = _this.googleMaps.map.getBounds();\n        if(!googleMapBounds) return;\n        var googleMapBoundsJSON = googleMapBounds.toJSON();\n\n        if(googleMapBoundsJSON.west==-180 && googleMapBoundsJSON.east==180){\n            var center = _this.googleMaps.map.getCenter().toJSON();\n        }\n        var ne = new GeoPoint(googleMapBounds.getNorthEast().lat(), googleMapBounds.getNorthEast().lng());\n        var sw = new GeoPoint(googleMapBounds.getSouthWest().lat(), googleMapBounds.getSouthWest().lng());\n\n        var xyNE = _this.convertGeoToSVG(ne);\n        var xySW = _this.convertGeoToSVG(sw);\n\n        // Check if map is on border between 180/-180 longitude\n        if(xyNE.x < xySW.y){\n            var mapPointsWidth = (_this.svgDefault.viewBox.width / _this.mapLonDelta) * 360;\n            xySW.x = -(mapPointsWidth - xySW.y);\n        }\n\n        var width  = xyNE.x - xySW.x;\n        var height = xySW.y - xyNE.y;\n        var viewBox = new ViewBox(xySW.x, xyNE.y, width, height);\n        _this.setViewBox(viewBox);\n\n    }\n    /**\n     * Redraws the map.\n     * Must be called when the map is shown after being hidden.\n     */\n    redraw(){\n\n        var _this = this;\n\n        if(MapSVG.browser.ie){\n            $(_this.containers.svg).css({height: _this.svgDefault.viewBox.height});\n        }\n\n        if(_this.options.googleMaps.on && _this.googleMaps.map){\n            // var center = _this.googleMaps.map.getCenter();\n            google.maps.event.trigger(_this.googleMaps.map, 'resize');\n            // _this.googleMaps.map.setCenter(center);\n            // _this.setViewBoxByGoogleMapBounds();\n        }else{\n            _this.setViewBox(_this.viewBox);\n        }\n        $(_this.containers.popover) && $(_this.containers.popover).css({\n            'max-height': _this.options.popovers.maxHeight*$(_this.containers.wrap).outerHeight()/100+'px'\n        });\n        if(this.controllers && this.controllers.directory){\n            this.controllers.directory.updateTopShift();\n            this.controllers.directory.updateScroll();\n        }\n        _this.updateSize();\n    }\n    /**\n     * Sets map padding.\n     * @param {number} options - Padding in pixels\n     */\n    setPadding(options){\n\n        var _this = this;\n\n        options = options || _this.options.padding;\n        for(var i in options){\n            options[i] = options[i] ? parseInt(options[i]) : 0;\n        }\n        $.extend(_this.options.padding, options);\n\n        _this.setViewBox();\n        _this.events.trigger('sizeChange');\n    }\n    /**\n     * Sets map size.\n     * Can accept both or just 1 parameter - width or height. The missing parameter will be calcualted.\n     * @param {number} width\n     * @param {number} height\n     * @param {boolean} responsive\n     * @returns {number[]} - [width, height]\n     */\n    setSize (width: number, height: number, responsive?: boolean){\n\n        var _this = this;\n\n        // Convert strings to numbers\n        _this.options.width      = width;\n        _this.options.height     = height;\n        _this.options.responsive = responsive!=null && responsive!=undefined  ? MapSVG.parseBoolean(responsive) : _this.options.responsive;\n\n        // Calculate width and height\n        if ((!_this.options.width && !_this.options.height)){\n            _this.options.width\t = _this.svgDefault.width;\n            _this.options.height = _this.svgDefault.height;\n        }else if (!_this.options.width && _this.options.height){\n            _this.options.width\t =_this.options.height * _this.svgDefault.width / _this.svgDefault.height;\n        }else if (_this.options.width && !_this.options.height){\n            _this.options.height =_this.options.width * _this.svgDefault.height/_this.svgDefault.width;\n        }\n\n        _this.whRatio      = _this.options.width / _this.options.height;\n        _this.scale        = _this.getScale();\n\n        _this.setResponsive(responsive);\n\n        if(_this.markers)\n            _this.markersAdjustPosition();\n        if(_this.options.labelsRegions.on){\n            _this.labelsRegionsAdjustPosition();\n        }\n        if(_this.options.choropleth.on && _this.options.choropleth.bubbleMode){\n            _this.redrawBubbles();\n        }\n\n        return [_this.options.width, _this.options.height];\n    }\n    /**\n     * Sets map responsiveness on/off. When map is responsive, it takes the full width of the parent container.\n     * @param {bool} on\n     */\n    setResponsive (on: boolean){\n\n        var _this = this;\n\n        on = on != undefined ? MapSVG.parseBoolean(on) : _this.options.responsive;\n\n        $(_this.containers.map).css({\n            'width': '100%',\n            'height': '0',\n            'padding-bottom': (_this.viewBox.height*100/_this.viewBox.width)+'%'\n        });\n        if(on){\n            $(_this.containers.wrap).css({\n                'width': '100%',\n                'height': 'auto'\n            });\n        }else{\n            $(_this.containers.wrap).css({\n                'width': _this.options.width+'px',\n                'height': _this.options.height+'px'\n            });\n        }\n        $.extend(true, _this.options, {responsive: on});\n\n        if(!_this.resizeSensor){\n            _this.resizeSensor = new ResizeSensor(_this.containers.map, function(){\n                _this.redraw();\n            });\n        }\n\n        _this.redraw();\n    }\n    /**\n     * Sets map scroll options.\n     * @param {object} options - scroll options\n     * @param {bool} skipEvents - used by Map Editor to prevent re-setting event handlers.\n     * @example\n     * mapsvg.setScroll({\n     *   on: true,\n     *   limit: false // limit scroll to map bounds\n     * });\n     */\n    setScroll (options, skipEvents){\n\n        var _this = this;\n\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n        options.limit != undefined && (options.limit = MapSVG.parseBoolean(options.limit));\n        $.extend(true, _this.options, {scroll: options});\n        !skipEvents && _this.setEventHandlers();\n    }\n    /**\n     * Sets map zoom options.\n     * @param {object} options - zoom options\n     * @example\n     * mapsvg.setZoom({\n     *   on: true,\n     *   mousewheel: true,\n     *   limit: [-5,10], // allow -5 zoom steps back and +20 zoom steps up from initial position.\n     * });\n     */\n    setZoom  (options){\n\n        var _this = this;\n\n        options = options || {};\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n        options.fingers != undefined && (options.fingers = MapSVG.parseBoolean(options.fingers));\n        options.mousewheel != undefined && (options.mousewheel = MapSVG.parseBoolean(options.mousewheel));\n\n        // delta = 1.2 changed to delta = 2 since introducing Google Maps + smooth zoom\n        options.delta = 2;\n\n        // options.delta && (options.delta = parseFloat(options.delta));\n\n        if(options.limit){\n            if(typeof options.limit == 'string')\n                options.limit = options.limit.split(';');\n            options.limit = [parseInt(options.limit[0]),parseInt(options.limit[1])];\n        }\n        if(!_this.zoomLevels){\n            _this.setZoomLevels();\n        }\n\n        $.extend(true, _this.options, {zoom: options});\n        //(options.buttons && options.buttons.on) && (options.buttons.on = MapSVG.parseBoolean(options.buttons.on));\n        $(_this.containers.map).off('wheel.mapsvg');\n\n\n        if(_this.options.zoom.mousewheel){\n            // var lastZoomTime = 0;\n            // var zoomTimeDelta = 0;\n\n            if(MapSVG.browser.firefox){\n                _this.firefoxScroll = {insideIframe: false, scrollX: 0, scrollY: 0};\n\n                $(_this.containers.map).on('mouseenter', function() {\n                    _this.firefoxScroll.insideIframe = true;\n                    _this.firefoxScroll.scrollX = window.scrollX;\n                    _this.firefoxScroll.scrollY = window.scrollY;\n                }).on('mouseleave', function() {\n                    _this.firefoxScroll.insideIframe = false;\n                });\n\n                $(document).scroll(function() {\n                    if (_this.firefoxScroll.insideIframe)\n                        window.scrollTo(_this.firefoxScroll.scrollX, _this.firefoxScroll.scrollY);\n                });\n            }\n\n            $(_this.containers.map).on('wheel.mapsvg',function(event) {\n\n                if($(event.target).hasClass('mapsvg-popover') || $(event.target).closest('.mapsvg-popover').length\n                   ||\n                   $(event.target).hasClass('mapsvg-details-container') || $(event.target).closest('.mapsvg-details-container').length\n                ){\n                    return;\n                }\n\n                event.preventDefault();\n                // @ts-ignore - doesn't recognize .deltaY\n                var d = Math.sign(-event.originalEvent.deltaY);\n                var m = MapSVG.mouseCoords(event.originalEvent);\n                m.x = m.x - $(_this.containers.svg).offset().left;\n                m.y = m.y - $(_this.containers.svg).offset().top;\n\n                var center = _this.convertPixelToSVG(new ScreenPoint(m.x, m.y));\n                d > 0 ? _this.zoomIn(center) : _this.zoomOut(center);\n                return false;\n            });\n        }\n        _this.canZoom = true;\n    }\n    /**\n     * Sets map control buttons.\n     * @param {object} options - control button options\n     * @example\n     * mapsvg.setControls({\n     *   location: 'right',\n     *   zoom: true,\n     *   zoomReset: true,\n     *   userLocation: true\n     * });\n     */\n    setControls  (options){\n\n        var _this = this;\n\n        options = options || {};\n        $.extend(true, _this.options, {controls: options});\n        _this.options.controls.zoom = MapSVG.parseBoolean(_this.options.controls.zoom);\n        _this.options.controls.zoomReset = MapSVG.parseBoolean(_this.options.controls.zoomReset);\n        _this.options.controls.userLocation = MapSVG.parseBoolean(_this.options.controls.userLocation);\n\n        var loc = _this.options.controls.location || 'right';\n\n        if(!_this.containers.controls){\n\n            var buttons = $('<div />').addClass('mapsvg-buttons');\n\n            var zoomGroup = $('<div />').addClass('mapsvg-btn-group').appendTo(buttons);\n            var zoomIn = $('<div />').addClass('mapsvg-btn-map mapsvg-in');\n\n            zoomIn.on('touchend click',function(e){\n                if(e.cancelable){\n                    e.preventDefault();\n                }\n                e.stopPropagation();\n                _this.zoomIn();\n            });\n\n            var zoomOut = $('<div />').addClass('mapsvg-btn-map mapsvg-out');\n            zoomOut.on('touchend click',function(e){\n                if(e.cancelable){\n                    e.preventDefault();\n                }\n                e.stopPropagation();\n                _this.zoomOut();\n            });\n            zoomGroup.append(zoomIn).append(zoomOut);\n\n            var location = $('<div />').addClass('mapsvg-btn-map mapsvg-btn-location');\n            location.on('touchend click',function(e){\n                if(e.cancelable){\n                    e.preventDefault();\n                }\n                e.stopPropagation();\n                _this.showUserLocation(function(location){\n                    if(_this.options.scroll.on){\n                        _this.centerOn(location.marker);\n                    }\n                });\n            });\n\n            var userLocationIcon = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 447.342 447.342\" style=\"enable-background:new 0 0 447.342 447.342;\" xml:space=\"preserve\"><path d=\"M443.537,3.805c-3.84-3.84-9.686-4.893-14.625-2.613L7.553,195.239c-4.827,2.215-7.807,7.153-7.535,12.459 c0.254,5.305,3.727,9.908,8.762,11.63l129.476,44.289c21.349,7.314,38.125,24.089,45.438,45.438l44.321,129.509 c1.72,5.018,6.325,8.491,11.63,8.762c5.306,0.271,10.244-2.725,12.458-7.535L446.15,18.429 C448.428,13.491,447.377,7.644,443.537,3.805z\"/></svg>';\n            location.html(userLocationIcon);\n\n            var locationGroup = $('<div />').addClass('mapsvg-btn-group').appendTo(buttons);\n            locationGroup.append(location);\n\n            var zoomResetIcon = '<svg height=\"14px\" version=\"1.1\" viewBox=\"0 0 14 14\" width=\"14px\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:sketch=\"http://www.bohemiancoding.com/sketch/ns\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><g fill=\"none\" fill-rule=\"evenodd\" id=\"Page-1\" stroke=\"none\" stroke-width=\"1\"><g fill=\"#000000\" transform=\"translate(-215.000000, -257.000000)\"><g id=\"fullscreen\" transform=\"translate(215.000000, 257.000000)\"><path d=\"M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z\" /></g></g></g></svg>';\n            var zoomResetButton = $('<div />').html(zoomResetIcon).addClass('mapsvg-btn-map mapsvg-btn-zoom-reset');\n            zoomResetButton.on('touchend click',function(e){\n                if(e.cancelable){\n                    e.preventDefault();\n                }\n                e.stopPropagation();\n                _this.viewBoxReset(true);\n            });\n            var zoomResetGroup = $('<div />').addClass('mapsvg-btn-group').appendTo(buttons);\n            zoomResetGroup.append(zoomResetButton);\n\n\n            _this.containers.controls = buttons[0];\n            _this.controls = {\n                zoom: zoomGroup[0],\n                userLocation: locationGroup[0],\n                zoomReset: zoomResetGroup[0]\n            };\n            $(_this.containers.map).append($(_this.containers.controls));\n        }\n\n        $(_this.controls.zoom).toggle(_this.options.controls.zoom);\n        $(_this.controls.userLocation).toggle(_this.options.controls.userLocation);\n        $(_this.controls.zoomReset).toggle(_this.options.controls.zoomReset);\n\n        $(_this.containers.controls).removeClass('left');\n        $(_this.containers.controls).removeClass('right');\n        loc == 'right' && $(_this.containers.controls).addClass('right')\n        ||\n        loc == 'left' && $(_this.containers.controls).addClass('left');\n\n        // (_this.options.controls.on &&  loc!='hide') ? _this.containers.zoomButtons.show() : _this.containers.zoomButtons.hide();\n    }\n    /**\n     * Calcualtes map viewBox parameter for each zoom level\n     * @private\n     */\n    setZoomLevels (){\n\n        var _this = this;\n\n        if(!_this.zoomLevels){\n            _this.zoomLevels = new ArrayIndexed('zoomLevel');\n        } else {\n            _this.zoomLevels.clear();\n        }\n\n        for(var i = -20; i < 0; i++){\n            let _scale = 1/Math.pow(_this.options.zoom.delta, Math.abs(i));\n            _this.zoomLevels.push({\n                zoomLevel: i,\n                _scale: _scale,\n                viewBox: new ViewBox(0, 0, _this._viewBox.width /_scale, _this._viewBox.height /_scale)\n            });\n        }\n\n        for(var i = 0; i <= 20; i++){\n            let _scale = Math.pow(_this.options.zoom.delta, Math.abs(i));\n            _this.zoomLevels.push({\n                zoomLevel: i,\n                _scale: _scale,\n                viewBox: new ViewBox(0, 0, _this._viewBox.width /_scale, _this._viewBox.height /_scale)\n            });\n        }\n    }\n    /**\n     * Sets mouse pointer cursor style on hover on regions / markers.\n     * @param {string} type - \"pointer\" or \"default\"\n     */\n    setCursor (type){\n\n        var _this = this;\n\n        type = type == 'pointer' ? 'pointer' : 'default';\n        _this.options.cursor = type;\n        if(type == 'pointer')\n            $(_this.containers.map).addClass('mapsvg-cursor-pointer');\n        else\n            $(_this.containers.map).removeClass('mapsvg-cursor-pointer');\n    }\n    /**\n     * Enables/disables \"multiselect\" option that allows to select multiple regions.\n     * @param {boolean} on\n     * @param {boolean} deselect - If true, deselects currently selected Regions\n     */\n    setMultiSelect  (on: boolean, deselect?: boolean){\n\n        var _this = this;\n\n        _this.options.multiSelect = MapSVG.parseBoolean(on);\n        if(deselect !== false)\n            _this.deselectAllRegions();\n    }\n    /**\n     * Sets choropleth map options\n     * @param {object} options\n     *\n     * @example\n     * mapsvg.setChoropleth({\n     *   on: true,\n     *   colors: {\n     *     high: \"#FF0000\",\n     *     low: \"#00FF00\"\n     *   }\n     *   labels: {\n     *     high: \"high\",\n     *     low: \"low\"\n     *   }\n     * });\n     */\n    setChoropleth  (options?: any){\n        var _this = this;\n\n        options = options || _this.options.choropleth;\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n\n        if (typeof options.segments === 'undefined'){\n            if ((typeof options.sourceFieldSelect === 'undefined') || (typeof options.sourceFieldSelect.variants === 'undefined')){\n                $.extend(true, _this.options.choropleth, options);\n            }\n            else {\n                _this.options.choropleth.sourceFieldSelect.variants = options.sourceFieldSelect.variants;\n            }\n        }\n        else {\n            let segmentsIndexes = Object.keys(options.segments);\n            if ((segmentsIndexes.length > 1) || (segmentsIndexes[0] == '0' &&  Object.keys(options.segments[0]).length > 1)){\n                _this.options.choropleth.segments = options.segments;\n            }\n            else {\n                let segmentIndex = Object.keys(options.segments)[0];\n                $.extend(true, _this.options.choropleth.segments[segmentIndex], options.segments[segmentIndex]);\n            }\n        }\n\n        //var needsRedraw = false;\n\n        if (_this.options.choropleth.on && _this.options.choropleth.sourceFieldSelect.on){\n\n            if (!_this.containers.choroplethSourceSelect) {\n                let sourceSelectOptions = [];\n                _this.options.choropleth.sourceFieldSelect.variants.forEach(function (variant) {\n                    sourceSelectOptions.push($('<option value=\"' + variant + '\" ' + (variant === _this.options.choropleth.sourceField ? 'selected' : '') + '>' + variant + '</option>'));\n                });\n\n                _this.containers.choroplethSourceSelect = {\n                    container: $('<div class=\"mapsvg-choropleath-source-field\"></div>')[0],\n                    //label: $('<label>Source</label>')[0],\n                    select: $('<select id=\"mapsvg-choropleth-source-field-select\" class=\"mapsvg-select2\"></select>')[0],\n                    options: sourceSelectOptions\n                };\n\n                $(_this.containers.choroplethSourceSelect.select).append(_this.containers.choroplethSourceSelect.options);\n                //$(_this.containers.choroplethSourceSelect.container).append($(_this.containers.choroplethSourceSelect.label));\n                $(_this.containers.choroplethSourceSelect.container).append($(_this.containers.choroplethSourceSelect.select));\n\n                $(_this.containers.choroplethSourceSelect.container).css('bottom', (_this.options.choropleth.segments.length*25+15) + 'px');\n                $(_this.containers.map).append($(_this.containers.choroplethSourceSelect.container));\n\n                $(_this.containers.choroplethSourceSelect.select).mselect2();\n\n                //select2 lib bug workaround. Should be on('change'...)\n                $(_this.containers.choroplethSourceSelect.select).mselect2().on('select2:select select2:unselecting', function (e) {\n                    if (e.cancelable) {\n                        e.preventDefault();\n                    }\n                    e.stopPropagation();\n                    _this.setChoropleth({sourceField: $(this).mselect2().val()});\n                });\n            }\n            else {\n                $(_this.containers.choroplethSourceSelect.select).mselect2('destroy');\n                $(_this.containers.choroplethSourceSelect.select).find('option').remove();\n                _this.containers.choroplethSourceSelect.options = [];\n                _this.options.choropleth.sourceFieldSelect.variants.forEach(function (variant) {\n                    _this.containers.choroplethSourceSelect.options.push($('<option value=\"' + variant + '\" ' + (variant === _this.options.choropleth.sourceField ? 'selected' : '') + '>' + variant + '</option>')[0]);\n                });\n                $(_this.containers.choroplethSourceSelect.select).append(_this.containers.choroplethSourceSelect.options);\n                $(_this.containers.choroplethSourceSelect.select).mselect2({width: '100%'});\n            }\n        }\n\n        if ((!_this.options.choropleth.on || !_this.options.choropleth.sourceFieldSelect.on) && _this.containers.choroplethSourceSelect && $(_this.containers.choroplethSourceSelect.container).is(\":visible\")){\n            $(_this.containers.choroplethSourceSelect.container).hide();\n        }else if(_this.options.choropleth.on && _this.options.choropleth.sourceFieldSelect.on && _this.containers.choroplethSourceSelect && !$(_this.containers.choroplethSourceSelect.container).is(\":visible\")){\n            $(_this.containers.choroplethSourceSelect.container).show();\n        }\n\n\n        if(_this.options.choropleth.on && _this.options.choropleth.segments) {\n            let segments = _this.options.choropleth.segments;\n            let gradientSegments = [];\n\n            segments.forEach(function (segment, idx) {\n                let td_labelLow = '<td class=\"mapsvg-choropleth-gradient-label-low\">'+segment.labels.low+'</td>';\n                let td_labelHigh = '<td class=\"mapsvg-choropleth-gradient-label-high\">'+segment.labels.high+'</td>';\n                let td_gradient = '<td class=\"mapsvg-choropleth-gradient\">&nbsp;</td>';\n                let tr = $('<tr class=\"mapsvg-choropleth-gradient-wrap\" data-idx=\"'+idx+'\">'+td_labelLow+td_gradient+td_labelHigh+'</tr>')\n                gradientSegments.push(tr);\n            });\n\n            _this.containers.legend = {\n                gradient: gradientSegments,\n                container: $('<div />').addClass('mapsvg-choropleth').hide()[0],\n                table: $('<table />')[0]\n            };\n\n            _this.setChoroplethGradientCSS();\n\n            $(_this.containers.map).find('.mapsvg-choropleth').remove();\n\n            $(_this.containers.legend.table).append(_this.containers.legend.gradient);\n            $(_this.containers.legend.container).append(_this.containers.legend.table);\n            $(_this.containers.map).append(_this.containers.legend.container);\n\n        }\n\n        if (!_this.options.choropleth.on && _this.containers.legend && $(_this.containers.legend.container).is(\":visible\")){\n            $(_this.containers.legend.container).hide();\n            //needsRedraw = true;\n        }else if(_this.options.choropleth.on && !$(_this.containers.legend.container).is(\":visible\")){\n            $(_this.containers.legend.container).show();\n            //needsRedraw = true;\n            _this.regionsRepository.events.on('updated',function(){\n                _this.redrawChoropleth();\n            });\n            _this.objectsRepository.events.on('updated',function(){\n                _this.redrawChoropleth();\n            });\n        }\n\n        if (_this.options.choropleth.on && _this.options.choropleth.segments){\n            _this.options.choropleth.segments.forEach(function (segment, idx) {\n                if (segment.colors) {\n                    segment.colors.lowRGB = tinycolor(segment.colors.low).toRgb();\n                    segment.colors.highRGB = tinycolor(segment.colors.high).toRgb();\n                    segment.colors.diffRGB = {\n                        r: segment.colors.highRGB.r - segment.colors.lowRGB.r,\n                        g: segment.colors.highRGB.g - segment.colors.lowRGB.g,\n                        b: segment.colors.highRGB.b - segment.colors.lowRGB.b,\n                        a: segment.colors.highRGB.a - segment.colors.lowRGB.a\n                    };\n                    //needsRedraw = true;\n                    _this.containers.legend && _this.setChoroplethGradientCSS();\n                }\n                if (segment.labels){\n                    $('.mapsvg-choropleth-gradient-wrap[data-idx=\"'+idx+'\"] .mapsvg-choropleth-gradient-label-low').html(segment.labels.low);\n                    $('.mapsvg-choropleth-gradient-wrap[data-idx=\"'+idx+'\"] .mapsvg-choropleth-gradient-label-high').html(segment.labels.high);\n                }\n            });\n\n        }\n\n        //needsRedraw && _this.redrawChoropleth();\n        _this.redrawChoropleth();\n    }\n    /**\n     * Redraws choropleth map colors\n     * @private\n     */\n    redrawChoropleth (){\n\n        var _this = this;\n\n        _this.updateChoroplethMinMax();\n        _this.redrawBubbles();\n        _this.regionsRedrawColors();\n    }\n    /**\n     * Updates min/max values of choropleth fields\n     * @private\n     */\n    updateChoroplethMinMax (){\n        let _this = this;\n\n        if  (_this.options.choropleth.on){\n\n            let segments = _this.options.choropleth.segments;\n            let values = [];\n\n            segments.forEach(function (segment, idx){\n                segment.min = 0;\n                segment.max = null;\n\n                if (_this.options.choropleth.source === 'regions'){\n                    _this.regions.forEach(function(region){\n                        var choropleth = region.data && region.data[_this.options.choropleth.sourceField];\n                        choropleth != undefined && choropleth !== '' && values.push(choropleth);\n                    });\n                }\n                else {\n                    _this.objectsRepository.objects.forEach(function(object){\n                        var choropleth = object[_this.options.choropleth.sourceField];\n                        choropleth != undefined && choropleth !== '' && values.push(choropleth);\n                    });\n                }\n\n                if(values.length > 0){\n                    let min, max, maxAdjusted;\n\n                    min = values.length == 1 ? 0 :  Math.min.apply(null,values);\n                    max = Math.max.apply(null,values);\n                    maxAdjusted = max - min;\n\n                    if (segments.length > 1){\n                        min = idx == 0 ? min : segments[idx-1].max;\n                        max = segments[0].min + maxAdjusted*segment.valuePart/100;\n                        maxAdjusted = max - min;\n                    }\n\n                    segment.min = min;\n                    segment.max = max;\n                    segment.maxAdjusted = maxAdjusted;\n                }\n            });\n        };\n    }\n    /**\n     * Sets gradient for choropleth map\n     * @private\n     */\n    setChoroplethGradientCSS(){\n\n        var _this = this;\n\n        let segments = _this.options.choropleth.segments;\n\n        segments.forEach(function (segment, idx){\n            $('.mapsvg-choropleth-gradient-wrap[data-idx=\"'+idx+'\"] .mapsvg-choropleth-gradient').css({\n                'background': 'linear-gradient(to right,' + segment.colors.low + ' 1%,' + segment.colors.high + ' 100%)',\n                'filter': 'progid:DXImageTransform.Microsoft.gradient( startColorstr=\"' + segment.colors.low + '\", endColorstr=\"' + segment.colors.high + '\",GradientType=1 )'\n            });\n        });\n\n\n    }\n    /**\n     * Sets custom map CSS.\n     * CSS is added as <style>...</style> tag in the page <header>\n     * @param {string} css\n     * @private\n     */\n    setCss (css?: string): void {\n\n        var _this = this;\n\n        _this.options.css = css || (_this.options.css ? _this.options.css.replace(/%id%/g, ''+this.id) : '');\n        _this.liveCss = _this.liveCss || <HTMLStyleElement>$('<style></style>').appendTo('head')[0];\n        $(_this.liveCss).html(_this.options.css);\n    }\n    /**\n     * Sets filter options\n     * @param {object} options\n     * @example\n     * mapsvg.setFilters{{\n     *   on: true,\n     *   location: \"leftSidebar\"\n     * }};\n     */\n    setFilters (options?: {[key: string]: any}){\n\n        var _this = this;\n\n        options                              = options || _this.options.filters;\n        options.on != undefined              && (options.on = MapSVG.parseBoolean(options.on));\n        options.hide != undefined          && (options.hide = MapSVG.parseBoolean(options.hide));\n        $.extend(true, _this.options, {filters: options});\n\n        var scrollable = false;\n\n        if(['leftSidebar','rightSidebar','header','footer','custom','map'].indexOf(_this.options.filters.location)===-1){\n            _this.options.filters.location = 'leftSidebar';\n        }\n\n        if(_this.options.filters.on){\n\n            if(_this.formBuilder){\n                _this.formBuilder.destroy();\n            }\n\n            if(!_this.containers.filters){\n                _this.containers.filters = $('<div class=\"mapsvg-filters-wrap\"></div>')[0];\n            } else {\n                $(_this.containers.filters).empty();\n                $(_this.containers.filters).show();\n            }\n\n            $(_this.containers.filters).css({\n                'background-color':_this.options.colors.directorySearch,\n            });\n\n            if($(_this.containers.filtersModal)){\n                $(_this.containers.filtersModal).css({width: _this.options.filters.width});\n            }\n\n            if(_this.options.filters.location === 'custom'){\n                $(_this.containers.filters).removeClass('mapsvg-filter-container-custom').addClass('mapsvg-filter-container-custom');\n                if($('#'+_this.options.filters.containerId).length){\n                    $('#'+_this.options.filters.containerId).append(_this.containers.filters);\n                } else {\n                    $(_this.containers.filters).hide();\n                    console.error('MapSVG: filter container #'+_this.options.filters.containerId+' does not exists');\n                }\n            } else {\n                if(MapSVG.isPhone){\n                    $(_this.containers.header).append($(_this.containers.filters));\n                    _this.setContainers({header:{on:true}});\n                }else{\n                    var location = MapSVG.isPhone ? 'header' : _this.options.filters.location;\n                    if(_this.options.menu.on && _this.controllers.directory && _this.options.menu.location === _this.options.filters.location){\n                        $(_this.controllers.directory.containers.view).find('.mapsvg-directory-filter-wrap').append($(_this.containers.filters));\n                        _this.controllers.directory.updateTopShift();\n                    } else {\n                        $(_this.containers[location]).append($(_this.containers.filters));\n                        _this.controllers.directory && _this.controllers.directory.updateTopShift();\n                    }\n                }\n            }\n\n            _this.loadFiltersController(_this.containers.filters, false);\n\n            _this.updateFiltersState();\n        } else {\n            if($(_this.containers.filters)){\n                $(_this.containers.filters).empty();\n                $(_this.containers.filters).hide();\n            }\n        }\n\n        if(_this.options.menu.on && _this.controllers.directory && _this.options.menu.location === _this.options.filters.location){\n            _this.controllers.directory.updateTopShift();\n        }\n    }\n    /**\n     * Updates filters in drop-downs. For example, when region is clicked and data is filtered -\n     * it selects corresponding region in the drop-down filter\n     * @private\n     */\n    updateFiltersState (){\n\n        var _this = this;\n\n        $(_this.containers.filterTags) && $(_this.containers.filterTags).empty();\n\n        if((_this.options.filters && _this.options.filters.on) || _this.objectsRepository.query.hasFilters()){\n\n            for(var field_name in _this.objectsRepository.query.filters){\n                var field_value = _this.objectsRepository.query.filters[field_name];\n                var _field_name = field_name;\n                var filterField = _this.filtersSchema.getField(_field_name);\n\n                if(_this.options.filters.on && filterField){\n                    $(_this.containers.filters).find('select[data-parameter-name=\"'+_field_name+'\"],radio[data-parameter-name=\"\\'+_field_name+\\'\"]')\n                        .data('ignoreSelect2Change', true)\n                        .val(field_value)\n                        .trigger('change');\n                }else{\n                    if(field_name == 'regions'){\n                        // check if there is such filter. If there is then change its value\n                        // if there isn't then add a tag with close button\n                        _field_name = '';\n                        var field_value = field_value.region_ids.map(id => _this.getRegion(id).title);\n                    } else {\n                        _field_name = filterField && filterField.label;\n                    }\n                    if(field_name !== 'distance'){\n                        if(!_this.containers.filterTags){\n                            _this.containers.filterTags = $('<div class=\"mapsvg-filter-tags\"></div>')[0];\n                            // TODO If filtersmodeal on then dont append\n                            if($(_this.containers.filters)){\n                                // $(_this.containers.filters).append($(_this.containers.filterTags));\n                            } else {\n                                if(_this.options.menu.on && _this.controllers.directory){\n                                    $(_this.controllers.directory.containers.toolbar).append(_this.containers.filterTags);\n                                    _this.controllers.directory.updateTopShift();\n                                } else {\n                                    $(_this.containers.map).append(_this.containers.filterTags);\n                                    if(_this.options.zoom.buttons.on){\n                                        if(_this.options.layersControl.on){\n                                            if(_this.options.layersControl.position=='top-left'){\n                                                $(_this.containers.filterTags).css({\n                                                    right: 0,\n                                                    bottom: 0\n                                                });\n                                            } else {\n                                                $(_this.containers.filterTags).css({\n                                                    bottom: 0\n                                                });\n                                            }\n                                        } else {\n                                            if(_this.options.zoom.buttons.location=='left'){\n                                                $(_this.containers.filterTags).css({\n                                                    right: 0\n                                                });\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n\n                            $(_this.containers.filterTags).on('click','.mapsvg-filter-delete',function(e){\n                                var filterField = $(this).data('filter');\n                                $(this).parent().remove();\n                                _this.objectsRepository.query.removeFilter(filterField);\n                                _this.deselectAllRegions();\n                                _this.loadDataObjects();\n                            });\n                        }\n                        $(_this.containers.filterTags).append('<div class=\"mapsvg-filter-tag\">'+(_field_name?_field_name+': ':'')+field_value+' <span class=\"mapsvg-filter-delete\" data-filter=\"'+field_name+'\">×</span></div>');\n                    }\n                }\n            }\n            // this.view.addClass('mapsvg-with-filter');\n\n        }else{\n            // this.view.removeClass('mapsvg-with-filter');\n        }\n    }\n    /**\n     * Sets container options: leftSidebar, rightSidebar, header, footer.\n     * @param {object} options\n     *\n     * @example\n     * mapsvg.setContainers({\n     *   leftSidebar: {\n     *     on: true,\n     *     width: \"300px\"\n     *   }\n     * });\n     */\n    setContainers (options){\n\n        var _this = this;\n\n        if(!this.containersCreated){\n\n            this.containers.wrapAll = document.createElement('div');\n            this.containers.wrapAll.classList.add('mapsvg-wrap-all');\n            this.containers.wrapAll.id = 'mapsvg-map-'+this.id;\n            this.containers.wrapAll.setAttribute('data-map-id', this.id ? (this.id).toString() : '');\n\n            this.containers.wrap = document.createElement('div');\n            this.containers.wrap.classList.add('mapsvg-wrap');\n\n            this.containers.mapContainer = document.createElement('div');\n            this.containers.mapContainer.classList.add('mapsvg-map-container');\n\n            this.containers.leftSidebar = document.createElement('div');\n            this.containers.leftSidebar.className = 'mapsvg-sidebar mapsvg-top-container mapsvg-sidebar-left';\n            this.containers.rightSidebar = document.createElement('div');\n            this.containers.rightSidebar.className = \"mapsvg-sidebar mapsvg-top-container mapsvg-sidebar-right\";\n\n            this.containers.header = document.createElement('div');\n            this.containers.header.className = \"mapsvg-header mapsvg-top-container\";\n            this.containers.footer = document.createElement('div');\n            this.containers.footer.className = \"mapsvg-footer mapsvg-top-container\";\n\n\n            _this.containers.wrapAll = $('<div class=\"mapsvg-wrap-all\"></div>').attr('id', 'mapsvg-map-'+this.id).attr('data-map-id', this.id)[0];\n            _this.containers.wrap    = $('<div class=\"mapsvg-wrap\"></div>')[0];\n            _this.containers.mapContainer = $('<div class=\"mapsvg-map-container\"></div>')[0];\n            _this.containers.leftSidebar  = $('<div class=\"mapsvg-sidebar mapsvg-top-container mapsvg-sidebar-left\"></div>')[0];\n            _this.containers.rightSidebar = $('<div class=\"mapsvg-sidebar mapsvg-top-container mapsvg-sidebar-right\"></div>')[0];\n            _this.containers.header       = $('<div class=\"mapsvg-header mapsvg-top-container\"></div>')[0];\n            _this.containers.footer       = $('<div class=\"mapsvg-footer mapsvg-top-container\"></div>')[0];\n\n            $(_this.containers.wrapAll).insertBefore(_this.containers.map);\n            $(_this.containers.wrapAll).append(_this.containers.header);\n            $(_this.containers.wrapAll).append(_this.containers.wrap);\n            $(_this.containers.wrapAll).append(_this.containers.footer);\n\n\n            $(_this.containers.mapContainer).append(_this.containers.map);\n\n            $(_this.containers.wrap).append(_this.containers.leftSidebar);\n            $(_this.containers.wrap).append(_this.containers.mapContainer);\n            $(_this.containers.wrap).append(_this.containers.rightSidebar);\n            _this.containersCreated = true;\n        }\n\n        options = options || _this.options.containers || {};\n\n        for(var contName in options){\n\n            if(options[contName].on !== undefined){\n                options[contName].on = MapSVG.parseBoolean(options[contName].on);\n            }\n\n            if(options[contName].width){\n                if((typeof options[contName].width != 'string') || options[contName].width.indexOf('px')===-1 && options[contName].width.indexOf('%')===-1 && options[contName].width!=='auto'){\n                    options[contName].width = options[contName].width+'px';\n                }\n                $(_this.containers[contName]).css({'flex-basis': options[contName].width});\n            }\n            if(options[contName].height){\n                if((typeof options[contName].height != 'string') || options[contName].height.indexOf('px')===-1 && options[contName].height.indexOf('%')===-1 && options[contName].height!=='auto'){\n                    options[contName].height = options[contName].height+'px';\n                }\n                $(_this.containers[contName]).css({'flex-basis': options[contName].height, height: options[contName].height});\n            }\n\n            $.extend(true, _this.options, {containers: options});\n\n            var on = _this.options.containers[contName].on;\n\n            if(MapSVG.isPhone && _this.options.menu.hideOnMobile && _this.options.menu.location === contName && ['leftSidebar','rightSidebar'].indexOf(contName) !==-1 ) {\n                on = false;\n            } else if(MapSVG.isPhone && _this.options.menu.location === 'custom' && ['leftSidebar','rightSidebar'].indexOf(contName) !==-1 ){\n                // hide sidebars on mobiles if there's no directory in there because filters are always moved to header (or custom) on mobiles\n                on = false;\n                $(_this.containers.wrapAll).addClass('mapsvg-hide-map-list-buttons');\n            } else if (MapSVG.isPhone && !_this.options.menu.hideOnMobile && _this.options.menu.location === contName && ['leftSidebar','rightSidebar'].indexOf(contName) !==-1 ){\n                $(_this.containers.wrapAll).addClass('mapsvg-hide-map-list-buttons');\n                $(_this.containers.wrapAll).addClass('mapsvg-directory-visible');\n            }\n            $(_this.containers[contName]).toggle(on);\n        }\n\n        _this.setDetailsView();\n    }\n    /**\n     * Checks if container should be scrollable\n     * @param {string} container - mapContainer / leftSidebar / rightSidebar / custom / header / footer\n     * @returns {boolean}\n     * @private\n     */\n    shouldBeScrollable(container){\n\n        var _this = this;\n\n        switch (container){\n            case 'map':\n            case 'leftSidebar':\n            case 'rightSidebar':\n                return true;\n                break;\n            case 'custom':\n                return false;\n                break;\n            case 'header':\n            case 'footer':\n                if(_this.options.containers[container].height && _this.options.containers[container].height !== 'auto' &&  _this.options.containers[container].height !== '100%'){\n                    return true;\n                } else {\n                    return false;\n                }\n                break;\n            default: return false; break;\n        }\n    }\n    /**\n     * Sets directory options.\n     * @alias setMenu\n     * @param {object} options\n     * @returns {*|void}\n     *\n     * @example\n     * mapsvg.setDirectory({\n     *   on: true,\n     *   container: \"leftSidebar\"\n     * });\n     */\n    setDirectory (options){\n\n        var _this = this;\n\n        return _this.setMenu(options);\n    }\n    /**\n     * Sets menu (directory) options\n     * @param options\n     * @private\n     */\n    setMenu (options?: {[key: string]: any}){\n\n        var _this = this;\n\n        options                               = options || _this.options.menu;\n        options.on != undefined              && (options.on = MapSVG.parseBoolean(options.on));\n        options.search != undefined          && (options.search = MapSVG.parseBoolean(options.search));\n        options.showMapOnClick != undefined          && (options.showMapOnClick = MapSVG.parseBoolean(options.showMapOnClick));\n        options.searchFallback != undefined          && (options.searchFallback = MapSVG.parseBoolean(options.searchFallback));\n        options.customContainer != undefined && (options.customContainer = MapSVG.parseBoolean(options.customContainer));\n\n        $.extend(true, _this.options, {menu: options});\n\n        _this.controllers = _this.controllers || {};\n\n        if(!_this.containers.directory){\n            _this.containers.directory = $('<div class=\"mapsvg-directory\"></div>')[0];\n        }\n\n        // If directory will be scrollable make it absolutely positioned, fill the parent container.\n        $(_this.containers.directory).toggleClass('flex', _this.shouldBeScrollable(_this.options.menu.location));\n\n        if(_this.options.menu.on){\n\n            if(!_this.controllers.directory){\n                _this.controllers.directory = new DirectoryController({\n                    container: _this.containers.directory,\n                    template: _this.templates.directory,\n                    mapsvg: _this,\n                    repository: _this.options.menu.source === 'regions' ? _this.regionsRepository : _this.objectsRepository,\n                    scrollable: _this.shouldBeScrollable(_this.options.menu.location),//_this.options.menu.location === 'leftSidebar' || _this.options.menu.location === 'rightSidebar',\n                    // position: _this.options.menu.position,\n                    // search: _this.options.menu.search,\n                    events : {\n                        click: function(e, regionOrObject, mapsvg){ _this.events.trigger('click.directoryItem', this, [e, regionOrObject, mapsvg]); },\n                        mouseover: function(e, regionOrObject, mapsvg){\n                            _this.events.trigger('mouseover.directoryItem', this, [e, regionOrObject, mapsvg]);\n                        },\n                        mouseout: function(e, regionOrObject, mapsvg){ _this.events.trigger('mouseout.directoryItem', this, [e, regionOrObject, mapsvg]); }\n                    }\n                });\n                _this.controllers.directory._init();\n            } else {\n                _this.controllers.directory.repository = _this.options.menu.source === 'regions' ? _this.regionsRepository : _this.objectsRepository;\n                _this.controllers.directory.repository.query.update({sort: [{\n                    field: _this.options.menu.sortBy,\n                    order: _this.options.menu.sortDirection\n                }]});\n                if(options.filterout){\n                    var f = {};\n                    f[_this.options.menu.filterout.field] = _this.options.menu.filterout.val;\n                    _this.controllers.directory.repository.query.setFilterOut(f);\n                }\n                _this.controllers.directory.scrollable = _this.shouldBeScrollable(_this.options.menu.location)\n            }\n\n            var $container;\n            if(MapSVG.isPhone && _this.options.menu.hideOnMobile){\n                $container = $(_this.containers.leftSidebar);\n            }else{\n                $container = _this.options.menu.location !== 'custom' ? $(_this.containers[_this.options.menu.location]) : $('#' + _this.options.menu.containerId);\n            }\n            $container.append(_this.containers.directory);\n\n            if(_this.options.colors.directory){\n                $(_this.containers.directory).css({\n                    'background-color': _this.options.colors.directory\n                });\n            }\n            _this.setFilters();\n            _this.setTemplates({directoryItem: _this.options.templates.directoryItem});\n            if((_this.options.menu.source === 'regions' && _this.regionsRepository.loaded) || (_this.options.menu.source === 'database' && _this.objectsRepository.loaded)){\n                if(_this.editMode && (options.sortBy || options.sortDirection || options.filterout)){\n                    _this.controllers.directory.repository.reload();\n                }\n                _this.loadDirectory();\n            }\n\n        } else {\n            _this.controllers.directory && _this.controllers.directory.destroy();\n            _this.controllers.directory = null;\n        }\n    }\n    /**\n     * Sets database options.\n     * @param {object} options\n     * @example\n     * mapsvg.setDatabase({\n     *   pagination: {on: true, perpage: 30}\n     * });\n     */\n    setDatabase (options){\n\n        var _this = this;\n\n        options = options || _this.options.database;\n\n        if(options.pagination){\n            if(options.pagination.on != undefined){\n                options.pagination.on = MapSVG.parseBoolean(options.pagination.on);\n            }\n            if(options.pagination.perpage != undefined){\n                options.pagination.perpage = parseInt(options.pagination.perpage);\n            }\n        }\n        $.extend(true, _this.options, {database: options});\n        if(options.pagination){\n            if(options.pagination.on !== undefined || options.pagination.perpage){\n                var query = new Query({\n                    perpage   : _this.options.database.pagination.on ? _this.options.database.pagination.perpage : 0\n                });\n\n                _this.objectsRepository.find(query);\n            } else {\n                _this.setPagination();\n            }\n        }\n    }\n    /**\n     * Sets Google Map options.\n     * @param {object} options\n     * @example\n     * mapsvg.setGoogleMaps({\n     *   on: true,\n     *   type: \"terrain\"\n     * });\n     *\n     * // Get Google Maps instance:\n     * var gm = mapsvg.googleMaps.map;\n     */\n    setGoogleMaps (options?: any){\n\n        var _this = this;\n\n        options    = options || _this.options.googleMaps;\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n\n        if(!_this.googleMaps){\n            _this.googleMaps = {loaded: false, initialized: false, map: null, overlay: null};\n        }\n\n        $.extend(true, _this.options, {googleMaps: options});\n\n        if(_this.options.googleMaps.on){\n            $(_this.containers.map).toggleClass('mapsvg-with-google-map', true);\n            // _this.setResponsive(false);\n            // if(!_this.googleMaps.loaded){\n            if(!MapSVG.googleMapsApiLoaded){\n                _this.loadGoogleMapsAPI(\n                    function(){\n                        _this.setGoogleMaps();\n                    },\n                    function(){\n                        _this.setGoogleMaps({on:false});\n                    }\n                );\n            } else {\n                if(!_this.googleMaps.map){\n                    _this.containers.googleMaps = $('<div class=\"mapsvg-layer mapsvg-layer-gm\" id=\"mapsvg-google-maps-'+_this.id+'\"></div>').prependTo(_this.containers.map)[0];\n                    $(_this.containers.googleMaps).css({\n                        position: 'absolute',\n                        top:0,\n                        left: 0,\n                        bottom: 0,\n                        right: 0,\n                        'z-index': '0'\n                    });\n                    _this.googleMaps.map = new google.maps.Map(_this.containers.googleMaps, {\n                        mapTypeId: options.type,\n                        fullscreenControl: false,\n                        keyboardShortcuts: false,\n                        mapTypeControl: false,\n                        scaleControl: false,\n                        scrollwheel: false,\n                        streetViewControl: false,\n                        zoomControl: false,\n                        styles: options.styleJSON\n\n                    });\n                    var overlay;\n                    USGSOverlay.prototype = new google.maps.OverlayView();\n\n                    // @ts-ignore\n                    function USGSOverlay(bounds, map) {\n                        // Initialize all properties.\n                        this.bounds_ = bounds;\n                        this.map_ = map;\n                        this.setMap(map);\n                        this.prevCoords = {\n                            sw:  {x:0,y:0},\n                            sw2: {x:0,y:0},\n                            ne:  {x:0,y:0},\n                            ne2: {x:0,y:0}\n                        };\n                    }\n                    USGSOverlay.prototype.onAdd = function() {\n\n                        var div = document.createElement('div');\n                        div.style.borderStyle = 'none';\n                        div.style.borderWidth = '0px';\n                        div.style.position    = 'absolute';\n\n                        this.div_ = div;\n                        // Add the element to the \"overlayLayer\" pane.\n                        var panes = this.getPanes();\n                        panes.overlayLayer.appendChild(div);\n                    };\n\n                    USGSOverlay.prototype.draw = function(t) {\n\n                        // return;\n\n                        if (_this.isScrolling) return;\n\n\n                        var overlayProjection = this.getProjection();\n                        if(!overlayProjection) return;\n\n                        var geoSW = this.bounds_.getSouthWest();\n                        var geoNE = this.bounds_.getNorthEast();\n\n                        var coords = {\n                            sw: overlayProjection.fromLatLngToDivPixel(geoSW),\n                            ne: overlayProjection.fromLatLngToDivPixel(geoNE),\n                            sw2: overlayProjection.fromLatLngToContainerPixel(geoSW),\n                            ne2: overlayProjection.fromLatLngToContainerPixel(geoNE)\n                        };\n\n                        // check if map on border between 180/-180 longitude\n                        // if(ne.x < sw.x){\n                        //     sw.x = sw.x - overlayProjection.getWorldWidth();\n                        // }\n                        // console.log('NOW sw:'+sw.x+' and ne:'+ne.x+'and W-width:'+overlayProjection.getWorldWidth());\n\n                        // if(ne2.x < sw2.x){\n                        //     sw2.x = sw2.x - overlayProjection.getWorldWidth();\n                        // }\n\n                        var ww = overlayProjection.getWorldWidth();\n\n                        if(this.prevCoords.sw){\n\n                            if(coords.ne.x < coords.sw.x){\n                                if(Math.abs(this.prevCoords.sw.x - coords.sw.x) > Math.abs(this.prevCoords.ne.x - coords.ne.x)){\n                                    coords.sw.x = coords.sw.x - ww;\n                                }else{\n                                    coords.ne.x = coords.ne.x + ww;\n                                }\n                                if(Math.abs(this.prevCoords.sw2.x - coords.sw2.x) > Math.abs(this.prevCoords.ne2.x - coords.ne2.x)){\n                                    coords.sw2.x = coords.sw2.x - ww;\n                                }else{\n                                    coords.ne2.x = coords.ne2.x + ww;\n                                }\n                            }\n                        }\n\n                        for (var i in this.prevCoords){}\n\n                        this.prevCoords = coords;\n\n                        var scale = (coords.ne2.x - coords.sw2.x)/_this.svgDefault.viewBox.width;\n\n                        // var scale = (ne.x - sw.x)/_this.svgDefault.viewBox.width;\n                        var vb = new ViewBox(\n                            _this.svgDefault.viewBox.x - coords.sw2.x/scale,\n                            _this.svgDefault.viewBox.y - coords.ne2.y/scale,\n                            $(_this.containers.map).width()/scale,\n                            $(_this.containers.map).outerHeight()/scale\n                        );\n                        _this.setViewBox(vb);\n                        // var div = this.div_;\n                        // div.style.background = 'rgba(255,0,0,.5)';\n                        // div.style.left   = coords.sw.x + 'px';\n                        // div.style.top    = coords.ne.y + 'px';\n                        // div.style.width  = (coords.ne.x - coords.sw.x) + 'px';\n                        // div.style.height = (coords.sw.y - coords.ne.y) + 'px';\n                    };\n\n                    var southWest = new google.maps.LatLng(_this.geoViewBox.sw.lat, _this.geoViewBox.sw.lng);\n                    var northEast = new google.maps.LatLng(_this.geoViewBox.ne.lat, _this.geoViewBox.ne.lng);\n                    var bounds = new google.maps.LatLngBounds(southWest,northEast);\n\n                    _this.googleMaps.overlay = new USGSOverlay(bounds, _this.googleMaps.map);\n\n                    if(!_this.options.googleMaps.center || !_this.options.googleMaps.zoom){\n                        // var southWest = new google.maps.LatLng(_this.geoViewBox.bottomLat, _this.geoViewBox.leftLon);\n                        // var northEast = new google.maps.LatLng(_this.geoViewBox.topLat, _this.geoViewBox.rightLon);\n                        // var bounds = new google.maps.LatLngBounds(southWest,northEast);\n                        _this.googleMaps.map.fitBounds(bounds, 0);\n                    }else{\n                        _this.googleMaps.map.setZoom(_this.options.googleMaps.zoom);\n                        // _this.options.googleMaps.center.lat = parseFloat(_this.options.googleMaps.center.lat);\n                        // _this.options.googleMaps.center.lng = parseFloat(_this.options.googleMaps.center.lng);\n                        _this.googleMaps.map.setCenter(_this.options.googleMaps.center);\n                    }\n                    _this.googleMaps.initialized = true;\n                    _this.googleMaps.map.addListener('idle',function(){\n                        _this.isZooming = false;\n                    });\n                    google.maps.event.addListenerOnce(_this.googleMaps.map, 'idle', function(){\n\n                        setTimeout(function() {\n                            $(_this.containers.map).addClass('mapsvg-fade-in');\n                            setTimeout(function() {\n                                $(_this.containers.map).removeClass('mapsvg-google-map-loading');\n                                $(_this.containers.map).removeClass('mapsvg-fade-in');\n                                // _this.googleMaps.overlay.draw();\n                                if(!_this.options.googleMaps.center || !_this.options.googleMaps.zoom) {\n                                    _this.options.googleMaps.center = _this.googleMaps.map.getCenter().toJSON();\n                                    _this.options.googleMaps.zoom = _this.googleMaps.map.getZoom();\n                                }\n                                _this.zoomDelta = _this.options.googleMaps.zoom - _this.zoomLevel;\n                                _this.events.trigger('googleMapsLoaded');\n                            }, 300);\n                        }, 1);\n                    });\n                    // setTimeout(function(){\n                    // _this.googleMaps.map.addListener('bounds_changed',function(){\n                    //     _this.googleMaps.overlay.draw(1);\n                    // if (!_this.isScrolling)\n                    // setTimeout(function(){\n                    //     if (!_this.isScrolling) {\n                    //         null;\n                    //     }\n                    //         // _this.googleMaps.overlay.draw();\n                    //         // _this.setViewBoxByGoogleMapBounds();\n                    // },2);\n                    // });\n                    // _this.googleMaps.map.addListener('zoom_changed',function(){\n                    //     setTimeout(function(){\n                    //         _this.events.trigger('zoom');\n                    //     },200);\n                    // });\n\n                    // _this.setViewBoxByGoogleMapBounds();\n                    // },2500);\n\n                }else{\n                    $(_this.containers.map).toggleClass('mapsvg-with-google-map', true);\n                    $(_this.containers.googleMaps) && $(_this.containers.googleMaps).show();\n                    if(options.type){\n                        _this.googleMaps.map.setMapTypeId(options.type);\n                    }\n                }\n            }\n        }else{\n            // TODO: destroy google maps\n            $(_this.containers.map).toggleClass('mapsvg-with-google-map', false);\n            $(_this.containers.googleMaps) && $(_this.containers.googleMaps).hide();\n            _this.googleMaps.initialized = false;\n\n        }\n\n    }\n    /**\n     * Loads Google Maps API (js file)\n     * @param {function} callback - called on file load\n     * @param fail\n     * @private\n     */\n    loadGoogleMapsAPI (callback, fail){\n\n        var _this = this;\n\n        if(window.google !== undefined && google.maps){\n            MapSVG.googleMapsApiLoaded = true;\n        }\n\n        if(MapSVG.googleMapsApiLoaded){\n            if(typeof callback == 'function'){\n                callback();\n            }\n            return;\n        }\n\n        MapSVG.googleMapsLoadCallbacks = MapSVG.googleMapsLoadCallbacks || [];\n        if(typeof callback == 'function') {\n            MapSVG.googleMapsLoadCallbacks.push(callback);\n        }\n\n        if(MapSVG.googleMapsApiIsLoading){\n            return;\n        }\n        MapSVG.googleMapsApiIsLoading = true;\n\n        // @ts-ignore\n        window.gm_authFailure = function() {\n            if(MapSVG.GoogleMapBadApiKey){\n                MapSVG.GoogleMapBadApiKey();\n            }else{\n                if(_this.editMode) {\n                    alert(\"Google maps API key is incorrect.\");\n                } else {\n                    console.error(\"MapSVG: Google maps API key is incorrect.\");\n                }\n            }\n        };\n        _this.googleMapsScript = document.createElement('script');\n        _this.googleMapsScript.onload = function(){\n            MapSVG.googleMapsApiLoaded = true;\n            MapSVG.googleMapsLoadCallbacks.forEach(function(_callback){\n                if(typeof callback == 'function')\n                    _callback();\n            });\n        };\n        var gmLibraries = [];\n        if(_this.options.googleMaps.drawingTools){\n            gmLibraries.push('drawing');\n        }\n        if(_this.options.googleMaps.geometry){\n            gmLibraries.push('geometry');\n        }\n        var libraries = '';\n        if(gmLibraries.length > 0 ){\n            libraries = '&libraries='+ gmLibraries.join(',');\n        }\n        _this.googleMapsScript.src = 'https://maps.googleapis.com/maps/api/js?language=en&key='+_this.options.googleMaps.apiKey+libraries;\n\n        document.head.appendChild(_this.googleMapsScript);\n    }\n    /**\n     * Loads Details View for an object (Region or DB Object)\n     * @param {Region|object} obj\n     *\n     * @example\n     * var region = mapsvg.getRegion(\"US-TX\");\n     * mapsvg.loadDetailsView(region);\n     *\n     * var object = mapsvg.database.getLoadedObject(12);\n     * mapsvg.loadDetailsView(object);\n     */\n    loadDetailsView (obj){\n\n        var _this = this;\n\n        _this.controllers.popover && _this.controllers.popover.close();\n        if(_this.controllers.detailsView)\n            _this.controllers.detailsView.destroy();\n\n        _this.controllers.detailsView = new DetailsController({\n            // color: _this.options.colors.detailsView,\n            autoresize: MapSVG.isPhone && _this.options.detailsView.mobileFullscreen && _this.options.detailsView.location !== 'custom' ? false : _this.options.detailsView.autoresize,\n            container: _this.containers.detailsView,\n            template: obj instanceof Region ?  _this.templates.detailsViewRegion : _this.templates.detailsView,\n            mapsvg: _this,\n            data: obj.getData(this.regionsRepository.schema.name),\n            modal: (MapSVG.isPhone && _this.options.detailsView.mobileFullscreen && _this.options.detailsView.location !== 'custom'),\n            scrollable: (MapSVG.isPhone && _this.options.detailsView.mobileFullscreen && _this.options.detailsView.location !== 'custom') || _this.shouldBeScrollable(_this.options.detailsView.location),//['custom','header','footer'].indexOf(_this.options.detailsView.location) === -1,\n            withToolbar: !(MapSVG.isPhone && _this.options.detailsView.mobileFullscreen && _this.options.detailsView.location !== 'custom') && _this.shouldBeScrollable(_this.options.detailsView.location),//['custom','header','footer'].indexOf(_this.options.detailsView.location) === -1,\n            // width: _this.options.detailsView.width,\n            events: {\n                shown: function(mapsvg){\n                    _this.events.trigger('shown.detailsView', _this);\n                },\n                closed: function(mapsvg){\n                    _this.deselectAllRegions();\n                    _this.deselectAllMarkers();\n                    _this.controllers && _this.controllers.directory && _this.controllers.directory.deselectItems();\n                    _this.events.trigger('closed.detailsView', _this);\n                }\n            }\n        });\n        _this.controllers.detailsView._init();\n    }\n    /**\n     * Loads modal window with filters\n     * @private\n     */\n    loadFiltersModal (){\n\n        var _this = this;\n\n        if(_this.options.filters.modalLocation != 'custom'){\n            if(!_this.containers.filtersModal){\n                _this.containers.filtersModal = $('<div class=\"mapsvg-details-container mapsvg-filters-wrap\"></div>')[0];\n            }\n            _this.setColors();\n            $(_this.containers.filtersModal).css({width: _this.options.filters.width});\n            if(MapSVG.isPhone){\n                $('body').append($(_this.containers.filtersModal));\n                $(_this.containers.filtersModal).css({width: ''});\n            }else{\n                $(_this.containers[_this.options.filters.modalLocation]).append($(_this.containers.filtersModal));\n            }\n        }else{\n            _this.containers.filtersModal = $('#'+_this.options.filters.containerId)[0];\n            $(_this.containers.filtersModal).css({width: ''});\n        }\n\n        _this.loadFiltersController(_this.containers.filtersModal, true);\n\n    }\n    /**\n     * Loads filters controller into a provided container\n     * @param {HTMLElement} container - Container, jQuery object\n     * @param {boolean} modal - If filter should be in a modal window\n     */\n    loadFiltersController (container: HTMLElement, modal: boolean = false){\n\n        var _this = this;\n\n        // If the list of filter fields is empty, exit\n        if(_this.filtersSchema.getFields().length === 0){\n            return;\n        }\n\n        let filtersInDirectory: boolean,\n            filtersHide: boolean;\n\n        if(MapSVG.isPhone){\n            filtersInDirectory = true;\n            filtersHide = _this.options.filters.hideOnMobile; //_this.filtersSchema.schema.length > 2;\n        }else{\n            filtersInDirectory = (_this.options.menu.on && _this.controllers.directory && _this.options.menu.location === _this.options.filters.location);\n            filtersHide = _this.options.filters.hide;\n        }\n        var scrollable = modal || (!filtersInDirectory && (['leftSidebar','rightSidebar'].indexOf(_this.options.filters.location) !== -1));\n\n        this.filtersRepository = _this.options.filters.source === 'regions' ? _this.regionsRepository : _this.objectsRepository;\n\n        this.controllers.filters = new FiltersController({\n            container: container,\n            query: this.filtersRepository.query,\n            mapsvg: _this,\n            schema: _this.filtersSchema,\n            template: Handlebars.compile('<div class=\"mapsvg-filters-container\"></div>'),\n            scrollable: scrollable,\n            modal: modal,\n            withToolbar: MapSVG.isPhone ? false : modal,\n            width: $(container).hasClass('mapsvg-map-container') ? _this.options.filters.width : '100%',\n            hide: _this.options.filters.hide,\n            hideOnMobile: _this.options.filters.hideOnMobile,\n            showButtonText: _this.options.filters.showButtonText,\n            clearButton: _this.options.filters.clearButton,\n            clearButtonText: _this.options.filters.clearButtonText,\n            padding: _this.options.filters.padding,\n            events: {\n                'cleared.fields': () => {\n                    _this.deselectAllRegions();\n                },\n                'changed.fields': () => {\n                    _this.throttle(_this.filtersRepository.reload, 400, _this.filtersRepository);\n                },\n                'changed.search': () => {\n                    _this.throttle(_this.filtersRepository.reload, 400, _this.filtersRepository);\n                },\n                'shown': function(mapsvg){\n                },\n                'closed': function(mapsvg){\n                },\n                'loaded': () => {\n                    // TODO add resize sensor to directory instead of this:\n                    console.log('_this.controllers.directory');\n                    console.log(_this.controllers.directory);\n                    _this.controllers.directory && _this.controllers.directory.updateTopShift();\n                },\n                'click.btn.showFilters': ()=>{\n                    _this.loadFiltersModal();\n                }\n\n            }\n        });\n        this.controllers.filters._init();\n    }\n    /**\n     * Event handler for text search input\n     * @event\n     * @param {string} text\n     * @param {fallback} boolean\n     * @private\n     */\n    textSearch (text: string, fallback: boolean = false){\n\n        var query = new Query({\n            filters: {\"search\": text},\n            searchFallback: fallback\n        });\n\n        this.filtersRepository.find(query);\n    }\n    /**\n     * Finds a Region by ID\n     * @param {string} id - Region ID\n     * @returns {Region}\n\n     * @example\n     * var region = mapsvg.getRegion(\"US-TX\");\n     */\n    getRegion (id): Region {\n        return this.regions.findById(id);\n    }\n    /**\n     * Returns all Regions\n     * @returns {Region[]}\n     */\n    getRegions () {\n        return this.regions;\n    }\n    /**\n     * Finds a Marker by ID\n     * @param {string} id - Marker ID\n     * @returns {Marker}\n\n     * @example\n     * var marker = mapsvg.getMarker(\"marker_12\");\n     */\n    getMarker (id): Marker {\n        return this.markers.findById(id);\n    }\n    /**\n     * Checks if IDs is unique\n     * @param id\n     * @returns {bool|string} - true if ID is available, {error: \"error text\"} if not.\n     * @private\n     */\n    checkId (id){\n        var _this = this;\n        if(_this.getRegion(id))\n            return {error: \"This ID is already being used by a Region\"};\n        else if(_this.getMarker(id))\n            return {error: \"This ID is already being used by another Marker\"};\n        else\n            return true;\n\n    }\n    /**\n     * Redraws colors of regions.\n     * Used when Region statuses are loaded from the database or when choropleth map is enabled.\n     */\n    regionsRedrawColors(){\n        var _this = this;\n        _this.regions.forEach(function(region){\n            region.setFill();\n        });\n    }\n    /**\n     * Redraw choropleth bubbles.\n     */\n    redrawBubbles(){\n        $(this.containers.map).removeClass('bubbles-regions-on bubbles-database-on');\n\n        if (this.options.choropleth.on && this.options.choropleth.bubbleMode){\n            $(this.containers.map).addClass('bubbles-'+this.options.choropleth.source+'-on');\n        }\n\n        this.regions.forEach(function(region){\n            region.drawBubble();\n        });\n\n        this.objectsRepository.objects.forEach(function (object){\n            object.location.marker.drawBubble();\n        });\n    }\n    /**\n     * Destroys the map and all related containers.\n     * @returns {Map}\n     */\n    destroy (){\n        var _this = this;\n        if(_this.controllers && _this.controllers.directory){\n            _this.controllers.directory.mobileButtons.remove();\n        }\n        $(_this.containers.map).empty().insertBefore($(_this.containers.wrapAll)).attr('style','').removeClass('mapsvg mapsvg-responsive');\n\n        _this.controllers.popover && _this.controllers.popover.close();\n\n        if(_this.controllers.detailsView)\n            _this.controllers.detailsView.destroy();\n\n        $(_this.containers.wrapAll).remove();\n\n        return _this;\n    }\n    /**\n     * Was used previously to return _data that contained all map properties.\n     * Now properties are stored in the map instance itself.\n     * @returns {Map}\n     */\n    getData(): {[key: string]: any} {\n        return {\n            id: this.id,\n            title: this.options.title,\n            options: this.getOptions(false, false)\n        };\n    }\n    /**\n     * Checks if fitmarkers() action can be performed and does it\n     * @private\n     */\n    mayBeFitMarkers(){\n\n        var _this = this;\n\n        if(!this.lastTimeFitWas){\n            this.lastTimeFitWas = Date.now() - 99999;\n        }\n\n        this.fitDelta = Date.now() - this.lastTimeFitWas;\n\n        if(this.fitDelta > 1000 && !_this.firstDataLoad && !_this.fitOnDataLoadDone && _this.options.fitMarkers){\n            _this.fitMarkers();\n            _this.fitOnDataLoadDone = true;\n        }\n        if(_this.firstDataLoad && _this.options.fitMarkersOnStart){\n            _this.firstDataLoad = false;\n            if(_this.options.googleMaps.on && !_this.googleMaps.map){\n                _this.events.on('googleMapsLoaded', function(){\n                    _this.fitMarkers();\n                });\n            }else{\n                _this.fitMarkers();\n            }\n        }\n\n        this.lastTimeFitWas = Date.now();\n    }\n    /**\n     * Changes maps viewBox to fit loaded markers.\n     */\n    fitMarkers (){\n\n        var _this = this;\n\n        var dbObjects = _this.objectsRepository.getLoaded();\n\n        if(!dbObjects || dbObjects.length === 0){\n            return;\n        }\n\n        if(_this.options.googleMaps.on && typeof google !== \"undefined\"){\n\n            var lats = []; var lngs = [];\n\n            if(dbObjects.length > 1){\n                dbObjects.forEach(function(object){\n                    if(object.location && object.location.geoPoint){\n                        lats.push(object.location.geoPoint.lat);\n                        lngs.push(object.location.geoPoint.lng);\n                    }\n                });\n\n                // calc the min and max lng and lat\n                var minlat = Math.min.apply(null, lats),\n                    maxlat = Math.max.apply(null, lats);\n                var minlng = Math.min.apply(null, lngs),\n                    maxlng = Math.max.apply(null, lngs);\n\n                var bbox = new google.maps.LatLngBounds({lat: minlat, lng: minlng},{lat: maxlat, lng: maxlng});\n                _this.googleMaps.map.fitBounds(bbox, 0);\n            } else {\n                if(dbObjects[0].location && dbObjects[0].location.lat && dbObjects[0].location.lng){\n                    var coords = {lat: dbObjects[0].location.lat, lng: dbObjects[0].location.lng};\n                    if(_this.googleMaps.map){\n                        _this.googleMaps.map.setCenter(coords);\n                        var max = _this.googleMaps.zoomLimit ? 17 : 20;\n                        _this.googleMaps.map.setZoom(max);\n                    }\n                }\n\n            }\n        } else {\n            if(_this.options.clustering.on){\n                let arr = [];\n                _this.markersClusters.forEach(function(c){\n                    arr.push(c);\n                })\n                _this.markers.forEach(function(m){\n                    arr.push(m);\n                })\n                return _this.zoomTo(arr);\n            } else {\n                return _this.zoomTo(_this.markers);\n            }\n        }\n    }\n    /**\n     * Shows user current location\n     * Works only under HTTPS connection\n     * @returns {boolean|object} - \"false\" if geolocation is unavailable, or {lat: float, lng: float} if it's available\n     */\n    showUserLocation (callback){\n\n        var _this = this;\n\n        this.getUserLocation(function(geoPoint: GeoPoint){\n\n            _this.userLocation = null;\n            _this.userLocation = new Location({\n                geoPoint: geoPoint,\n                img: MapSVG.urls.root+'/markers/user-location.svg'\n            });\n            _this.userLocationMarker && _this.userLocationMarker.delete();\n            _this.userLocationMarker = new Marker({\n                location: _this.userLocation,\n                mapsvg: _this,\n                width: 15,\n                height: 15\n            });\n            $(_this.userLocationMarker.element).addClass('mapsvg-user-location');\n            _this.userLocationMarker.centered = true;\n            $(_this.containers.scrollpane).append(_this.userLocationMarker.element);\n            _this.userLocationMarker.adjustPosition();\n            callback && callback(_this.userLocation);\n        });\n    }\n    /**\n     * Gets user's current location by using browser's HTML5 geolocation feature.\n     * Works only under HTTPS connection!\n     * @returns {boolean|object} - \"false\" if geolocation is unavailable, or {lat: float, lng: float} if it's available\n     */\n    getUserLocation (callback){\n\n        var _this = this;\n\n        if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function(position){\n                var pos = new GeoPoint(position.coords.latitude, position.coords.longitude);\n                callback && callback(pos);\n            });\n        } else {\n            return false;\n        }\n    }\n    /**\n     * Returns current SVG scale related to screen - map screen pixels to SVG points ratio.\n     * Example: if SVG current viewBox width is 600 and the map is shown in a 300px container,\n     * the map scale is 0.5 (300/600 = 0.5)\n     * @returns {number}\n     */\n    getScale(){\n\n        var _this = this;\n\n        var scale2 = $(_this.containers.map).width() / _this.viewBox.width;\n\n        return scale2 || 1;\n    }\n    /**\n     * Updates size of the map and containers\n     * @private\n     */\n    updateSize (){\n\n        var _this = this;\n\n        _this.scale = _this.getScale();\n        _this.controllers.popover && _this.controllers.popover.adjustPosition();\n        _this.markersAdjustPosition();\n        if(_this.options.labelsRegions.on){\n            _this.labelsRegionsAdjustPosition();\n        }\n        if(_this.options.choropleth.on && _this.options.choropleth.bubbleMode){\n            _this.redrawBubbles();\n        }\n        _this.mapAdjustStrokes();\n        // if(_this.directoryWrap)\n        //     _this.directoryWrap.height($(_this.containers.wrap).outerHeight());\n    }\n    /**\n     * Returns current viewBox\n     * @returns {array} - [x,y,width,height]\n     */\n    getViewBox (){\n        return this.viewBox;\n    }\n    /**\n     * Sets map container size and viewBox size.\n     * This method should be used when you need to change both map container size and viewBox size.\n     * @param {number} width\n     * @param {number} height\n     * @returns {Array} - viewBox, [x,y,width,height]\n     */\n    viewBoxSetBySize (width,height){\n\n        var _this = this;\n\n        width = parseFloat(width);\n        height = parseFloat(height);\n        _this.setSize(width,height);\n        _this._viewBox = _this.viewBoxGetBySize(width,height);\n        // _this.options.width = parseFloat(width);\n        // _this.options.height = parseFloat(height);\n\n        _this.setViewBox(_this._viewBox);\n        $(window).trigger('resize');\n        _this.setSize(width,height);\n        _this.setZoomLevels();\n\n        // _this.whRatio = _this.viewBox.width / _this.viewBox.height;\n        // if(!_this.options.responsive)\n        //     _this.setResponsive();\n\n        return _this.viewBox;\n    }\n    /**\n     * Returns viewBox for a provided width/height\n     * @param width\n     * @param height\n     * @returns {Array} - viewBox, [x,y,width,height]\n     * @private\n     */\n    viewBoxGetBySize (width, height){\n\n        var _this = this;\n\n        var new_ratio = width / height;\n        var old_ratio = _this.svgDefault.viewBox.width / _this.svgDefault.viewBox.height;\n\n        var vb = $.extend([],_this.svgDefault.viewBox);\n\n        if (new_ratio != old_ratio){\n            //vb[2] = width*_this.svgDefault.viewBox.width / _this.svgDefault.width;\n            //vb[3] = height*_this.svgDefault.viewBox.height / _this.svgDefault.height;\n            if (new_ratio > old_ratio){\n                vb[2] = _this.svgDefault.viewBox.height * new_ratio;\n                vb[0] = _this.svgDefault.viewBox.x - ((vb[2] - _this.svgDefault.viewBox.width)/2);\n            }else{\n                vb[3] = _this.svgDefault.viewBox.width / new_ratio;\n                vb[1] = _this.svgDefault.viewBox.y - ((vb[3] - _this.svgDefault.viewBox.height)/2);\n            }\n\n        }\n\n        return vb;\n    }\n    /**\n     * Resets map zoom and scroll to initial position.\n     * @param {bool} toInitial - Set to \"true\" if you want to reset to initial viewBox that was set by user;\n     * set to \"false\" to reset to original SVG viewBox as defined in the SVG file\n     * @returns {Array} - viewBox, [x,y,width,height]\n     */\n    viewBoxReset (toInitial){\n\n        var _this = this;\n\n        if(_this.options.googleMaps.on && _this.googleMaps.map){\n            if(!toInitial){\n                _this.options.googleMaps.center = null;\n                _this.options.googleMaps.zoom = null;\n            }\n            if(!_this.options.googleMaps.center || !_this.options.googleMaps.zoom){\n                var southWest = new google.maps.LatLng(_this.geoViewBox.sw.lat, _this.geoViewBox.sw.lng);\n                var northEast = new google.maps.LatLng(_this.geoViewBox.ne.lat, _this.geoViewBox.ne.lng);\n                var bounds = new google.maps.LatLngBounds(southWest,northEast);\n                _this.googleMaps.map.fitBounds(bounds, 0);\n                _this.options.googleMaps.center = _this.googleMaps.map.getCenter().toJSON();\n                _this.options.googleMaps.zoom = _this.googleMaps.map.getZoom();\n            }else{\n                _this.googleMaps.map.setZoom(_this.options.googleMaps.zoom);\n                _this.googleMaps.map.setCenter(_this.options.googleMaps.center);\n            }\n        }else{\n            if(toInitial){\n                var v = _this._viewBox || _this.svgDefault.viewBox;\n                _this.zoomLevel = 0;\n                _this._scale = 1;\n                _this.setViewBox(v);\n            }else{\n                _this.setViewBox();\n            }\n        }\n        return this.viewBox;\n    }\n    /**\n     * Returns geo-bounds of the map.\n     * @returns {number[]} - [leftLon, topLat, rightLon, bottomLat]\n     */\n    getGeoViewBox (){\n\n        var _this = this;\n\n        var v  = _this.viewBox;\n        var p1 = new SVGPoint(v.x,v.y);\n        var p2 = new SVGPoint(v.x+v.width,v.y);\n        var p3 = new SVGPoint(v.x,v.y);\n        var p4 = new SVGPoint(v.x,v.y+v.height);\n\n        var leftLon   = _this.convertSVGToGeo(p1).lng;\n        var rightLon  = _this.convertSVGToGeo(p2).lng;\n        var topLat    = _this.convertSVGToGeo(p3).lat;\n        var bottomLat = _this.convertSVGToGeo(p4).lat;\n\n        return [leftLon, topLat, rightLon, bottomLat];\n    }\n    /**\n     * Adjusts stroke widths on zoom change to keeps their widths the same on all zoom levels.\n     */\n    mapAdjustStrokes (){\n\n        var _this = this;\n\n        // TODO add an option to turn on/off non-scaling strokes\n        this.regions.forEach(region => region.adjustStroke(_this.scale));\n\n        // $(this.containers.svg).find('path, polygon, circle, ellipse, rect').each(function(index){\n        //     if($(this).data('stroke-width')) {\n        //         $(this).css('stroke-width', $(this).data('stroke-width') / _this.scale);\n        //     }\n        // });\n    }\n    /**\n     * Zooms-in the map\n     * @param {SVGPoint} center - if provided, zoom will shift the center point\n     */\n    zoomIn(center?: SVGPoint){\n\n        var _this = this;\n\n        if(_this.googleMaps.map){\n            if(!_this.isZooming){\n                var currentZoomInRange = _this.zoomLevel >= _this.options.zoom.limit[0] && _this.zoomLevel <= _this.options.zoom.limit[1];\n                var zoom = _this.googleMaps.map.getZoom();\n                // Limit zoom of Google map to level \"17\"\n                // If zoom more - browser can't position markers\n                // because css transform/translate is limited to 33mil px\n                // var google_zoom_new = (zoom+1) > 17 ? 17 : zoom+1;\n                var max = _this.googleMaps.zoomLimit ? 17 : 20;\n                var google_zoom_new = (zoom+1) > max ? max : zoom+1;\n                var svg_zoom_new = google_zoom_new - _this.zoomDelta;\n\n                var newZoomInInRange = svg_zoom_new >= _this.options.zoom.limit[0] && svg_zoom_new <= _this.options.zoom.limit[1];\n                if(currentZoomInRange && !newZoomInInRange){\n                    return false;\n                }\n                _this.isZooming = true;\n                _this.googleMaps.map.setZoom(google_zoom_new);\n\n                if(center){\n                    var centerGeo = _this.convertSVGToGeo(center);\n                    _this.googleMaps.map.setCenter(centerGeo);\n                }\n\n                _this.zoomLevel = svg_zoom_new;\n            }\n        }else if(_this.canZoom){\n            _this.canZoom = false;\n            setTimeout(function(){\n                _this.canZoom = true;\n            }, 700);\n            _this.zoom(1, center);\n        }\n    }\n    /**\n     * Zooms-out the map\n     * @param {SVGPoint} center - [x,y] center point (optional)\n     */\n    zoomOut(center?: SVGPoint){\n\n        var _this = this;\n\n        if(_this.googleMaps.map){\n            if(!_this.isZooming && _this.googleMaps.map.getZoom()-1 >= _this.options.googleMaps.minZoom) {\n\n                var currentZoomInRange = _this.zoomLevel >= _this.options.zoom.limit[0] && _this.zoomLevel <= _this.options.zoom.limit[1];\n\n                var zoom = _this.googleMaps.map.getZoom();\n                var google_zoom_new = (zoom - 1) < 1 ? 1 : (zoom-1);\n                var svg_zoom_new = google_zoom_new - _this.zoomDelta;\n\n                var newZoomInInRange = svg_zoom_new >= _this.options.zoom.limit[0] && svg_zoom_new <= _this.options.zoom.limit[1];\n\n                if(currentZoomInRange && !newZoomInInRange){\n                    return false;\n                }\n                _this.isZooming = true;\n                _this.googleMaps.map.setZoom(google_zoom_new);\n                _this.zoomLevel = svg_zoom_new;\n            }\n        }else if(_this.canZoom){\n            _this.canZoom = false;\n            setTimeout(function(){\n                _this.canZoom = true;\n            }, 700);\n            _this.zoom(-1, center);\n        }\n    }\n    /**\n     * Event handler, zoom on 2-fingers touch\n     * @event\n     * @param touchScale\n     * @private\n     */\n    touchZoomMove (){\n\n    }\n    /**\n     * Event handler, zoom on 2-fingers touch\n     * @event\n     * @param touchScale\n     * @private\n     */\n    touchZoomEnd (){\n\n    }\n    /**\n     * Zooms to Region, Marker or array of Markers.\n     * @param {String|Region|Marker|Marker[]|MarkersCluster[]} mapObjects - Region ID, Region, Marker, array of Markers, array of MarkerClusters\n     * @param {number} zoomToLevel - Zoom level\n     *\n     * @example\n     * var region = mapsvg.getRegion(\"US-TX\");\n     * mapsvg.zoomTo(region);\n     */\n    zoomTo  (mapObjects, zoomToLevel?: number){\n\n        var _this = this;\n\n        // If string if provided - its a region ID.\n        if(typeof mapObjects == 'string') {\n            mapObjects = _this.getRegion(mapObjects);\n        }\n\n        if(_this.googleMaps.map) {\n            if(mapObjects instanceof Marker){\n                var geoPoint = _this.convertSVGToGeo(mapObjects.svgPoint);\n                _this.googleMaps.map.setZoom(zoomToLevel || 1);\n                _this.googleMaps.map.setCenter({lat: geoPoint.lat, lng: geoPoint.lng});\n                this.zoomLevel = this.googleMaps.map.getZoom() - this.zoomDelta;\n            }else{\n                if(mapObjects && mapObjects.length !== undefined){\n                    var rbounds = mapObjects[0].getGeoBounds();\n                    var southWest = new google.maps.LatLng(rbounds.sw.lat, rbounds.sw.lng);\n                    var northEast = new google.maps.LatLng(rbounds.ne.lat, rbounds.ne.lng);\n                    var bounds = new google.maps.LatLngBounds(southWest,northEast);\n                    for(var i = 1; i < mapObjects.length-1; i++){\n                        var rbounds2 = mapObjects[i].getGeoBounds();\n                        var southWest2 = new google.maps.LatLng(rbounds2.sw.lat, rbounds2.sw.lng);\n                        var northEast2 = new google.maps.LatLng(rbounds2.ne.lat, rbounds2.ne.lng);\n                        bounds.extend(southWest2);\n                        bounds.extend(northEast2);\n                    }\n                } else {\n                    var objectBounds = mapObjects.getGeoBounds();\n                    var southWest = new google.maps.LatLng(objectBounds.sw.lat, objectBounds.sw.lng);\n                    var northEast = new google.maps.LatLng(objectBounds.ne.lat, objectBounds.ne.lng);\n                    var bounds = new google.maps.LatLngBounds(southWest,northEast);\n                }\n                _this.googleMaps.map.fitBounds(bounds, 0);\n                if(_this.googleMaps.zoomLimit && (_this.googleMaps.map.getZoom() > 17)){\n                    _this.googleMaps.map.setZoom(17);\n                }\n                this.zoomLevel = this.googleMaps.map.getZoom() - this.zoomDelta;\n            }\n            return;\n        }\n\n        let bbox: ViewBox,\n            viewBox: ViewBox,\n            viewBoxPrev: ViewBox;\n\n        if(mapObjects instanceof Marker || mapObjects instanceof MarkerCluster){\n            return _this.zoomToMarkerOrCluster(mapObjects, zoomToLevel);\n        }\n\n        if(typeof mapObjects == 'object' && mapObjects.length !== undefined){\n            // multiple objects\n            var _bbox;\n\n            if(mapObjects[0] instanceof Region){\n                bbox = mapObjects[0].getBBox();\n                var xmin = [bbox.x];\n                var ymin = [bbox.y];\n\n                var w = (bbox.x+bbox.width);\n                var xmax = [w];\n                var h = (bbox.y+bbox.height);\n                var ymax = [h];\n                if (mapObjects.length > 1){\n                    for (var i = 1; i < mapObjects.length; i++){\n                        _bbox = mapObjects[i].getBBox();\n                        xmin.push(_bbox.x);\n                        ymin.push(_bbox.y);\n                        var _w = _bbox.x+_bbox.width;\n                        var _h = _bbox.y+_bbox.height;\n                        xmax.push(_w);\n                        ymax.push(_h);\n                    }\n                }\n                var _xmin = Math.min.apply(Math, xmin);\n                var _ymin = Math.min.apply(Math, ymin);\n\n                // @ts-ignore\n                var w = Math.max.apply(Math, _xmax) - _xmin;\n                // @ts-ignore\n                var h = Math.max.apply(Math, _ymax) - _ymin;\n                bbox = new ViewBox(_xmin, _ymin, w, h);\n            } else if(mapObjects[0] instanceof Marker || mapObjects[0] instanceof MarkerCluster) {\n                var xs = []; var ys = [];\n\n                if(mapObjects.length === 1){\n                    return _this.zoomToMarkerOrCluster(mapObjects[0]);\n                }\n\n                mapObjects.forEach(function(object){\n                    xs.push(object.svgPoint.x);\n                    ys.push(object.svgPoint.y);\n                });\n\n                // calc the min and max lng and lat\n                var minx = Math.min.apply(null, xs),\n                    maxx = Math.max.apply(null, xs);\n                var miny = Math.min.apply(null, ys),\n                    maxy = Math.max.apply(null, ys);\n\n                var padding = 10;\n                var point1 = new ScreenPoint(padding,0);\n                var point2 = new ScreenPoint(0,0);\n                padding = _this.convertPixelToSVG(point1).x - _this.convertPixelToSVG(point2).x;\n\n                var width  = maxx - minx;\n                var height = maxy - miny;\n                bbox = new ViewBox(minx-padding, miny-padding, width+padding*2, height+padding*2);\n            }\n\n        }else{\n            // single object\n            bbox = mapObjects.getBBox();\n        }\n\n        var searching = true;\n\n        this.zoomLevels.forEach( (zoomLevel) => {\n            if(searching && (viewBoxPrev && viewBoxPrev.x !== undefined)){\n                if(\n                    (viewBoxPrev.width > bbox.width && viewBoxPrev.height > bbox.height)\n                    &&\n                    (bbox.width > zoomLevel.viewBox.width || bbox.height > zoomLevel.viewBox.height)\n                )\n                {\n                    _this.zoomLevel = zoomToLevel ? zoomToLevel :  zoomLevel.zoomLevel-1;\n                    var vb = _this.zoomLevels.get(_this.zoomLevel).viewBox;\n\n                    var newVb = new ViewBox(\n                        bbox.x-vb.width/2+bbox.width/2,\n                        bbox.y-vb.height/2+bbox.height/2,\n                        vb.width,\n                        vb.height\n                    )\n                    _this.setViewBox(newVb);\n                    _this._scale = _this.zoomLevels[_this.zoomLevel]._scale;\n                    searching = false;\n\n                }\n            }\n            viewBoxPrev = zoomLevel && zoomLevel.viewBox;\n        });\n    }\n    /**\n     * Zooms to a single marker or cluster\n     * @param mapObject\n     * @param zoomToLevel\n     * @private\n     */\n    zoomToMarkerOrCluster (mapObject, zoomToLevel?: number){\n\n        var _this = this;\n\n        _this.zoomLevel = zoomToLevel || 1;\n        var vb = _this.zoomLevels.get(_this.zoomLevel).viewBox;\n        var newViewBox = new ViewBox(\n            mapObject.x-vb.width/2,\n            mapObject.y-vb.height/2,\n            vb.width,\n            vb.height\n        );\n        _this.setViewBox(newViewBox);\n\n        _this._scale = _this.zoomLevels.get(_this.zoomLevel)._scale;\n        return;\n    }\n    /**\n     * Centers map on Region or Marker.\n     * @param {Region|Marker} region - Region or Marker\n     * @param {number} yShift - Vertical shift from center. Used by showPopover method to fit popover in the map container\n     */\n    centerOn (region: Region|Marker, yShift?: number){\n\n        var _this = this;\n\n        if(_this.options.googleMaps.on){\n            yShift = yShift ? (yShift+12)/_this.getScale() : 0;\n            $(_this.containers.map).addClass('scrolling');\n            var latLng = region.getCenterLatLng(yShift);\n            _this.googleMaps.map.panTo(latLng);\n            setTimeout(function(){\n                $(_this.containers.map).removeClass('scrolling');\n            },100);\n        }else{\n            yShift = yShift ? (yShift+12)/_this.getScale() : 0;\n            var bbox = region.getBBox();\n            var vb   = _this.viewBox;\n            var newViewBox = new ViewBox(\n                    bbox.x-vb.width/2+bbox.width/2,\n                    bbox.y-vb.height/2+bbox.height/2 - yShift,\n                    vb.width,\n                    vb.height\n                );\n            _this.setViewBox(newViewBox);\n        }\n\n    }\n    /**\n     * Zooms the map\n     * @param {number} delta - 1/-1\n     * @param {SVGPoint} center - [x,y] zoom center point\n     * @param {number} exact - (optional) Exact scale value\n     * @returns {boolean}\n     */\n    zoom  (delta: number, center?: SVGPoint, exact?: number){\n\n        var _this = this;\n\n        var vWidth     = _this.viewBox.width;\n        var vHeight    = _this.viewBox.height;\n        var newViewBox = new ViewBox(0,0,0,0);\n\n        var isInZoomRange = _this.zoomLevel >= _this.options.zoom.limit[0] && _this.zoomLevel <= _this.options.zoom.limit[1];\n\n        if(!exact){\n            // check for zoom limit\n            var d = delta > 0 ? 1 : -1;\n\n            if(!_this.zoomLevels.get(_this.zoomLevel+d))\n                return;\n\n            _this._zoomLevel = _this.zoomLevel;\n            _this._zoomLevel += d;\n\n            if(isInZoomRange && (_this._zoomLevel > _this.options.zoom.limit[1] || _this._zoomLevel < _this.options.zoom.limit[0]))\n                return false;\n\n            _this.zoomLevel = _this._zoomLevel;\n            //\n            //var zoom_k = d * _this.options.zoom.delta;\n            //if (zoom_k < 1) zoom_k = -1/zoom_k;\n            //\n            //_this._scale         = _this._scale * zoom_k;\n            //newViewBox.width  = _this._viewBox.width / _this._scale;\n            //newViewBox.height  = _this._viewBox.height / _this._scale;\n\n            var z = _this.zoomLevels.get(_this.zoomLevel);\n            _this._scale         = z._scale;\n            newViewBox           = z.viewBox;\n        }else{\n            // var foundZoomLevel = false, i = 1, prevScale, newScale;\n            // prevScale = _this.zoomLevels[0]._scale;\n            // while(!foundZoomLevel){\n            //     if(exact >= prevScale && exact <= _this.zoomLevels[i]._scale){\n            //         foundZoomLevel = _this.zoomLevels[i];\n            //     }\n            //     i++;\n            // }\n            // if(isInZoomRange && (foundZoomLevel > _this.options.zoom.limit[1] || foundZoomLevel < _this.options.zoom.limit[0]))\n            //     return false;\n\n            // _this._scale    = exact;\n            // _this.zoomLevel = foundZoomLevel;\n\n\n            newViewBox.width  = _this._viewBox.width / exact;\n            newViewBox.height  = _this._viewBox.height / exact;\n        }\n\n        var shift = [];\n        if(center){\n            var koef = d > 0 ? 0.5 : -1; // 1/2 * (d=1) || 2 * (d=-1)\n            shift = [((center.x - _this.viewBox.x) * koef), ((center.y - _this.viewBox.y) * koef)];\n            newViewBox.x = _this.viewBox.x + shift[0];\n            newViewBox.y = _this.viewBox.y + shift[1];\n        }else{\n            shift = [(vWidth - newViewBox.width) / 2, (vHeight - newViewBox.height) / 2];\n            newViewBox.x  = _this.viewBox.x + shift[0];\n            newViewBox.y  = _this.viewBox.y + shift[1];\n        }\n        // Limit scroll to map's boundaries\n        if(_this.options.scroll.limit)\n        {\n            if(newViewBox.x < _this.svgDefault.viewBox.x)\n                newViewBox.x = _this.svgDefault.viewBox.x;\n            else if(newViewBox.x + newViewBox.width > _this.svgDefault.viewBox.x + _this.svgDefault.viewBox.width)\n                newViewBox.x = _this.svgDefault.viewBox.x+_this.svgDefault.viewBox.width-newViewBox.width;\n\n            if(newViewBox.y < _this.svgDefault.viewBox.y)\n                newViewBox.y = _this.svgDefault.viewBox.y;\n            else if(newViewBox.y + newViewBox.height > _this.svgDefault.viewBox.y +_this.svgDefault.viewBox.height)\n                newViewBox.y = _this.svgDefault.viewBox.y+_this.svgDefault.viewBox.height-newViewBox.height;\n        }\n\n        _this.setViewBox(newViewBox);\n        // _this.events.trigger('zoom');\n    }\n    /**\n     * Deletes a marker\n     * @param {Marker} marker\n     */\n    markerDelete(marker: Marker){\n\n        var _this = this;\n\n        if(_this.editingMarker && _this.editingMarker.id == marker.id){\n            _this.editingMarker = null;\n            delete _this.editingMarker;\n        }\n\n        if(this.markers.findById(marker.id)) {\n            this.markers.findById(marker.id).element.remove();\n            this.markers.delete(marker.id);\n            marker = null;\n        }\n        if (_this.markers.length === 0)\n            _this.options.markerLastID = 0;\n    }\n    /**\n     * Adds a marker cluster\n     * @param {MarkerCluster} markersCluster\n     */\n    markersClusterAdd (markersCluster: MarkerCluster) {\n        var _this = this;\n        _this.layers.markers.append(markersCluster.elem);\n        _this.markersClusters.push(markersCluster);\n        markersCluster.adjustPosition();\n    }\n    /** Adds a marker to the map.\n     * @param {Marker} marker\n     * @example\n     */\n    markerAdd (marker) {\n\n        var _this = this;\n\n        $(marker.element).hide();\n        marker.adjustPosition();\n        _this.layers.markers.append(marker.element);\n        _this.markers.push(marker);\n        marker.mapped = true;\n        setTimeout(function(){\n            $(marker.element).show();\n        },100);\n    }\n    /**\n     * Removes marker from the map\n     * @param marker\n     */\n    markerRemove (marker: Marker) {\n\n        var _this = this;\n\n        if(_this.editingMarker && _this.editingMarker.id == marker.id){\n            _this.editingMarker = null;\n            delete _this.editingMarker;\n        }\n\n        if(this.markers.findById(marker.id)) {\n            this.markers.findById(marker.id).element.remove();\n            this.markers.delete(marker.id);\n            marker = null;\n        }\n        if (_this.markers.length === 0)\n            _this.options.markerLastID = 0;    }\n    /**\n     * Generates new Marker ID\n     * @returns {*}\n     * @private\n     */\n    markerId(){\n\n        var _this = this;\n\n        _this.options.markerLastID = _this.options.markerLastID + 1;\n        var id = 'marker_'+(_this.options.markerLastID);\n        if(_this.getMarker(id))\n            return _this.markerId();\n        else\n            return id;\n    }\n\n    /**\n     * Adjusts position of Region Labels\n     */\n    labelsRegionsAdjustPosition (){\n\n        var _this = this;\n\n        var dx, dy;\n        if(!$(_this.containers.map).is(\":visible\")){\n            return;\n        }\n        _this.regions.forEach(function(region){\n            if(!region.center){\n                region.center = region.getCenterSVG();\n            }\n            var pos = _this.convertSVGToPixel(region.center);\n            if(region.textLabel)\n                region.textLabel.style.transform = 'translate(-50%,-50%) translate(' + pos.x + 'px,' + pos.y + 'px)';\n        });\n    }\n    /**\n     * Adjusts position of Markers and MarkerClusters.\n     * This method is called on zoom or when map container is resized.\n     */\n    markersAdjustPosition (){\n\n        var _this = this;\n\n        _this.markers.forEach(function(marker){\n            marker.adjustPosition();\n        });\n        _this.markersClusters.forEach(function(cluster){\n            cluster.adjustPosition();\n        });\n        if(_this.userLocationMarker){\n            _this.userLocationMarker.adjustPosition();\n        }\n    }\n    /**\n     * Drag marker event handler. Used in Map Editor.\n     * @event\n     * @private\n     */\n    markerMoveStart(){\n\n        // var _this = this;\n\n        // storing original coordinates\n        // this.data('ox', parseFloat(this.attr('x')));\n        // this.data('oy', parseFloat(this.attr('y')));\n    }\n    /**\n     * Drag marker event handler. Used in Map Editor.\n     * @event\n     * @private\n     */\n    markerMove  (dx, dy) {\n        // var _this = this;\n        // dx = dx / _this.scale;\n        // dy = dy / _this.scale;\n        // this.attr({x: this.data('ox') + dx, y: this.data('oy') + dy});\n    }\n    /**\n     * Drag marker event handler. Used in Map Editor.\n     * @event\n     * @private\n     */\n    markerMoveEnd  () {\n\n        // var _this = this;\n        //\n        // // if coordinates are same then it was a \"click\" and we should start editing\n        // if(this.data('ox') == this.attr('x') && this.data('oy') == this.attr('y')){\n        //     options.markerEditHandler.call(this);\n        // }\n    }\n    /**\n     * Sets marker into \"edit mode\".\n     * Used in Map Editor.\n     * @param {Marker} marker\n     * @private\n     */\n    setEditingMarker  (marker: Marker) {\n\n        var _this = this;\n\n        _this.editingMarker = marker;\n        if(!_this.editingMarker.mapped){\n            _this.editingMarker.needToRemove = true;\n            // _this.editingMarker.node.addClass(\"mapsvg-editing-marker\");\n            _this.markerAdd(_this.editingMarker);\n        }\n    }\n    /**\n     * Disables marker \"edit mode\".\n     * Used in Map Editor.\n     * @private\n     */\n    unsetEditingMarker (){\n        var _this = this;\n        if(_this.editingMarker && _this.editingMarker.needToRemove){\n            _this.markerRemove(_this.editingMarker);\n        }\n        _this.editingMarker = null;\n    }\n    /**\n     * Returns marker that is currently in the \"edit mode\"\n     * Used in Map Editor.\n     * @private\n     */\n    getEditingMarker (){\n        var _this = this;\n        return _this.editingMarker;\n    }\n    /**\n     * Event handler - called when map scroll starts\n     * @param e\n     * @param mapsvg\n     * @returns {boolean}\n     * @event\n     * @private\n     */\n    scrollStart(e,mapsvg){\n\n        var _this = this;\n\n        if($(e.target).hasClass('mapsvg-btn-map') || $(e.target).closest('.mapsvg-choropleth').length)\n            return false;\n\n        if(_this.editMarkers.on && $(e.target).hasClass('mapsvg-marker'))\n            return false;\n\n        e.preventDefault();\n\n        $(this.containers.map).addClass('no-transitions');\n\n        var ce = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] ? e.originalEvent.touches[0] : e;\n\n        _this.scrollStarted = true;\n\n        this.scroll = {\n            tx: _this.scroll.tx || 0,\n            ty: _this.scroll.ty || 0,\n            // initial viewbox when scrollning started\n            vxi: _this.viewBox.x,\n            vyi: _this.viewBox.y,\n            // mouse coordinates when scrolling started\n            x: ce.clientX,\n            y: ce.clientY,\n            // mouse delta\n            dx: 0,\n            dy: 0,\n            // new viewbox x/y\n            vx: 0,\n            vy: 0,\n            // for google maps scroll\n            gx: ce.clientX,\n            gy: ce.clientY,\n            touchScrollStart: 0\n        };\n\n\n        if(e.type.indexOf('mouse') === 0 ){\n            $(document).on('mousemove.scroll.mapsvg', function(e){\n                _this.scrollMove(e);\n            });\n            if(_this.options.scroll.spacebar){\n                $(document).on('keyup.scroll.mapsvg', function (e) {\n                    if (e.keyCode == 32) {\n                        _this.scrollEnd(e, mapsvg);\n                    }\n                });\n            }else{\n                $(document).on('mouseup.scroll.mapsvg', function(e){\n                    _this.scrollEnd(e,mapsvg);\n                });\n            }\n        }\n    }\n    /**\n     * Event handler - called when map scroll moves\n     * @param e\n     * @event\n     * @private\n     */\n    scrollMove(e){\n\n        var _this = this;\n\n        e.preventDefault();\n\n        if(!_this.isScrolling){\n            _this.isScrolling = true;\n            // $(_this.containers.map).css('pointer-events','none');\n            $(_this.containers.map).addClass('scrolling');\n        }\n\n        var ce = e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] ? e.originalEvent.touches[0] : e;\n\n        // TODO: на каждый зум лев считать допустимые translate xy при данном scale\n        var scrolled = _this.panBy((_this.scroll.gx - ce.clientX),(_this.scroll.gy - ce.clientY));\n        if(_this.googleMaps.map && (scrolled.x || scrolled.y)){\n\n            var point = _this.googleMaps.map.getCenter();\n\n            var projection = _this.googleMaps.overlay.getProjection();\n\n            var pixelpoint = projection.fromLatLngToDivPixel(point);\n            pixelpoint.x += scrolled.x ? _this.scroll.gx - ce.clientX : 0;\n            pixelpoint.y += scrolled.y ? _this.scroll.gy - ce.clientY : 0;\n\n            point = projection.fromDivPixelToLatLng(pixelpoint);\n\n            _this.googleMaps.map.setCenter(point);\n        }\n\n        _this.scroll.gx  = ce.clientX;\n        _this.scroll.gy  = ce.clientY;\n\n        // delta x/y\n        _this.scroll.dx = (_this.scroll.x - ce.clientX);\n        _this.scroll.dy = (_this.scroll.y - ce.clientY);\n\n        // new viewBox x/y\n        var vx = _this.scroll.vxi + _this.scroll.dx /_this.scale;\n        var vy = _this.scroll.vyi + _this.scroll.dy /_this.scale;\n\n        // Limit scroll to map boundaries\n        if(_this.options.scroll.limit){\n\n            if(vx < _this.svgDefault.viewBox.x)\n                vx = _this.svgDefault.viewBox.x;\n            else if(_this.viewBox.width + vx > _this.svgDefault.viewBox.x + _this.svgDefault.viewBox.width)\n                vx = (_this.svgDefault.viewBox.x+_this.svgDefault.viewBox.width-_this.viewBox.width);\n\n            if(vy < _this.svgDefault.viewBox.y)\n                vy = _this.svgDefault.viewBox.y;\n            else if(_this.viewBox.height + vy > _this.svgDefault.viewBox.y + _this.svgDefault.viewBox.height)\n                vy = (_this.svgDefault.viewBox.y+_this.svgDefault.viewBox.height-_this.viewBox.height);\n\n        }\n\n\n        _this.scroll.vx = vx;\n        _this.scroll.vy = vy;\n\n\n        // set new viewBox\n        // _this.setViewBox([_this.scroll.vx,  _this.scroll.vy, _this.viewBox.width, _this.viewBox.height]);\n\n    }\n    /**\n     * Event handler - called when map scroll ends\n     * @param {jQuery.Event} e\n     * @param {MapSVGMap} mapsvg\n     * @param {boolean} noClick\n     * @returns {boolean}\n     * @event\n     * @private\n     */\n    scrollEnd(e: JQuery.Event, mapsvg: MapSVGMap, noClick?: boolean) {\n\n        var _this = this;\n\n        // _this.scroll.tx = (_this.scroll.tx - _this.scroll.dx);\n        // _this.scroll.ty = (_this.scroll.ty - _this.scroll.dy);\n\n\n        setTimeout(function(){\n            $(_this.containers.map).removeClass('no-transitions');\n            _this.scrollStarted = false;\n            _this.isScrolling = false;\n        }, 100);\n        _this.googleMaps && _this.googleMaps.overlay && _this.googleMaps.overlay.draw();\n        $(_this.containers.map).removeClass('scrolling');\n        $(document).off('keyup.scroll.mapsvg');\n        $(document).off('mousemove.scroll.mapsvg');\n        $(document).off('mouseup.scroll.mapsvg');\n\n        // call regionClickHandler if mouse did not move more than 5 pixels\n        if (noClick !== true && Math.abs(_this.scroll.dx)<5 && Math.abs(_this.scroll.dy)<5){\n            // _this.controllers.popoverOffHandler(e);\n            if(_this.editMarkers.on)\n                _this.clickAddsMarker && _this.markerAddClickHandler(e);\n            else if (_this.region_clicked)\n                _this.regionClickHandler(e, _this.region_clicked);\n        }\n\n\n        _this.viewBox.x = _this.scroll.vx || _this.viewBox.x;\n        _this.viewBox.y = _this.scroll.vy || _this.viewBox.y ;\n\n\n        // $(_this.containers.map).css('pointer-events','auto');\n        // $('body').css({'cursor': 'default'});\n\n        // if(_this.googleMaps.map) {\n        // fix shift\n        // _this.setViewBoxByGoogleMapBounds();\n        // }\n    }\n    /**\n     * Shift the map by x,y pixels\n     * @param {number} x\n     * @param {number} y\n     */\n    panBy(x, y){\n\n        var _this = this;\n\n        var tx = _this.scroll.tx - x;\n        var ty = _this.scroll.ty - y;\n\n        var scrolled = {x:true, y:true};\n\n        //!_this.options.googleMaps.on &&\n        if(_this.options.scroll.limit){\n            var svg = $(_this.containers.svg)[0].getBoundingClientRect();\n            var bounds = $(_this.containers.map)[0].getBoundingClientRect();\n            if((svg.left-x > bounds.left && x < 0) || (svg.right-x < bounds.right && x > 0)){\n                tx = _this.scroll.tx;\n                scrolled.x = false;\n            }\n            if((svg.top-y > bounds.top && y < 0) || (svg.bottom-y < bounds.bottom && y > 0)){\n                ty = _this.scroll.ty;\n                scrolled.y = false;\n            }\n        }\n\n        $(_this.containers.scrollpane).css({\n            'transform': 'translate('+tx+'px,'+ty+'px)'\n        });\n\n        _this.scroll.tx = tx;\n        _this.scroll.ty = ty;\n        return scrolled;\n    }\n    /**\n     * Save the Region ID that was clicked before starting map scroll.\n     * It is used to trigger .regionClickHandler() later if scroll was less than 5px\n     * @param {jQuery.Event} e - Event object\n     * @param {Region} region - Clicked Region\n     * @private\n     */\n    scrollRegionClickHandler(e: JQuery.Event, region: Region) {\n        this.region_clicked = region;\n    }\n    /**\n     * Event hanlder\n     * @param _e\n     * @param mapsvg\n     * @private\n     * @event\n     */\n    touchStart(_e,mapsvg){\n\n        var _this = this;\n\n        // if($(_e.target).hasClass('mapsvg-popover') || $(_e.target).closest('.mapsvg-popover').length ){\n        //     return true;\n        // }\n        _e.preventDefault();\n        // _e.stopPropagation();\n\n        // stop scroll and cancel click event\n        if(_this.scrollStarted){\n            _this.scrollEnd(_e, mapsvg, true);\n        }\n        var e = _e.originalEvent;\n\n        if(_this.options.zoom.fingers && e.touches && e.touches.length == 2){\n            // _this.touchZoomStartViewBox = _this.viewBox;\n            // _this.touchZoomStartScale =  _this.scale;\n            _this.touchZoomStart   =  true;\n            _this.scaleDistStart = Math.hypot(\n                e.touches[0].pageX - e.touches[1].pageX,\n                e.touches[0].pageY - e.touches[1].pageY);\n        }else if(e.touches && e.touches.length == 1){\n            _this.scrollStart(_e,mapsvg);\n        }\n\n        $(document).on('touchmove.scroll.mapsvg', function(e){\n            e.preventDefault(); _this.touchMove(e,_this);\n        }).on('touchend.scroll.mapsvg', function(e){\n            e.preventDefault(); _this.touchEnd(e,_this);\n        });\n    };\n    /**\n     * Event hanlder\n     * @param {JQuery.Event} _e\n     * @param mapsvg\n     * @private\n     * @event\n     */\n    touchMove(_e: JQuery.Event, mapsvg: MapSVGMap){\n\n        var _this = this;\n        // if($(_e.target).hasClass('mapsvg-popover') || $(_e.target).closest('.mapsvg-popover').length ){\n        //     return true;\n        // }\n        _e.preventDefault();\n        // @ts-ignore\n        var e = _e.originalEvent;\n\n        if(_this.options.zoom.fingers && e.touches && e.touches.length == 2){\n            if(!MapSVG.ios){\n                e.scale = Math.hypot(\n                    e.touches[0].pageX - e.touches[1].pageX,\n                    e.touches[0].pageY - e.touches[1].pageY)/_this.scaleDistStart;\n            }\n\n            if(e.scale!=1 && _this.canZoom) {\n                var d = e.scale > 1 ? 1 : -1;\n\n                var cx = e.touches[0].pageX >= e.touches[1].pageX ? e.touches[0].pageX - (e.touches[0].pageX - e.touches[1].pageX)/2 - $(_this.containers.svg).offset().left : e.touches[1].pageX - (e.touches[1].pageX - e.touches[0].pageX)/2 - $(_this.containers.svg).offset().left;\n                var cy = e.touches[0].pageY >= e.touches[1].pageY ? e.touches[0].pageY - (e.touches[0].pageY - e.touches[1].pageY) - $(_this.containers.svg).offset().top : e.touches[1].pageY - (e.touches[1].pageY - e.touches[0].pageY) - $(_this.containers.svg).offset().top;\n\n                var center = _this.convertPixelToSVG(new ScreenPoint(cx,cy));\n\n                if (d > 0)\n                    _this.zoomIn(center);\n                else\n                    _this.zoomOut(center);\n            }\n        }else if(e.touches && e.touches.length == 1){\n            _this.scrollMove(_e);\n        }\n    };\n    /**\n     * Event hanlder\n     * @param _e\n     * @param mapsvg\n     * @private\n     * @event\n     */\n    touchEnd(_e, mapsvg){\n\n        var _this = this;\n\n        // if($(_e.target).hasClass('mapsvg-popover') || $(_e.target).closest('.mapsvg-popover').length ){\n        //     return true;\n        // }\n        _e.preventDefault();\n        var e = _e.originalEvent;\n        if(_this.touchZoomStart){\n            _this.touchZoomStart  = false;\n        }else if(_this.scrollStarted){\n            _this.scrollEnd(_e, mapsvg);\n        }\n\n        $(document).off('touchmove.scroll.mapsvg');\n        $(document).off('touchend.scroll.mapsvg');\n    };\n    /**\n     * Returns array of IDs of selected Regions\n     * @returns {String[]}\n     */\n    getSelected(){\n        return this.selected_id;\n    };\n    /**\n     * Selects a Region\n     * @param {Region|string} id - Region or ID\n     * @param {bool} skipDirectorySelection\n     * @returns {boolean}\n     */\n    selectRegion(id: string|Region, skipDirectorySelection?: boolean){\n\n        var _this = this;\n        let region: Region;\n\n        // _this.hidePopover();\n        if(typeof id == \"string\"){\n            region = _this.getRegion(id);\n        }else{\n            region = id;\n        }\n        if(!region) return false;\n\n        var ids: Array<string>;\n\n        if(_this.options.multiSelect && !_this.editRegions.on){\n            if(region.selected){\n                _this.deselectRegion(region);\n                if(!skipDirectorySelection && _this.options.menu.on){\n                    if(_this.options.menu.source == 'database') {\n                        if (region.objects && region.objects.length) {\n                            var ids = region.objects.map(function (obj: CustomObject) {\n                                return obj.id.toString();\n                            });\n                        }\n                    }else{\n                        var ids = [region.id];\n                    }\n                    _this.controllers.directory.deselectItems();\n                }\n\n                return;\n            }\n        }else if(_this.selected_id.length>0){\n            _this.deselectAllRegions();\n            if(!skipDirectorySelection && _this.options.menu.on){\n                if(_this.options.menu.source == 'database') {\n                    if (region.objects && region.objects.length) {\n                        var ids = region.objects.map(function (obj: CustomObject) {\n                            return obj.id.toString();\n                        });\n                    }\n                }else{\n                    var ids = [region.id];\n                }\n                _this.controllers.directory.deselectItems();\n            }\n        }\n\n        _this.selected_id.push(region.id);\n        region.select();\n\n        var skip = _this.options.actions.region.click.filterDirectory;\n\n        if(!skip && !skipDirectorySelection && _this.options.menu.on && _this.controllers && _this.controllers.directory){\n            if(_this.options.menu.source == 'database'){\n                if(region.objects && region.objects.length) {\n                    var ids = region.objects.map(function(obj: CustomObject){\n                        return obj.id.toString();\n                    });\n                } else {\n                    var ids = [region.id];\n                }\n            }else{\n                var ids = [region.id];\n            }\n            _this.controllers.directory.selectItems(ids);\n        }\n\n        if(_this.options.actions.region.click.addIdToUrl && !_this.options.actions.region.click.showAnotherMap){\n            window.location.hash = \"/m/\"+region.id;\n            // history.replaceState(null, null, region.id);\n            // history.replaceState(\"\", document.title, window.location.pathname\n            //     + window.location.search + '#m_'+region.id);\n\n        }\n    }\n    /**\n     * Deselects all Regions\n     */\n    deselectAllRegions (){\n\n        var _this = this;\n\n        $.each(_this.selected_id, function(index,id){\n            _this.deselectRegion(_this.getRegion(id));\n        });\n    }\n    /**\n     * Deselects one Region\n     * @param {Region} region\n     */\n    deselectRegion(region){\n\n        var _this = this;\n\n        if(!region)\n            region = _this.getRegion(_this.selected_id[0]);\n        if(region){\n            region.deselect();\n            var i = $.inArray(region.id, _this.selected_id);\n            _this.selected_id.splice(i,1);\n            // if(MapSVG.browser.ie)//|| MapSVG.browser.firefox)\n            //     _this.mapAdjustStrokes();\n        }\n        if(_this.options.actions.region.click.addIdToUrl){\n            // window.location.hash = ' '; //window.location.hash.replace(region.id,'');\n            // history.replaceState(\"\", document.title, window.location.pathname\n            //     + window.location.search);\n            if(window.location.hash.indexOf(region.id) !== -1){\n                history.replaceState(null, null, ' ');\n            }\n        }\n    }\n    /**\n     * Highlights an array of Regions (used on mouseover)\n     * @param {Region[]} regions\n     */\n    highlightRegions(regions){\n\n        var _this = this;\n\n        regions.forEach(function(region){\n            if(region && !region.selected && !region.disabled){\n                _this.highlightedRegions.push(region);\n                region.highlight();\n            }\n        })\n    }\n    /**\n     * Unhighlights all Regions  (used on mouseout)\n     */\n    unhighlightRegions(){\n\n        var _this = this;\n\n        _this.highlightedRegions.forEach(function(region: Region){\n            if(region && !region.selected && !region.disabled)\n                region.unhighlight();\n        });\n        _this.highlightedRegions = [];\n    }\n    /**\n     * Selects a Marker\n     * @param {Marker} marker\n     */\n    selectMarker(marker: Marker){\n\n        var _this = this;\n\n        if(!(marker instanceof Marker))\n            return false;\n\n        _this.deselectAllMarkers();\n        marker.select();\n        _this.selected_marker = marker;\n\n        $(_this.layers.markers).addClass('mapsvg-with-marker-active');\n\n        if(_this.options.menu.on && _this.options.menu.source == 'database'){\n            _this.controllers.directory.deselectItems();\n            _this.controllers.directory.selectItems(marker.object.id);\n        }\n    }\n\n    /**\n     * Deselects all Markers\n     */\n    deselectAllMarkers(){\n\n        var _this = this;\n        _this.selected_marker && _this.selected_marker.deselect();\n        $(_this.layers.markers).removeClass('mapsvg-with-marker-active');\n    }\n\n    /**\n     * Deselects one Marker\n     * @param {Marker} marker\n     */\n    deselectMarker(marker){\n\n        var _this = this;\n\n        if(marker){\n            marker.deselect();\n        }\n    }\n    /**\n     * Highlight marker\n     * @param {Marker} marker\n     */\n    highlightMarker(marker){\n\n        var _this = this;\n\n        $(_this.layers.markers).addClass('mapsvg-with-marker-hover');\n        marker.highlight();\n        _this.highlighted_marker = marker;\n    }\n    /**\n     * Unhighlights all Regions  (used on mouseout)\n     */\n    unhighlightMarker(){\n\n        var _this = this;\n\n        $(_this.layers.markers).removeClass('mapsvg-with-marker-hover');\n        _this.highlighted_marker && _this.highlighted_marker.unhighlight();\n    }\n    /**\n     * Converts mouse pointer coordinates to SVG coordinates\n     * @param {object} e - Event object\n     * @returns {Array} - [x,y] SVG coordinates\n     */\n    convertMouseToSVG(e): SVGPoint {\n\n        var _this = this;\n\n        var mc = MapSVG.mouseCoords(e);\n        var x = mc.x - $(_this.containers.svg).offset().left;\n        var y = mc.y - $(_this.containers.svg).offset().top;\n        var screenPoint = new ScreenPoint(x,y);\n        return _this.convertPixelToSVG(screenPoint);\n    }\n    /**\n     * Converts SVG coordinates to pixel coodinates relative to map container\n     * @param {SVGPoint} svgPoint\n     * @returns {ScreenPoint}\n     */\n    convertSVGToPixel(svgPoint: SVGPoint): ScreenPoint {\n\n        var _this = this;\n        var scale = _this.getScale();\n\n        var shiftX = 0, shiftY = 0;\n\n        if(_this.options.googleMaps.on){\n            if((_this.viewBox.x-_this.svgDefault.viewBox.x) > _this.svgDefault.viewBox.width){\n                var worldMapWidth = ((_this.svgDefault.viewBox.width / _this.mapLonDelta) * 360);\n                shiftX = worldMapWidth * Math.floor((_this.viewBox.x-_this.svgDefault.viewBox.x) / _this.svgDefault.viewBox.width);\n            }\n        }\n\n        let screenPoint = new ScreenPoint((svgPoint.x-_this.svgDefault.viewBox.x+shiftX)*scale, (svgPoint.y-_this.svgDefault.viewBox.y+shiftY)*scale);\n\n        return screenPoint;\n    }\n    /**\n     * Converts pixel coordinates (relative to map container) to SVG coordinates\n     * @param {Array} xy - [x,y] Pixel coordinates\n     * @returns {number[]} - [x,y] SVG coordinates\n     */\n    convertPixelToSVG(screenPoint: ScreenPoint): SVGPoint {\n        var _this = this;\n        var scale = _this.getScale();\n        return new SVGPoint(screenPoint.x/scale+_this.svgDefault.viewBox.x, screenPoint.y/scale+_this.svgDefault.viewBox.y);\n    }\n    /**\n     * Converts geo-coordinates (latitude/lognitude) to SVG coordinates\n     * @param {GeoPoint} coords - [lat,lon] Geo-coodinates\n     * @returns {SVGPoint}\n     */\n    convertGeoToSVG(coords: GeoPoint): SVGPoint {\n        var _this = this;\n        var x = (coords.lng - _this.geoViewBox.sw.lng) * (_this.svgDefault.viewBox.width / _this.mapLonDelta);\n        var lat = coords.lat * 3.14159 / 180;\n        var worldMapWidth = ((_this.svgDefault.viewBox.width / _this.mapLonDelta) * 360) / (2 * 3.14159);\n        var mapOffsetY    = (worldMapWidth / 2 * Math.log((1 + Math.sin(_this.mapLatBottomDegree)) / (1 - Math.sin(_this.mapLatBottomDegree))));\n        var y = _this.svgDefault.viewBox.height - ((worldMapWidth / 2 * Math.log((1 + Math.sin(lat)) / (1 - Math.sin(lat)))) - mapOffsetY);\n\n        x += _this.svgDefault.viewBox.x;\n        y += _this.svgDefault.viewBox.y;\n\n        return (new SVGPoint(x, y));\n    }\n    /**\n     * Converts SVG coordinates to geo-coordinates (latitude/lognitude).\n     * @param {SVGPoint} point\n     * @param {number} ty - SVG y coordinate\n     * @returns {number[]} - [lat,lon] Geo-coordinates\n     */\n    convertSVGToGeo(point: SVGPoint): GeoPoint{\n\n        var _this = this;\n\n        let tx = point.x - _this.svgDefault.viewBox.x;\n        let ty = point.y - _this.svgDefault.viewBox.y;\n        /* called worldMapWidth in Raphael's Code, but I think that's the radius since it's the map width or circumference divided by 2*PI  */\n        var worldMapRadius = _this.svgDefault.viewBox.width / _this.mapLonDelta * 360/(2 * Math.PI);\n        var mapOffsetY = ( worldMapRadius / 2 * Math.log( (1 + Math.sin(_this.mapLatBottomDegree) ) / (1 - Math.sin(_this.mapLatBottomDegree))  ));\n        var equatorY = _this.svgDefault.viewBox.height + mapOffsetY;\n        var a = (equatorY-ty)/worldMapRadius;\n        var lat = 180/Math.PI * (2 * Math.atan(Math.exp(a)) - Math.PI/2);\n        var lng = _this.geoViewBox.sw.lng + tx/_this.svgDefault.viewBox.width * _this.mapLonDelta;\n        lat = parseFloat(lat.toFixed(6));\n        lng = parseFloat(lng.toFixed(6));\n        return (new GeoPoint(lat, lng));\n    }\n    /**\n     * Converts map geo-boundaries to viewBox\n     * @param sw\n     * @param ne\n     * @returns {*[]}\n     *\n     * @private\n     * @deprecated\n     */\n    /*\n    convertGeoBoundsToViewBox (geoViewBox: GeoViewBox): ViewBox {\n        //sw, ne\n        var _this = this;\n\n        var lat = parseFloat(coords[0]);\n        var lon = parseFloat(coords[1]);\n        var x = (lon - _this.geoViewBox.leftLon) * (_this.svgDefault.viewBox.width / _this.mapLonDelta);\n\n        var lat = lat * 3.14159 / 180;\n        // var worldMapWidth = ((_this.svgDefault.width / _this.mapLonDelta) * 360) / (2 * 3.14159);\n        var worldMapWidth = ((_this.svgDefault.viewBox.width / _this.mapLonDelta) * 360) / (2 * 3.14159);\n        var mapOffsetY = (worldMapWidth / 2 * Math.log((1 + Math.sin(_this.mapLatBottomDegree)) / (1 - Math.sin(_this.mapLatBottomDegree))));\n        var y = _this.svgDefault.viewBox.height - ((worldMapWidth / 2 * Math.log((1 + Math.sin(lat)) / (1 - Math.sin(lat)))) - mapOffsetY);\n\n        x += _this.svgDefault.viewBox.x;\n        y += _this.svgDefault.viewBox.y;\n\n        return [x, y];\n    }\n    */\n\n    /**\n     * For choropleth map: returns color for given number value\n     * @param {number} choroplethValue - Number value\n     * @returns {{r: number, g: number, b: number, a: number}} - Color values, 0-255.\n     */\n    pickChoroplethColor(choroplethValue: number): {r: number, g: number, b: number, a: number} {\n\n        var _this = this;\n\n        var w = (choroplethValue - _this.options.choropleth.segments[0].min) / _this.options.choropleth.segments[0].maxAdjusted;\n        var rgba = {\n            r: Math.round(_this.options.choropleth.segments[0].colors.diffRGB.r * w + _this.options.choropleth.segments[0].colors.lowRGB.r),\n            g: Math.round(_this.options.choropleth.segments[0].colors.diffRGB.g * w + _this.options.choropleth.segments[0].colors.lowRGB.g),\n            b: Math.round(_this.options.choropleth.segments[0].colors.diffRGB.b * w + _this.options.choropleth.segments[0].colors.lowRGB.b),\n            a: Math.round(_this.options.choropleth.segments[0].colors.diffRGB.a * w + _this.options.choropleth.segments[0].colors.lowRGB.a)\n        };\n        return rgba;\n    }\n    /**\n     * Checks if Region should be disabled\n     * @param {string} id - Region ID\n     * @param {string} svgfill - Region color (\"fill\" attribute)\n     * @returns {boolean} - \"true\" if Region should be disabled.\n     */\n    isRegionDisabled  (id: string, svgfill: string): boolean {\n\n        var _this = this;\n\n        if(_this.options.regions[id] && (_this.options.regions[id].disabled || svgfill == 'none') ){\n            return true;\n        }else if(\n            (_this.options.regions[id] == undefined || MapSVG.parseBoolean(_this.options.regions[id].disabled)) &&\n            (_this.options.disableAll || svgfill == 'none' || id == 'labels' || id == 'Labels')\n\n        ){\n            return true;\n        }else{\n            return false;\n        }\n    }\n\n    /**\n     * Gets map settings from the server\n     */\n    loadMap (id: number, container: HTMLElement): void {\n        let mapsRepo = new MapsRepository();\n        mapsRepo.findById(id).done((map) => {\n            if($(container).find('svg').length){\n                // @ts-ignore\n                container.mapSvg().destroy();\n            }\n            // @ts-ignore\n            container.mapSvg(map.options);\n        });\n    }\n\n    /**\n     * Event handler that is fired on click on a Region / Marker / MarkerCluster\n     * @param {JQuery.Event} e - Event object\n     * @param {Region|Marker|MarkerCluster} region\n     * @returns {boolean}\n     */\n    regionClickHandler (e: JQuery.Event, region: Region|Marker|MarkerCluster){\n\n        var _this = this;\n\n        _this.region_clicked = null;\n        var actions = _this.options.actions;\n\n        if(_this.eventsPreventList['click'])\n            return;\n\n        if(_this.editRegions.on){\n            _this.selectRegion(region.id);\n            _this.regionEditHandler.call(region);\n            return;\n        }\n        // _this.hidePopover();\n\n        if(region instanceof MarkerCluster){\n            _this.zoomTo(region.markers);\n            return;\n        }\n\n        if(region instanceof Region){\n\n            _this.selectRegion(region.id);\n\n            if(actions.region.click.zoom){\n                _this.zoomTo(region, actions.region.click.zoomToLevel);\n            }\n\n            if(actions.region.click.filterDirectory){\n                let query = new Query({filters: {regions: {table_name: this.regionsRepository.getSchema().name, region_ids: [region.id]}}});\n                _this.objectsRepository.find(query).done(function(){\n                    if(_this.controllers.popover){\n                        _this.controllers.popover.redraw(region.forTemplate());\n                    }\n                    if(_this.controllers.detailsView){\n                        _this.controllers.detailsView.redraw(region.forTemplate());\n                    }\n                });\n                _this.updateFiltersState();\n            }\n\n            if(actions.region.click.showDetails){\n                _this.loadDetailsView(region);\n            }\n\n            if(actions.region.click.showPopover){\n                if(actions.region.click.zoom){\n                    setTimeout(function(){\n                        _this.showPopover(region);\n                    },400);\n                }else{\n                    _this.showPopover(region);\n                }\n            }else if(e && e.type.indexOf('touch')!==-1 && actions.region.touch.showPopover){\n                if(actions.region.click.zoom){\n                    setTimeout(function(){\n                        _this.showPopover(region);\n                    },400);\n                }else{\n                    _this.showPopover(region);\n                }\n            }\n\n            if(actions.region.click.goToLink){\n                var linkParts = actions.region.click.linkField.split('.');\n                var url;\n                if(linkParts.length > 1){\n                    var obj = linkParts.shift();\n                    var attr = '.'+linkParts.join('.');\n                    if(obj == 'Region'){\n                        if(region.data){\n                            try {\n                                url = eval('region.data'+attr);\n                            }catch(err){\n                                console.log(\"No such field as region.data\"+attr);\n                            }\n                        }\n                    }else{\n                        if(region.objects && region.objects[0]){\n                            try {\n                                url = eval('region.objects[0]'+attr);\n                            }catch(err){\n                                console.log(\"No such field as region.objects[0]\"+attr);\n                            }\n                        }\n                    }\n\n                    if(url && !_this.disableLinks){\n                        if(_this.editMode){\n                            alert('Redirect: '+url+'\\nLinks are disabled in the preview.');\n                            return true;\n                        }\n                        if(actions.region.click.newTab){\n                            var win = window.open(url, '_blank');\n                            win.focus();\n                        }else{\n                            window.location.href = url;\n                        }\n                    }\n                }\n            }\n            if(actions.region.click.showAnotherMap){\n                if(_this.editMode){\n                    alert('\"Show another map\" action is disabled in the preview');\n                    return true;\n                }\n                var linkParts = actions.region.click.showAnotherMapField.split('.');\n                var url;\n                if(linkParts.length > 1){\n                    var obj = linkParts.shift();\n                    var attr = '.'+linkParts.join('.');\n                    var map_id;\n                    if(obj == 'Region'){\n                        if(region.data)\n                            map_id = eval('region.data'+attr);\n                    }else{\n                        if(region.objects && region.objects[0])\n                            map_id = eval('region.objects[0]'+attr);\n                    }\n\n                    if(map_id){\n                        var container = actions.region.click.showAnotherMapContainerId ? $('#'+actions.region.click.showAnotherMapContainerId)[0] : $(_this.containers.map)[0];\n                        _this.loadMap(map_id, container);\n                    }\n                }\n            }\n            _this.events.trigger('click.region', region, [e, _this]);\n        }else if(region instanceof Marker){\n            _this.selectMarker(region);\n\n            var passingObject = region.object;\n\n            if(actions.marker.click.zoom) {\n                _this.zoomTo(region, actions.marker.click.zoomToLevel);\n            }\n\n            if(actions.marker.click.filterDirectory){\n                let query = new Query({filters: {id: region.object.id}});\n                _this.objectsRepository.find(query);\n                _this.updateFiltersState();\n            }\n\n\n            if(actions.marker.click.showDetails)\n                _this.loadDetailsView(passingObject);\n            if(actions.marker.click.showPopover){\n                if(actions.marker.click.zoom){\n                    setTimeout(function(){\n                        _this.showPopover(passingObject);\n                    },500);\n                }else{\n                    _this.showPopover(passingObject);\n                }\n            }else if(e && e.type.indexOf('touch')!==-1 && actions.marker.touch.showPopover){\n                if(actions.marker.click.zoom){\n                    setTimeout(function(){\n                        _this.showPopover(passingObject);\n                    },500);\n                }else{\n                    _this.showPopover(passingObject);\n                }\n            }\n            if(actions.marker.click.goToLink){\n                var linkParts = actions.marker.click.linkField.split('.');\n                var url;\n                if(linkParts.length > 1){\n                    var obj = linkParts.shift();\n                    var attr = '.'+linkParts.join('.');\n                    try {\n                        url = eval('passingObject'+attr);\n                    }catch(err){\n                        console.log(\"MapSVG: No such field as passingObject\"+attr);\n                    }\n                    if(url && !_this.disableLinks)\n                        if(_this.editMode){\n                            alert('Redirect: '+url+'\\nLinks are disabled in the preview.');\n                            return true;\n                        }\n                    if(actions.marker.click.newTab){\n                        var win = window.open(url, '_blank');\n                        win.focus();\n                    }else{\n                        window.location.href = url;\n                    }\n                }\n            }\n            _this.events.trigger('click.marker', region, [e, _this]);\n        }\n    }\n    /**\n     * Checks if file exists by provided URL.\n     * @param {string} url\n     * @returns {boolean}\n     *\n     * @private\n     */\n    fileExists (url){\n\n        var _this = this;\n\n        if(url.substr(0,4)==\"data\")\n            return true;\n        var http = new XMLHttpRequest();\n        http.open('HEAD', url, false);\n        http.send();\n        return http.status!=404;\n    }\n    /**\n     * Returns CSS style of an SVG element\n     * @param elem\n     * @param prop\n     * @returns {*|string} - CSS\n     *\n     * @private\n     * @deprecated\n     */\n    getStyle (elem,prop){\n\n        var _this = this;\n\n        if (elem.currentStyle) {\n            return elem.currentStyle.margin;\n        } else if (window.getComputedStyle) {\n            // @ts-ignore\n            if (window.getComputedStyle.getPropertyValue){\n                return window.getComputedStyle(elem, null).getPropertyValue(prop)\n            } else {\n                return window.getComputedStyle(elem)[prop];\n            }\n        }\n    }\n    /**\n     * Hides all markers except one.\n     * Used in Map Editor.\n     * @param {string} id - ID of the Marker\n     * @private\n     */\n    hideMarkersExceptOne(id){\n\n        var _this = this;\n\n        /*\n        var objects = _this.objectsRepository.getLoaded();\n\n        objects.forEach(function(object){\n            if((id != object.id) && object.location && object.location.marker){\n                object.location.marker.hide();\n            }\n        });\n        */\n\n        _this.markers.forEach(function(marker){\n            if(typeof id === 'undefined' || (marker.object && id != marker.object.id)){\n                marker.hide();\n            }\n        });\n\n        $(_this.containers.wrap).addClass('mapsvg-edit-marker-mode');\n    }\n    /**\n     * Shows all markers after .hideMarkersExceptOne()\n     * Used in Map Editor.\n     * @private\n     */\n    showMarkers(){\n\n        var _this = this;\n\n        _this.markers.forEach(function(m){\n            m.show();\n        });\n        _this.deselectAllMarkers();\n        // $(_this.containers.wrap).removeClass('mapsvg-clusters-hidden');\n        $(_this.containers.wrap).removeClass('mapsvg-edit-marker-mode');\n\n    }\n    /**\n     * Event handler that creates marker on click on the map.\n     * Used in the Map Editor.\n     * @param {object} e - Event object\n     * @returns {boolean}\n     * @private\n     */\n    markerAddClickHandler (e){\n\n        var _this = this;\n\n        // Don't add marker if marker was clicked\n        if($(e.target).hasClass('mapsvg-marker')) return false;\n\n        var mc = MapSVG.mouseCoords(e);\n        var x  = mc.x - $(_this.containers.svg).offset().left;\n        var y  = mc.y - $(_this.containers.svg).offset().top;\n        var screenPoint = new ScreenPoint(x,y);\n        var svgPoint = _this.convertPixelToSVG(screenPoint);\n        var geoPoint = _this.convertSVGToGeo(svgPoint);\n\n        if(!$.isNumeric(x) || !$.isNumeric(y))\n            return false;\n\n        var location = new Location({\n            svgPoint: svgPoint,\n            geoPoint: geoPoint,\n            img: _this.options.defaultMarkerImage\n        });\n\n        // When Form Builder is opened in MapSVG Builder, there could be created marker\n        // already so we want to move the marker to a new position on map click\n        // instead of creating a new marker\n        if(_this.editingMarker){\n            // _this.editingMarker.moveToClick([x,y]);\n            _this.editingMarker.setPoint(svgPoint);\n            return;\n        }\n\n        var marker = new Marker({\n            location: location,\n            mapsvg: this\n        });\n        _this.markerAdd(marker);\n\n        _this.markerEditHandler && _this.markerEditHandler.call(marker);\n\n    }\n    /**\n     * Sets default marker image.\n     * Used in Map Editor.\n     * @param {string} src - Image URL\n     * @private\n     */\n    setDefaultMarkerImage (src){\n\n        var _this = this;\n\n        _this.options.defaultMarkerImage = src;\n    }\n\n    /**\n     * Checks and remebers if marker images should be set by a field value\n     * @private\n     */\n    setMarkerImagesDependency (){\n        var _this = this;\n        _this.locationField = _this.objectsRepository.schema.getFieldByType('location');\n        // @ts-ignore\n        if(_this.locationField.markersByFieldEnabled && _this.locationField.markerField && Object.values(_this.locationField.markersByField).length > 0){\n            this.setMarkersByField = true;\n        } else {\n            this.setMarkersByField = false;\n        }\n    }\n\n    /**\n     * Returns default marker image or marker image by field value if such option is enabled\n     * @param {Number|String} fieldValue\n     * @returns {String} URL of marker image\n     * @private\n     */\n    getMarkerImage (fieldValueOrObject: any, location?: Location): string {\n        var _this = this;\n\n        var fieldValue;\n\n        if(this.setMarkersByField){\n            if(typeof fieldValueOrObject === 'object'){\n                // @ts-ignore\n                fieldValue = fieldValueOrObject[_this.locationField.markerField];\n            } else {\n                fieldValue = fieldValueOrObject;\n            }\n            // @ts-ignore\n            if(_this.locationField.markersByField[fieldValue]){\n                // @ts-ignore\n                return _this.locationField.markersByField[fieldValue];\n            }\n        }\n\n        return (location && location.img) ?  location.img : (this.options.defaultMarkerImage ? this.options.defaultMarkerImage : MapSVG.urls.root+'markers/_pin_default.png');\n    }\n\n    /**\n     * Sets on/off \"edit markers\" mode\n     * @param {bool} on - on/off\n     * @param {bool} clickAddsMarker - defines if click on the map should add a marker\n     * @private\n     */\n    setMarkersEditMode (on, clickAddsMarker){\n\n        var _this = this;\n\n        _this.editMarkers.on = MapSVG.parseBoolean(on);\n        _this.clickAddsMarker = _this.editMarkers.on;\n        _this.setEventHandlers();\n    }\n\n    /**\n     * Sets on/off \"edit regions\" mode\n     * Used in Map Editor.\n     * @param {bool} on - on/off\n     *\n     * @private\n     */\n    setRegionsEditMode (on){\n\n        var _this = this;\n\n        _this.editRegions.on = MapSVG.parseBoolean(on);\n        _this.deselectAllRegions();\n        _this.setEventHandlers();\n    }\n\n    /**\n     * Enables edit mode (which means that the map is going to be shown in the Map Editor)\n     * Used in the Map Editor.\n     * @param {bool} on\n     * @private\n     */\n    setEditMode(on){\n\n        var _this = this;\n\n        _this.editMode = on;\n    }\n\n    /**\n     * Enables \"Edit objects\" mode\n     * Used in the Map Editor.\n     * @param {bool} on\n     * @private\n     */\n    setDataEditMode (on){\n\n        var _this = this;\n\n        _this.editData.on = MapSVG.parseBoolean(on);\n        _this.deselectAllRegions();\n        _this.setEventHandlers();\n    }\n\n    /**\n     * Downloads SVG file.\n     * @private\n     */\n    /*\n    download(){\n\n        var _this = this;\n\n        var downloadForm;\n        if($('#mdownload').length === 1){\n            downloadForm = $('#mdownload');\n        } else {\n            downloadForm = $('<form id=\"mdownload\" action=\"/wp-content/plugins/mapsvg-dev/download.php\" method=\"POST\"><input type=\"hidden\" name=\"svg_file\" value=\"0\" /><input type=\"hidden\" name=\"svg_title\"></form>');\n            downloadForm.appendTo('body');\n        }\n\n        downloadForm.find('input[name=\"svg_file\"]').val($(_this.containers.svg).prop('outerHTML'));\n        downloadForm.find('input[name=\"svg_title\"]').val(_this.options.title);\n        setTimeout(function() {\n            jQuery('#mdownload').submit();\n        }, 500);\n    }\n    */\n\n    /**\n     * Shows the tooltip with provided HTML content.\n     * @param {string} html - HTML content\n     */\n    showTooltip (html){\n\n        var _this = this;\n\n        if (html.length){\n            $(_this.containers.tooltip).html(html);\n            $(_this.containers.tooltip).addClass('mapsvg-tooltip-visible');\n        }\n    }\n\n    /**\n     * Adjusts popover position. User on zoom and when map container is resized.\n     */\n    popoverAdjustPosition(){\n\n        var _this = this;\n\n        if(!$(_this.containers.popover) || !$(_this.containers.popover).data('point')) return;\n\n        var pos = _this.convertSVGToPixel($(_this.containers.popover).data('point'));\n\n        // pos[0] = pos[0] - (_this.layers.popovers.offset().left - $(_this.containers.map).offset().left);\n        // pos[1] = pos[1] - (_this.layers.popovers.offset().top - $(_this.containers.map).offset().top);\n\n        $(_this.containers.popover)[0].style.transform = 'translateX(-50%) translate('+pos[0]+'px,'+pos[1]+'px)';\n    }\n\n    /**\n     * Shows a popover for provided Region or DB Object.\n     * @param {Region|object} object - Region or DB Object\n     *\n     * @example\n     * var region = mapsvg.getRegion(\"US-TX\");\n     * mapsvg.showPopover(region);\n     */\n    showPopover  (object){\n\n        var _this = this;\n\n        var mapObject = object instanceof Region ? object : (object.location && object.location.marker && object.location.marker ? object.location.marker : null);\n        if(!mapObject)\n            return;\n\n        var point;\n        if(mapObject instanceof Marker){\n            point = mapObject.svgPoint;\n        } else {\n            point = mapObject.getCenterSVG();\n        }\n        _this.controllers.popover && _this.controllers.popover.destroy();\n        _this.controllers.popover = new PopoverController({\n            container: _this.containers.popover,\n            point: point,\n            yShift: mapObject instanceof Marker ? mapObject.height : 0,\n            template: object instanceof Region ?  _this.templates.popoverRegion : _this.templates.popoverMarker,\n            mapsvg: _this,\n            data: object.getData(this.regionsRepository.schema.name),\n            mapObject: mapObject,\n            scrollable: true,\n            withToolbar: MapSVG.isPhone && _this.options.popovers.mobileFullscreen ? false : true,\n            events: {\n                shown: function(mapsvg){\n                    if(_this.options.popovers.centerOn){\n                        var shift = $(this.containers.main).height()/2;\n                        if(_this.options.popovers.centerOn && !(MapSVG.isPhone && _this.options.popovers.mobileFullscreen)){\n                            _this.centerOn(mapObject, shift);\n                        }\n                    }\n                    _this.popoverShowingFor = mapObject;\n                    _this.events.trigger('shown.popover', this, [_this]);\n                },\n                closed: function(mapsvg){\n                    _this.options.popovers.resetViewboxOnClose && _this.viewBoxReset(true);\n                    _this.popoverShowingFor = null;\n                    _this.events.trigger('closed.popover', this, [mapsvg]);\n                },\n                resize: function(){\n                    if(_this.options.popovers.centerOn){\n                        var shift = $(this.containers.main).height()/2;\n                        if(_this.options.popovers.centerOn && !(MapSVG.isPhone && _this.options.popovers.mobileFullscreen)){\n                            _this.centerOn(mapObject, shift);\n                        }\n                    }\n                }\n            }\n        });\n        _this.controllers.popover._init();\n    }\n\n    /**\n     * Hides the popover\n     */\n    hidePopover (){\n\n        var _this = this;\n\n        _this.controllers.popover && _this.controllers.popover.close();\n        // $('body').toggleClass('mapsvg-popover-open', false);\n    }\n\n    /**\n     * Hides the tooltip\n     */\n    hideTip  (){\n\n        var _this = this;\n\n        $(_this.containers.tooltip).removeClass('mapsvg-tooltip-visible');\n        //_this.containers.tooltip.html('');\n    }\n\n    /**\n     * Event handler that catches clicks outside of the popover and closes the popover.\n     * @param {object} e - Event object\n     */\n    popoverOffHandler (e){\n\n        var _this = this;\n\n        if(_this.isScrolling || $(e.target).closest('.mapsvg-popover').length || $(e.target).hasClass('mapsvg-btn-map'))\n            return;\n        this.controllers.popover && this.controllers.popover.close();\n    }\n\n    /**\n     * Mouseover event handler for Regions and Markers\n     * @param {object} e - Event object\n     * @param {Marker|Region} object\n     * @private\n     */\n    mouseOverHandler (e, object){\n\n        var _this = this;\n\n        if(_this.eventsPreventList['mouseover']){\n            return;\n        }\n\n        if(_this.options.tooltips.on){\n            var name, data, _object;\n            if(object instanceof Region) {\n                name = 'tooltipRegion';\n                _object = object;\n            }\n            if(object instanceof Marker) {\n                name = 'tooltipMarker';\n                _object = object.object;\n            }\n            if(_object != null && _object.id && _this.popoverShowingFor !== object){\n                _this.showTooltip(_this.templates[name](object.getData(this.regionsRepository.schema.name)));\n            }\n        }\n\n        let ids: any[];\n        if(_this.options.menu.on){\n            if(_this.options.menu.source == 'database'){\n                if((object instanceof Region) && object.objects.length) {\n                    ids = object.objects.map(function(obj){\n                        return obj.id;\n                    });\n                }\n                if(object instanceof Marker) {\n                    ids = object.object ? [object.object.id] : [];\n                }\n            }else{\n                if((object instanceof Region)) {\n                    ids = [object.id];\n                }\n                if(this instanceof Marker && object.object.regions && object.object.regions.length) {\n                    ids = object.object.regions.map(function(obj){\n                        return obj.id;\n                    });\n                }\n            }\n            _this.controllers.directory.highlightItems(ids);\n        }\n\n        if(object instanceof Region) {\n            if (!object.selected)\n                object.highlight();\n            _this.events.trigger('mouseover.region', object, [e, _this]);\n        }else{\n            _this.highlightMarker(object);\n            _this.events.trigger('mouseover.marker', object, [e, _this]);\n        }\n    }\n\n    /**\n     * Mouseout event handler for Regions and Markers\n     * @param {object} e - Event object\n     * @param {Marker|Region} object\n     * @private\n     */\n    mouseOutHandler (e, object){\n\n        var _this = this;\n\n        if(_this.eventsPreventList['mouseout']){\n            return;\n        }\n\n        if(_this.options.tooltips.on)\n            _this.hideTip();\n        if(object instanceof Region) {\n            if (!object.selected)\n                object.unhighlight();\n            _this.events.trigger('mouseout.region', object, [e, _this]);\n        }else{\n            _this.unhighlightMarker();\n            _this.events.trigger('mouseout.marker', object, [e, _this]);\n        }\n\n        let ids: any[];\n        if(_this.options.menu.on){\n            if(_this.options.menu.source == 'database'){\n                if(object instanceof MapSVG.Marker) {\n                    ids = object.object ? [object.object.id] : [];\n                }\n            }\n            _this.controllers.directory.unhighlightItems();\n        }\n\n    }\n\n    /**\n     * Prevents provided event from being fired\n     * @param {string} event - Event name\n     * @private\n     */\n    eventsPrevent(event){\n\n        var _this = this;\n\n        _this.eventsPreventList[event] = true;\n    }\n\n    /**\n     * Restores event disabled by .eventsPrevent()\n     * @param {string} event - Event name\n     * @private\n     */\n    eventsRestore(event){\n        var _this = this;\n        if(event){\n            _this.eventsPreventList[event] = false;\n        } else {\n            _this.eventsPreventList = {};\n        }\n    }\n\n    /**\n     * Sets all event handlers\n     * @private\n     */\n    setEventHandlers (){\n\n        var _this = this;\n\n        $(_this.containers.map).off('.common.mapsvg');\n        $(_this.containers.scrollpane).off('.common.mapsvg');\n        $(document).off('keydown.scroll.mapsvg');\n        $(document).off('mousemove.scrollInit.mapsvg');\n        $(document).off('mouseup.scrollInit.mapsvg');\n\n        if(_this.editMarkers.on){\n\n            $(_this.containers.map).on('touchstart.common.mapsvg mousedown.common.mapsvg', '.mapsvg-marker',function(e){\n                e.originalEvent.preventDefault();\n                var marker = _this.getMarker($(this).attr('id'));\n                var startCoords = MapSVG.mouseCoords(e);\n                marker.drag(startCoords, _this.scale);\n\n                /*\n                marker.drag(startCoords, _this.scale, function() {\n                    if (_this.mapIsGeo){\n                        var svgPoint = new SVGPoint(this.x + this.width / 2, this.y + (this.height-1));\n                        this.geoCoords = _this.convertSVGToGeo(svgPoint);\n                    }\n                    //_this.markerEditHandler && _this.markerEditHandler.call(this,true);\n                },function(){\n                    //_this.markerEditHandler && _this.markerEditHandler.call(this);\n                });\n\n                 */\n            });\n        }\n\n        // REGIONS\n        if(!_this.editMarkers.on) {\n            $(_this.containers.map).on('mouseover.common.mapsvg', '.mapsvg-region', function (e) {\n                var id = $(this).attr('id');\n                _this.mouseOverHandler.call(_this, e, _this.getRegion(id));\n            }).on('mouseleave.common.mapsvg', '.mapsvg-region', function (e) {\n                var id = $(this).attr('id');\n                _this.mouseOutHandler.call(_this, e, _this.getRegion(id));\n            });\n        }\n        if(!_this.editRegions.on){\n            $(_this.containers.map).on('mouseover.common.mapsvg', '.mapsvg-marker', function (e) {\n                var id = $(this).attr('id');\n                _this.mouseOverHandler.call(_this, e, _this.getMarker(id));\n            }).on('mouseleave.common.mapsvg', '.mapsvg-marker', function (e) {\n                var id = $(this).attr('id');\n                _this.mouseOutHandler.call(_this, e, _this.getMarker(id));\n            });\n        }\n\n        if(_this.options.scroll.spacebar){\n            $(document).on('keydown.scroll.mapsvg', function(e) {\n                if(document.activeElement.tagName !=='INPUT' && !_this.isScrolling && e.keyCode == 32){\n                    e.preventDefault();\n                    $(_this.containers.map).addClass('mapsvg-scrollable');\n                    $(document).on('mousemove.scrollInit.mapsvg', function(e) {\n                        _this.isScrolling = true;\n                        $(document).off('mousemove.scrollInit.mapsvg');\n                        _this.scrollStart(e,_this);\n                    }).on('keyup.scroll.mapsvg', function (e) {\n                        if (e.keyCode == 32) {\n                            $(document).off('mousemove.scrollInit.mapsvg');\n                            $(_this.containers.map).removeClass('mapsvg-scrollable');\n                        }\n                    });\n                }\n            });\n        }else if (!_this.options.scroll.on) {\n\n            if(!_this.editMarkers.on) {\n                $(_this.containers.map).on('touchstart.common.mapsvg', '.mapsvg-region', function (e) {\n                    _this.scroll.touchScrollStart = $(window).scrollTop();\n                });\n                $(_this.containers.map).on('touchstart.common.mapsvg', '.mapsvg-marker', function (e) {\n                    _this.scroll.touchScrollStart = $(window).scrollTop();\n                });\n\n                $(_this.containers.map).on('touchend.common.mapsvg mouseup.common.mapsvg', '.mapsvg-region', function (e) {\n                    if (e.cancelable) {\n                        e.preventDefault();\n                    }\n                    if(_this.scroll.touchScrollStart === undefined || _this.scroll.touchScrollStart === $(window).scrollTop()){\n                        _this.regionClickHandler.call(_this, e, _this.getRegion($(this).attr('id')));\n                    }\n                    // _this.regionClickHandler.call(_this, e, _this.getRegion($(this).attr('id')));\n                });\n                $(_this.containers.map).on('touchend.common.mapsvg mouseup.common.mapsvg','.mapsvg-marker',  function (e) {\n                    if (e.cancelable) {\n                        e.preventDefault();\n                    }\n                    if(_this.scroll.touchScrollStart === undefined || _this.scroll.touchScrollStart === $(window).scrollTop()){\n                        _this.regionClickHandler.call(_this, e, _this.getMarker($(this).attr('id')));\n                    }\n                });\n                $(_this.containers.map).on('touchend.common.mapsvg mouseup.common.mapsvg','.mapsvg-marker-cluster',  function (e) {\n                    if (e.cancelable) {\n                        e.preventDefault();\n                    }\n                    if(!_this.scroll.touchScrollStart || _this.scroll.touchScrollStart == $(window).scrollTop()) {\n                        var cluster = $(this).data(\"cluster\");\n                        _this.zoomTo(cluster.markers);\n                    }\n                });\n                // }\n            }else{\n\n                if(_this.clickAddsMarker)\n                    $(_this.containers.map).on('touchend.common.mapsvg mouseup.common.mapsvg', function (e) {\n                        // e.stopImmediatePropagation();\n                        if (e.cancelable) {\n                            e.preventDefault();\n                        }\n                        _this.markerAddClickHandler(e);\n                    });\n            }\n        } else {\n\n            $(_this.containers.map).on('touchstart.common.mapsvg mousedown.common.mapsvg', function(e){\n\n                if($(e.target).hasClass('mapsvg-popover')||$(e.target).closest('.mapsvg-popover').length){\n                    // Prevent even dobule firing touchstart+mousedown on clicking popover close button\n                    if($(e.target).hasClass('mapsvg-popover-close')){\n                        if(e.type=='touchstart'){\n                            if (e.cancelable) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                    return;\n                }\n\n                if(e.type=='touchstart'){\n                    if (e.cancelable) {\n                        e.preventDefault();\n                    }\n                }\n\n                let obj: any;\n\n                if(e.target && $(e.target).attr('class') && $(e.target).attr('class').indexOf('mapsvg-region')!=-1){\n                    obj = _this.getRegion($(e.target).attr('id'));\n                    _this.scrollRegionClickHandler.call(_this, e, obj);\n                }else if(e.target && $(e.target).attr('class') && $(e.target).attr('class').indexOf('mapsvg-marker')!=-1 && $(e.target).attr('class').indexOf('mapsvg-marker-cluster')===-1){\n                    if(_this.editMarkers.on){\n                        return;\n                    }\n                    obj = _this.getMarker($(e.target).attr('id'));\n                    _this.scrollRegionClickHandler.call(_this, e, obj);\n                }else if(e.target && $(e.target).attr('class') && $(e.target).attr('class').indexOf('mapsvg-marker-cluster')!=-1){\n                    if(_this.editMarkers.on){\n                        return;\n                    }\n                    obj = ($(e.target).data('cluster'));\n                    _this.scrollRegionClickHandler.call(_this, e, obj);\n                }\n                if(e.type=='mousedown'){\n                    _this.scrollStart(e,_this);\n                }else{\n                    _this.touchStart(e,_this);\n                }\n            });\n\n        }\n\n        $(_this.containers.map).on('mouseover.common.mapsvg', '.mapsvg-choropleth-gradient-wrap', function(e){\n            let currentSegment = _this.options.choropleth.segments[$(e.target).parents('.mapsvg-choropleth-gradient-wrap').data('idx')];\n\n            if (currentSegment.description){\n                _this.showTooltip(currentSegment.description);\n            }\n        });\n\n        $(_this.containers.map).on('mouseleave.common.mapsvg', '.mapsvg-choropleth-gradient-wrap', function(e){\n            _this.hideTip();\n        });\n\n    }\n\n    setLabelsRegions(options?: any){\n\n        var _this = this;\n\n        options = options || _this.options.labelsRegions;\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n        $.extend(true, _this.options, {labelsRegions: options});\n\n        if(_this.options.labelsRegions.on){\n            _this.regions.forEach(function (region) {\n                if(!region.textLabel){\n                    region.textLabel = jQuery('<div class=\"mapsvg-region-label\" />')[0];\n                    $(_this.containers.scrollpane).append(region.textLabel);\n                }\n                try{\n                    $(region.textLabel).html(_this.templates.labelRegion(region.forTemplate()));\n                }catch (err) {\n                    console.error('MapSVG: Error in the \"Region Label\" template');\n                }\n\n            });\n            _this.labelsRegionsAdjustPosition();\n        } else {\n            _this.regions.forEach(function (region) {\n                if(region.textLabel){\n                    $(region.textLabel).remove();\n                    region.textLabel = null;\n                    delete region.textLabel;\n                }\n            });\n        }\n    }\n\n    /**\n     * Deletes Marker lables\n     */\n    deleteLabelsMarkers(){\n\n        var _this = this;\n\n        _this.markers.forEach(function (marker) {\n            if(marker.textLabel){\n                marker.textLabel.remove();\n                marker.textLabel = null;\n                delete marker.textLabel;\n            }\n        });\n    }\n\n    /**\n     * Sets Marker labels\n     * @param {object} options\n     */\n    setLabelsMarkers(options?: any){\n\n        var _this = this;\n\n        options = options || _this.options.labelsMarkers;\n        options.on != undefined && (options.on = MapSVG.parseBoolean(options.on));\n        $.extend(true, _this.options, {labelsMarkers: options});\n\n        if(_this.options.labelsMarkers.on){\n            _this.markers.forEach(function (marker) {\n                if(!marker.textLabel){\n                    marker.textLabel = jQuery('<div class=\"mapsvg-marker-label\" data-object-id=\"'+marker.object.id+'\"/>')[0];\n                    $(_this.containers.scrollpane).append(marker.textLabel);\n                }\n                try{\n                    $(marker.textLabel).html(_this.templates.labelMarker(marker.object));\n                }catch (err) {\n                    console.error('MapSVG: Error in the \"Marker Label\" template');\n                }\n            });\n            _this.markersAdjustPosition();\n        } else {\n            _this.deleteLabelsMarkers();\n        }\n    }\n\n    /**\n     * Adds a layer to the map that may contain some objects.\n     * @param {string} name - Layer name\n     * @private\n     */\n    addLayer(name){\n\n        var _this = this;\n\n        _this.layers[name] = $('<div class=\"mapsvg-layer mapsvg-layer-'+name+'\"></div>')[0];\n        _this.containers.layers.appendChild(_this.layers[name]);\n        return _this.layers[name];\n    }\n\n    /**\n     * Returns Database\n     * @returns {DatabaseService}\n     * @example\n     * var objects = mapsvg.getDatabase().getLoaded();\n     * var object  = mapsvg.getDatabase().getLoadedObject(12);\n     *\n     * // Filter DB by region \"US-TX\". This automatically triggers markers and directory reloading\n     * mapsvg.getDatabase().getAll({filters: {regions: \"US-TX\"}});\n     */\n    getDb(){\n        var _this = this;\n        return this.objects;\n    }\n\n    /**\n     * Returns Regions database\n     * @returns {DatabaseService}\n     */\n    getDbRegions(){\n        var _this = this;\n        return this.regions;\n    }\n\n    /**\n     * Adds an SVG object as Region to MapSVG\n     * @param {object} svgObject - SVG Object\n     * @returns {Region}\n     * @private\n     */\n    regionAdd(svgObject: SVGPathElement|SVGCircleElement|SVGEllipseElement|SVGRectElement|SVGPolygonElement|SVGPolylineElement){\n\n        var _this = this;\n\n        var region = new Region(svgObject, _this);\n        region.setStatus(1);\n        _this.regions.push(region);\n        _this.regions.sort(function(a,b){\n            return a.id == b.id ? 0 : +(a.id > b.id) || -1;\n        });\n        return region;\n    }\n\n    /**\n     * Deletes a Region from the map\n     * @param {string} id - Region ID\n     * @private\n     */\n    regionDelete(id: string){\n\n        if(this.regions.findById(id)){\n            this.regions.findById(id).elem.remove();\n            this.regions.delete(id);\n        } else if ($('#'+id).length){\n            $('#'+id).remove();\n        }\n    }\n    /**\n     * Reloads Regions from SVG file\n     */\n    reloadRegions (){\n\n        var _this = this;\n\n        _this.regions.clear();\n        $(_this.containers.svg).find('.mapsvg-region').removeClass('mapsvg-region');\n        $(_this.containers.svg).find('.mapsvg-region-disabled').removeClass('mapsvg-region-disabled');\n        $(_this.containers.svg).find('path, polygon, circle, ellipse, rect').each(function(index){\n\n            // @ts-ignore\n            var elem = <SVGElement>this;\n\n            if($(elem).closest('defs').length)\n                return;\n            if(elem.getAttribute('id')) {\n                if(!_this.options.regionPrefix || (_this.options.regionPrefix && elem.getAttribute('id').indexOf(_this.options.regionPrefix)===0)){\n                    var region = new Region(elem, _this);\n                    _this.regions.push(region);\n                }\n            }\n            // if($(this).css('stroke-width')){\n            //     $(this).data('stroke-width', $(this).css('stroke-width').replace('px',''));\n            // }\n        });\n        // _this.regions.sort(function(a,b){\n        //     return a.id == b.id ? 0 : +(a.id > b.id) || -1;\n        // });\n        // _this.regions.forEach(function(region, index){\n        //     _this.regionsDict[region.id] = index;\n        // });\n    }\n    /**\n     * Reloads Regions data\n     */\n    reloadRegionsFull (){\n\n        var _this = this;\n\n        var statuses = _this.regionsRepository.getSchema().getFieldByType('status');\n\n        _this.regions.forEach(function(region){\n            let _region: CustomObject;\n            _region = <CustomObject>_this.regionsRepository.getLoaded().findById(region.id);\n\n            if(_region){\n                region.setData(_region);\n                if(statuses && _region.status !== undefined && _region.status!==null){\n                    region.setStatus(_region.status);\n                }\n            } else {\n                if(_this.options.filters.filteredRegionsStatus || _this.options.filters.filteredRegionsStatus === 0){\n                    region.setStatus(_this.options.filters.filteredRegionsStatus);\n                }\n            }\n        });\n\n        /*\n_this.regionsRepository.getLoaded().forEach(function(object){\n    var region = _this.getRegion(object.id);\n    if(region){\n        region.data = object;\n        if(statuses && object.status !== undefined && object.status!==null){\n            region.setStatus(object.status);\n            // _this.setRegionStatus(region, object.status);\n        }\n    }\n});\n */\n\n        _this.loadDirectory();\n        _this.setChoropleth();\n        _this.setLayersControl();\n        _this.setGroups();\n        if(_this.options.labelsRegions.on){\n            _this.setLabelsRegions();\n        }\n    }\n\n    /**\n     * Fix \"fit markers\" view world screen offset\n     * @private\n     */\n    fixMarkersWorldScreen (){\n        var _this = this;\n\n        if(_this.googleMaps.map) setTimeout(function(){\n            var markers = {left: 0, right: 0};\n            if(_this.markers.length > 1){\n                _this.markers.forEach(function(m){\n                    if(m.node.offset().left < ($(_this.containers.map).offset().left + $(_this.containers.map).width() / 2)){\n                        markers.left++;\n                    }else{\n                        markers.right++;\n                    }\n                });\n\n                if(markers.left === 0 || markers.right === 0){\n                    var k = markers.left === 0 ? 1 : -1;\n                    var ww = ((_this.svgDefault.viewBox.width / _this.mapLonDelta) * 360) * _this.getScale();\n                    _this.googleMaps.map.panBy(k*ww,0);\n                }\n            }\n        }, 400);\n    }\n\n    /**\n     * Updates map options from old version of MapSVG\n     * @param options\n     * @private\n     */\n    updateOutdatedOptions(options){\n\n        var _this = this;\n\n        // Fix Directory options\n        if(options.menu && (options.menu.position || options.menu.customContainer)){\n            if(options.menu.customContainer){\n                options.menu.location = 'custom';\n            } else {\n                options.menu.position = options.menu.position === 'left' ? 'left' : 'right';\n                options.menu.location = options.menu.position ==='left' ? 'leftSidebar' : 'rightSidebar';\n                if(!options.containers || !options.containers[options.menu.location]){\n                    options.containers = options.containers || {};\n                    options.containers[options.menu.location] = {on: false, width: '200px'};\n                }\n                options.containers[options.menu.location].width = options.menu.width;\n                if(MapSVG.parseBoolean(options.menu.on)){\n                    options.containers[options.menu.location].on = true;\n                }\n            }\n            delete options.menu.position;\n            delete options.menu.width;\n            delete options.menu.customContainer;\n        }\n        // Fix Details View options\n        if(options.detailsView && (options.detailsView.location === 'mapContainer' || options.detailsView.location === 'near' || options.detailsView.location === 'top')){\n            options.detailsView.location = 'map';\n        }\n        // Transfer zoom options to controls options\n        if(!options.controls){\n            options.controls = {};\n            options.controls.zoom = options.zoom && options.zoom.on && (!options.zoom.buttons || options.zoom.buttons.location!=='hide');\n            options.controls.location = options.zoom && options.zoom.buttons && options.zoom.buttons.location!=='hide' ? options.zoom.buttons.location : 'right';\n        }\n        // Transfer zoom options to controls options\n        if(options.colors && !options.colors.markers){\n            options.colors.markers = {\n                base:      {opacity:100, saturation: 100},\n                hovered:   {opacity:100, saturation: 100},\n                unhovered: {opacity:100,  saturation: 100},\n                active:    {opacity:100, saturation: 100},\n                inactive:  {opacity:100,  saturation: 100}\n            };\n        }\n        if (options.tooltipsMode){\n            options.tooltips.mode = options.tooltipsMode;\n            delete options.tooltipsMode;\n        }\n        if (options.popover){\n            options.popovers = options.popover;\n            delete options.popover;\n        }\n\n    }\n\n    /**\n     * Initialization. Map rendering happens here. Gets called on map creation.\n     * @param {MapOptionsInterface} options - Map options\n     * @param {HTMLElement} elem\n     * @returns {*}\n     * @private\n     */\n    init(){\n\n        var _this = this;\n\n        if(this.options.source === '') {\n            throw new Error('MapSVG: please provide SVG file source.');\n            return false;\n        }\n\n        // Extensions:\n\n        // 1. Create Element.remove() function if not exists\n        if (!('remove' in Element.prototype)) {\n            // @ts-ignore\n            Element.prototype.remove = function() {\n                if (this.parentNode) {\n                    this.parentNode.removeChild(this);\n                }\n            };\n        }\n\n        // 2. Hypot\n        // @ts-ignore\n        Math.hypot = Math.hypot || function() {\n            var y = 0;\n            var length = arguments.length;\n\n            for (var i = 0; i < length; i++) {\n                if (arguments[i] === Infinity || arguments[i] === -Infinity) {\n                    return Infinity;\n                }\n                y += arguments[i] * arguments[i];\n            }\n            return Math.sqrt(y);\n        };\n\n        // 2. SVG getTransformToElement\n        // @ts-ignore\n        SVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function(toElement) {\n            return toElement.getScreenCTM().inverse().multiply(this.getScreenCTM());\n        };\n        \n        this.setEvents(this.options.events);\n\n        this.events.trigger('beforeLoad');\n\n        this.setCss();\n\n        // Set background\n        this.containers.map.classList.add('mapsvg', 'no-transitions');\n        if(this.options.colors && this.options.colors.background){\n            this.containers.map.style.background = this.options.colors.background;\n        }\n\n        // _this.disableMarkersAnimation();\n\n        this.setContainers(_this.options.containers);\n        this.setColors();\n\n        // _this.$ratio = $('<div class=\"mapsvg-ratio\"></div>');\n        // _this.$ratio.insertBefore($(_this.containers.map));\n        // _this.$ratio.append($(_this.containers.map));\n\n        this.containers.loading = document.createElement('div');\n        this.containers.loading.className = 'mapsvg-loading';\n        this.containers.loading.innerHTML = this.options.loadingText;\n\n        this.containers.map.appendChild(this.containers.loading);\n\n        this.addLayer('markers');\n        this.addLayer('popovers');\n\n        $(_this.containers.loading).css({\n            'margin-left' () {\n                return -($(this).outerWidth(false) / 2)+'px';\n            },\n            'margin-top' () {\n                return -($(this).outerHeight(false) / 2)+'px';\n            }\n        });\n        if(_this.options.googleMaps.on){\n            $(_this.containers.map).addClass('mapsvg-google-map-loading');\n        }\n\n        // Load extension (common things)\n        // @ts-ignore\n        if(_this.options.extension && $().mapSvg.extensions && $().mapSvg.extensions[_this.options.extension]){\n            // @ts-ignore\n            var ext = $().mapSvg.extensions[_this.options.extension];\n            ext && ext.common(_this);\n        }\n\n        // Determine if the map needs to be saved after the init\n        let saveNeeded = false;\n\n        // GET the map by ajax request\n        $.ajax({url: _this.options.source+'?v='+_this.svgFileLastChanged}).fail(function(resp){\n            if(resp.status == 404){\n                var msg = 'MapSVG: file not found - '+_this.options.source+'\\n\\nIf you moved MapSVG from another server please read the following docs page: https://mapsvg.com/docs/installation/moving';\n                if(_this.editMode) {\n                    msg += '\\n\\nIf you know the correct path for the SVG file, please write it and press OK:';\n                    let oldSvgPath =  _this.options.source;\n                    let userSvgPath = prompt(msg, oldSvgPath);\n                    if (userSvgPath !== null){\n                        $.ajax({url: userSvgPath+'?v='+_this.svgFileLastChanged})\n                            .fail(function () {\n                                location.reload();\n                            })\n                            .done(function (xmlData) {\n                                saveNeeded = true;\n                                _this.options.source = userSvgPath;\n                                mapRender(xmlData);\n                            });\n                    }\n                    else {\n                        location.reload();\n                    }\n                } else {\n                    console.error(msg);\n                }\n            } else {\n                var msg = 'MapSVG: can\\'t load SVG file for unknown reason. Please contact support: https://mapsvg.ticksy.com';\n                if(_this.editMode) {\n                    alert(msg);\n                } else {\n                    console.error(msg);\n                }\n            }\n        }).done(function(xmlData){\n            mapRender(xmlData);\n        });\n\n        function mapRender(xmlData) {\n            // Default width/height/viewBox from SVG\n            var svgTag               = $(xmlData).find('svg');\n            _this.containers.svg     = svgTag[0];\n\n            if(svgTag.attr('width') && svgTag.attr('height')){\n                _this.svgDefault.width   = parseFloat(svgTag.attr('width').replace(/px/g,''));\n                _this.svgDefault.height  = parseFloat(svgTag.attr('height').replace(/px/g,''));\n                _this.svgDefault.viewBox = svgTag.attr('viewBox') ? new ViewBox(svgTag.attr('viewBox').split(' ')) : new ViewBox(0,0, _this.svgDefault.width, _this.svgDefault.height);\n            }else if(svgTag.attr('viewBox')){\n                _this.svgDefault.viewBox = new ViewBox(svgTag.attr('viewBox').split(' '));\n                _this.svgDefault.width   = _this.svgDefault.viewBox.width;\n                _this.svgDefault.height  = _this.svgDefault.viewBox.height;\n            }else{\n                var msg = 'MapSVG: width/height and viewBox are missing in the SVG file. Can\\'t parse the file because of that.';\n                if(_this.editMode){\n                    alert(msg);\n                } else {\n                    console.error(msg);\n                }\n                return false;\n            }\n            // Get geo-coordinates view  box from SVG file\n            var geo = svgTag.attr(\"mapsvg:geoViewBox\") || svgTag.attr(\"mapsvg:geoviewbox\");\n            if (geo) {\n                let geoParts = geo.split(\" \").map(p => parseFloat(p));\n                if (geoParts.length == 4){\n                    _this.mapIsGeo = true;\n                    _this.geoCoordinates = true;\n\n                    let sw = new GeoPoint(geoParts[3], geoParts[0]);\n                    let ne = new GeoPoint(geoParts[1], geoParts[2]);\n                    _this.geoViewBox = new GeoViewBox(sw, ne);\n                    _this.mapLonDelta = _this.geoViewBox.ne.lng - _this.geoViewBox.sw.lng;\n                    _this.mapLatBottomDegree = _this.geoViewBox.sw.lat * 3.14159 / 180;\n\n                }\n\n            }\n\n            if(_this.options.viewBox && _this.options.viewBox.length==4){\n                _this._viewBox = new ViewBox(_this.options.viewBox);\n            } else {\n                _this._viewBox = new ViewBox(_this.svgDefault.viewBox);\n            }\n\n            svgTag.attr('preserveAspectRatio','xMidYMid meet');\n            svgTag.removeAttr('width');\n            svgTag.removeAttr('height');\n\n            //// Adding moving sticky draggable image on background\n            //if(_this.options.scrollBackground)\n            //    _this.background = _this.R.rect(_options.filtersSchema = _this.filtersSchemathis.svgDefault.viewBox.x,_this.svgDefault.viewBox.y,_this.svgDefault.viewBox.width,_this.svgDefault.viewBox.height).attr({fill: _this.options.colors.background});\n\n            _this.reloadRegions();\n\n            $(_this.containers.scrollpane).append(svgTag);\n\n\n            // Set size\n            _this.setSize(_this.options.width, _this.options.height, _this.options.responsive);\n\n\n            if(_this.options.disableAll){\n                _this.setDisableAll(true);\n            }\n\n\n\n            // Set viewBox\n            _this.setViewBox(_this._viewBox);\n            _this.setResponsive(_this.options.responsive);\n\n\n            // var markers = _this.options.markers || _this.options.marks || [];\n            // _this.setMarkers(markers);\n\n            _this.setScroll(_this.options.scroll, true);\n\n            _this.setZoom(_this.options.zoom);\n\n            _this.setControls(_this.options.controls);\n            _this.setGoogleMaps();\n\n            _this.setTooltips(_this.options.tooltips);\n            _this.setPopovers(_this.options.popovers);\n\n            if(_this.options.cursor)\n                _this.setCursor(_this.options.cursor);\n\n            _this.setTemplates(_this.options.templates);\n\n\n            // Load extension (frontend things)\n            // @ts-ignore\n            if(!_this.options.backend && _this.options.extension &&  $().mapSvg.extensions &&  $().mapSvg.extensions[_this.options.extension]){\n                //@ts-ignore\n                var ext = $().mapSvg.extensions[_this.options.extension];\n                ext && ext.frontend(_this);\n            }\n\n            _this.filtersSchema = new Schema({fields: _this.options.filtersSchema});\n\n            // Load data from Database and finish loading\n            // _this.objectsRepository = new MapSVG.DatabaseService({\n            //     map_id    : _this.id,\n            //     perpage   : _this.options.database.pagination.on ? _this.options.database.pagination.perpage : 0,\n            //     sortBy    : _this.options.menu.source == 'database' ? _this.options.menu.sortBy : 'id',\n            //     sortDir   : _this.options.menu.source == 'database' ?_this.options.menu.sortDirection : 'desc',\n            //     table     : 'database'\n            // }, _this);\n            // _this.events['databaseLoaded'] && _this.objectsRepository.events.on('dataLoaded', _this.events['databaseLoaded']);\n\n            // _this.firstDataLoad = true;\n            _this.objectsRepository.events.on('loaded', function(){\n                _this.fitOnDataLoadDone = false;\n                _this.addLocations();\n                _this.fixMarkersWorldScreen();\n                // _this.addDataObjectsAsMarkers();\n                _this.attachDataToRegions();\n                _this.loadDirectory();\n                if(_this.options.labelsMarkers.on){\n                    _this.setLabelsMarkers();\n                }\n                // Check if there's a call to \"{{objects}}\" inside of the labelRegion template\n                // and if it's found then reload Region Labels\n                if(_this.options.templates.labelRegion.indexOf('{{objects') !== -1){\n                    _this.setLabelsRegions();\n                }\n                if(_this.options.filters.on && _this.options.filters.source === 'database' && _this.controllers.filters && _this.controllers.filters.hideFilters){\n                    _this.controllers.filters.setFiltersCounter();\n                }\n                _this.events.trigger('dataLoaded');\n\n                _this.updateFiltersState();\n                _this.setChoropleth();\n            });\n            _this.objectsRepository.events.on('schemaChanged', function () {\n                _this.objectsRepository.reload();\n            });\n            _this.objectsRepository.events.on('updated', function(obj){\n                _this.attachDataToRegions(obj);\n                _this.reloadRegionsFull();\n            });\n            _this.objectsRepository.events.on('created', function(obj){\n                _this.attachDataToRegions(obj);\n                _this.reloadRegionsFull();\n            });\n            _this.objectsRepository.events.on('deleted', function(id){\n                _this.attachDataToRegions();\n                _this.reloadRegionsFull();\n            });\n\n            _this.regionsRepository.events.on('loaded', function(){\n                _this.reloadRegionsFull();\n                if(_this.options.filters.on && _this.options.filters.source === 'regions' && _this.controllers.filters && _this.controllers.filters.hideFilters){\n                    _this.controllers.filters.setFiltersCounter();\n                }\n                _this.events.trigger('regionsLoaded');\n            });\n            _this.regionsRepository.events.on('updated', function(regionData){\n                _this.reloadRegionsFull();\n            });\n            _this.regionsRepository.events.on('created', function(regionData){\n                _this.reloadRegionsFull();\n            });\n            _this.regionsRepository.events.on('deleted', function(regionData){\n                _this.reloadRegionsFull();\n            });\n\n\n            _this.setMenu();\n            _this.setFilters();\n\n            if(_this.options.menu.filterout.field){\n                var f = {};\n                f[_this.options.menu.filterout.field] = _this.options.menu.filterout.val;\n                if(_this.options.menu.source == 'regions'){\n                    // _this.regionsRepository.query.setFilterOut(f);\n                }else{\n                    _this.objectsRepository.query.setFilterOut(f);\n                }\n            }\n\n            _this.setEventHandlers();\n\n            if(!_this.id){\n                _this.final();\n                return;\n            }\n\n            if(!_this.options.data_regions || !_this.options.data_objects){\n                _this.regionsRepository.find().done(function(regions){\n                    if(_this.options.database.loadOnStart || _this.editMode){\n                        _this.objectsRepository.find().done(function (data) {\n                            _this.final();\n                        });\n                    } else {\n                        _this.final();\n                    }\n                });\n            } else {\n                _this.regionsRepository.loadDataFromResponse(_this.options.data_regions);\n                if(_this.editMode || _this.options.database.loadOnStart){\n                    _this.objectsRepository.loadDataFromResponse(_this.options.data_objects);\n                }\n                delete _this.options.data_regions;\n                delete _this.options.data_objects;\n            }\n\n            _this.final();\n\n            if (saveNeeded === true){\n                let mapsRepo = new MapsRepository();\n                mapsRepo.update(_this);\n            }\n        } // end of SVG LOAD AJAX\n\n        return _this;\n\n    }\n    /**\n     * Final stage of initialization.\n     * Initialization is split into 2 steps because the 1st step contains async ajax request.\n     * When the ajax requires is done, the final initialization step is called.\n     * @private\n     */\n    final(){\n\n        var _this = this;\n\n        if(_this.options.googleMaps.on && !_this.googleMaps.map){\n            _this.events.on('googleMapsLoaded',function(){\n                _this.final();\n            });\n            return;\n        }\n\n        // Select region from URL\n        let match = RegExp('[?&]mapsvg_select=([^&]*)').exec(window.location.search);\n        if(match){\n            var select = decodeURIComponent(match[1].replace(/\\+/g, ' '));\n            _this.selectRegion(select);\n        }\n        if(window.location.hash){\n            var query = window.location.hash.replace('#/m/','');\n            var region = _this.getRegion(query);\n            if(region && _this.options.actions.map.afterLoad.selectRegion){\n                _this.regionClickHandler(null, region);\n                // mapsvg.selectRegion(id);\n                // check actions, do them\n                // mapsvg.loadDetailsView(region);\n                // if menu is on, select menu items\n                // mapsvg.getData().controllers.directory.selectItems(id);\n            } else {\n                // pass page number to #! like this: #!{query:{},\n            }\n        }\n\n        setTimeout(function(){\n            _this.updateSize();\n            setTimeout(function() {\n                $(_this.containers.map).removeClass('no-transitions');\n            },200);\n        },100);\n\n\n        _this.events.trigger('afterLoad');\n\n        $(_this.containers.loading).hide();\n        MapSVG.addInstance(_this);\n    }\n\n    createForm(options){\n        return new FormBuilder(options);\n    }\n    getApiUrl(path): string {\n        var server = new Server();\n        return server.getUrl(path);\n    }\n}\n\nexport {\n    MapSVGMap as map,\n    MapSVGMap as MapSVGMap,\n    MapsRepository as mapsRepository,\n    MapsV2Repository as mapsV2Repository,\n    Repository as repository,\n    SchemaRepository as schemaRepository,\n    MapSVG as globals,\n    Marker as marker,\n    Location as location,\n    Server  as server,\n    ArrayIndexed as arrayIndexed,\n    Schema as schema,\n    ScreenPoint as screenPoint,\n    SVGPoint as svgPoint,\n    GeoPoint as geoPoint\n};"],"names":["$","Sortable","CodeMirror.fromTextArea","FormElementTypes.CheckboxFormElement","FormElementTypes.CheckboxesFormElement","FormElementTypes.DateFormElement","FormElementTypes.DistanceFormElement","FormElementTypes.EmptyFormElement","FormElementTypes.IdFormElement","FormElementTypes.ImagesFormElement","FormElementTypes.LocationFormElement","FormElementTypes.ModalFormElement","FormElementTypes.PostFormElement","FormElementTypes.RadioFormElement","FormElementTypes.RegionsFormElement","FormElementTypes.SaveFormElement","FormElementTypes.SearchFormElement","FormElementTypes.SelectFormElement","FormElementTypes.StatusFormElement","FormElementTypes.TextFormElement","FormElementTypes.TextareaFormElement"],"mappings":"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"}